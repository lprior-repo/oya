{
  "session_id": "complete-workflow-example",
  "generated_at": "2026-01-25T16:35:00Z",
  "health": {
    "overall_score": 92,
    "coverage_score": 95,
    "clarity_score": 90,
    "testability_score": 94,
    "ai_readiness_score": 88,
    "gaps": [
      "Missing performance requirements for bulk operations"
    ],
    "inversion_gaps": []
  },
  "waves": [
    {
      "number": 1,
      "beads": [
        "PLAN-001",
        "PLAN-002",
        "PLAN-003"
      ],
      "parallelizable": true,
      "risk_level": "low",
      "estimated_minutes": 45
    },
    {
      "number": 2,
      "beads": [
        "PLAN-004"
      ],
      "parallelizable": false,
      "risk_level": "medium",
      "estimated_minutes": 30
    },
    {
      "number": 3,
      "beads": [
        "PLAN-005",
        "PLAN-006"
      ],
      "parallelizable": true,
      "risk_level": "medium",
      "estimated_minutes": 50
    },
    {
      "number": 4,
      "beads": [
        "PLAN-007"
      ],
      "parallelizable": false,
      "risk_level": "high",
      "estimated_minutes": 30
    },
    {
      "number": 5,
      "beads": [
        "PLAN-008",
        "PLAN-009",
        "PLAN-010"
      ],
      "parallelizable": true,
      "risk_level": "low",
      "estimated_minutes": 60
    }
  ],
  "beads": [
    {
      "id": "PLAN-001",
      "title": "Define Vision Section Types",
      "description": "Create Gleam types for Vision phase (VisionSection, Persona, Scenario)",
      "profile_type": "cli",
      "issue_type": "task",
      "labels": ["foundation", "types"],
      "priority": 1,
      "effort": "15min",
      "ears_requirements": [
        {
          "pattern": "ubiquitous",
          "requirement": "WHEN defining Vision types, the system SHALL include press_release, persona, north_star, scenarios, replaces, vorp, and out_of_scope fields"
        }
      ],
      "contracts": {
        "preconditions": [
          "Module src/intent/phase1_vision/vision_types.gleam exists"
        ],
        "postconditions": [
          "VisionSection type is defined with all 8 fields",
          "Scenario type includes persona and narrative",
          "All types have proper documentation"
        ],
        "invariants": [
          "Types are pure data structures (no behavior)",
          "All string fields are non-empty"
        ]
      },
      "type_definitions": [
        {
          "name": "VisionSection",
          "fields": [
            {"name": "press_release", "type": "String", "required": true},
            {"name": "persona", "type": "String", "required": true},
            {"name": "non_personas", "type": "List(String)", "required": true},
            {"name": "north_star", "type": "String", "required": true},
            {"name": "scenarios", "type": "List(Scenario)", "required": true},
            {"name": "replaces", "type": "Option(String)", "required": true},
            {"name": "vorp", "type": "String", "required": true},
            {"name": "out_of_scope", "type": "List(String)", "required": true}
          ]
        },
        {
          "name": "Scenario",
          "fields": [
            {"name": "persona", "type": "String", "required": true},
            {"name": "narrative", "type": "String", "required": true},
            {"name": "success_criteria", "type": "String", "required": true}
          ]
        }
      ],
      "test_cases": {
        "happy_path": [
          {
            "name": "Can construct VisionSection with all fields",
            "code": "VisionSection(press_release: \"...\", persona: \"...\", ...)"
          }
        ],
        "edge_cases": [],
        "error_cases": []
      },
      "input_schema": {},
      "output_schema": {},
      "edge_cases": [
        "Empty lists for non_personas or out_of_scope are valid",
        "replaces can be None for greenfield projects"
      ],
      "boundaries": {
        "will_do": [
          "Define pure data types",
          "Document each field's purpose",
          "Export public types"
        ],
        "will_not_do": [
          "Add validation logic (separate module)",
          "Include storage logic",
          "Implement business rules"
        ]
      },
      "dependencies": [],
      "blocks": [],
      "ai_context": {
        "implementation_hints": [
          "Use Gleam's pub type for exports",
          "Document with ////",
          "Keep types in separate module for clarity"
        ],
        "pitfalls": [
          "Don't mix data and behavior in type modules"
        ]
      },
      "spec_source": {
        "session_id": "complete-workflow-example",
        "feature_name": "Phase 1: Vision",
        "behavior_name": "Type Definitions"
      }
    },
    {
      "id": "PLAN-002",
      "title": "Define Shape Section Types",
      "description": "Create Gleam types for Shape phase (ShapeSection, FeatureShape, MVPSlice)",
      "profile_type": "cli",
      "issue_type": "task",
      "labels": ["foundation", "types"],
      "priority": 1,
      "effort": "15min",
      "ears_requirements": [
        {
          "pattern": "ubiquitous",
          "requirement": "WHEN defining Shape types, the system SHALL include features, critical_path, mvp_slice, post_mvp, and validation_moment fields"
        }
      ],
      "contracts": {
        "preconditions": [
          "Module src/intent/phase2_shape/shape_types.gleam exists"
        ],
        "postconditions": [
          "ShapeSection type is defined",
          "MVPSlice type captures shortcuts and deferred work",
          "FeatureShape links to Vision scenarios"
        ],
        "invariants": [
          "critical_path is subset of features",
          "mvp_slice.features is subset of features"
        ]
      },
      "type_definitions": [
        {
          "name": "ShapeSection",
          "fields": [
            {"name": "features", "type": "List(FeatureShape)", "required": true},
            {"name": "critical_path", "type": "List(String)", "required": true},
            {"name": "mvp_slice", "type": "MVPSlice", "required": true},
            {"name": "post_mvp", "type": "List(String)", "required": true},
            {"name": "validation_moment", "type": "String", "required": true}
          ]
        },
        {
          "name": "FeatureShape",
          "fields": [
            {"name": "name", "type": "String", "required": true},
            {"name": "description", "type": "String", "required": true},
            {"name": "critical", "type": "Bool", "required": true}
          ]
        },
        {
          "name": "MVPSlice",
          "fields": [
            {"name": "description", "type": "String", "required": true},
            {"name": "features", "type": "List(String)", "required": true},
            {"name": "shortcuts", "type": "List(String)", "required": true}
          ]
        }
      ],
      "test_cases": {
        "happy_path": [
          {
            "name": "Can construct ShapeSection",
            "code": "ShapeSection(features: [...], critical_path: [...], ...)"
          }
        ],
        "edge_cases": [],
        "error_cases": []
      },
      "input_schema": {},
      "output_schema": {},
      "edge_cases": [
        "Empty post_mvp is valid for minimal scopes",
        "shortcuts can be empty for no-compromise MVP"
      ],
      "boundaries": {
        "will_do": [
          "Define Shape-specific types",
          "Link to Vision through feature names"
        ],
        "will_not_do": [
          "Validate critical_path membership (separate)",
          "Generate beads (different module)"
        ]
      },
      "dependencies": [],
      "blocks": [],
      "ai_context": {
        "implementation_hints": [
          "Keep types aligned with DDD/Shape vocabulary",
          "Use descriptive field names"
        ],
        "pitfalls": [
          "Don't duplicate Vision types, reference them"
        ]
      },
      "spec_source": {
        "session_id": "complete-workflow-example",
        "feature_name": "Phase 2: Shape",
        "behavior_name": "Type Definitions"
      }
    },
    {
      "id": "PLAN-003",
      "title": "Define Ready Section Types",
      "description": "Create Gleam types for Ready phase (ReadyReport, DimensionScore, Blocker)",
      "profile_type": "cli",
      "issue_type": "task",
      "labels": ["foundation", "types"],
      "priority": 1,
      "effort": "15min",
      "ears_requirements": [
        {
          "pattern": "ubiquitous",
          "requirement": "WHEN defining Ready types, the system SHALL include 5 READY dimensions: Replacement, Empathy, Actionable, Discoverable, Yet-complete"
        }
      ],
      "contracts": {
        "preconditions": [
          "Module src/intent/phase4_ready/ready_types.gleam exists"
        ],
        "postconditions": [
          "ReadyReport type has all 5 dimensions",
          "DimensionScore includes score and evidence",
          "Blocker type captures severity and mitigation"
        ],
        "invariants": [
          "Scores are 0-100",
          "overall_readiness is average of 5 dimensions"
        ]
      },
      "type_definitions": [
        {
          "name": "ReadyReport",
          "fields": [
            {"name": "replacement", "type": "DimensionScore", "required": true},
            {"name": "empathy", "type": "DimensionScore", "required": true},
            {"name": "actionable", "type": "DimensionScore", "required": true},
            {"name": "discoverable", "type": "DimensionScore", "required": true},
            {"name": "yet_complete", "type": "DimensionScore", "required": true},
            {"name": "overall_readiness", "type": "Int", "required": true},
            {"name": "blockers", "type": "List(Blocker)", "required": true},
            {"name": "recommendations", "type": "List(Recommendation)", "required": true}
          ]
        },
        {
          "name": "DimensionScore",
          "fields": [
            {"name": "score", "type": "Int", "required": true},
            {"name": "evidence", "type": "List(String)", "required": true},
            {"name": "gaps", "type": "List(String)", "required": true}
          ]
        },
        {
          "name": "Blocker",
          "fields": [
            {"name": "severity", "type": "Severity", "required": true},
            {"name": "description", "type": "String", "required": true},
            {"name": "mitigation", "type": "Option(String)", "required": true}
          ]
        }
      ],
      "test_cases": {
        "happy_path": [
          {
            "name": "Can construct ReadyReport",
            "code": "ReadyReport(replacement: ..., empathy: ..., ...)"
          }
        ],
        "edge_cases": [],
        "error_cases": []
      },
      "input_schema": {},
      "output_schema": {},
      "edge_cases": [
        "All dimension scores 100 yields overall_readiness 100",
        "Empty blockers list for fully ready specs"
      ],
      "boundaries": {
        "will_do": [
          "Define READY scoring types",
          "Capture blocker metadata"
        ],
        "will_not_do": [
          "Calculate scores (separate analyzer)",
          "Persist to storage (separate module)"
        ]
      },
      "dependencies": [],
      "blocks": [],
      "ai_context": {
        "implementation_hints": [
          "Use custom Severity type (Critical|High|Medium|Low)",
          "Keep score calculation logic separate"
        ],
        "pitfalls": [
          "Don't hardcode readiness thresholds in types"
        ]
      },
      "spec_source": {
        "session_id": "complete-workflow-example",
        "feature_name": "Phase 4: Ready",
        "behavior_name": "Type Definitions"
      }
    },
    {
      "id": "PLAN-004",
      "title": "Implement Vision Questions Module",
      "description": "Interactive questioning for Vision phase (8 core questions)",
      "profile_type": "cli",
      "issue_type": "feature",
      "labels": ["interview", "vision"],
      "priority": 2,
      "effort": "30min",
      "ears_requirements": [
        {
          "pattern": "ubiquitous",
          "requirement": "WHEN conducting Vision interview, the system SHALL ask all 8 core questions in sequence"
        },
        {
          "pattern": "state",
          "requirement": "WHILE collecting answers, the system SHALL maintain session state"
        }
      ],
      "contracts": {
        "preconditions": [
          "VisionSection types defined",
          "Session storage available"
        ],
        "postconditions": [
          "All 8 questions answered",
          "VisionSection constructed from answers",
          "Session saved to storage"
        ],
        "invariants": [
          "Question order is deterministic",
          "No question is skipped"
        ]
      },
      "type_definitions": [
        {
          "name": "VisionQuestion",
          "fields": [
            {"name": "id", "type": "String", "required": true},
            {"name": "prompt", "type": "String", "required": true},
            {"name": "field_name", "type": "String", "required": true}
          ]
        }
      ],
      "test_cases": {
        "happy_path": [
          {
            "name": "Returns all 8 questions in order",
            "expected": "List of 8 VisionQuestion"
          }
        ],
        "edge_cases": [
          {
            "name": "Handles multi-line answers",
            "input": "Answer with\nmultiple\nlines"
          }
        ],
        "error_cases": [
          {
            "name": "Empty answer returns error",
            "input": "",
            "expected": "Error(EmptyAnswer)"
          }
        ]
      },
      "input_schema": {
        "questions": [
          "What problem are we solving?",
          "Who specifically needs this?",
          "Who is this NOT for?",
          "What do they currently use?",
          "What would make them switch?",
          "What is their ideal journey?",
          "What scenarios demonstrate this?",
          "What is explicitly out of scope?"
        ]
      },
      "output_schema": {
        "type": "VisionSection"
      },
      "edge_cases": [
        "Replaces can be 'nothing' for greenfield",
        "Scenarios require at least 2 examples"
      ],
      "boundaries": {
        "will_do": [
          "Ask questions in sequence",
          "Validate answers",
          "Build VisionSection"
        ],
        "will_not_do": [
          "Critique answers (separate module)",
          "Generate beads (different phase)",
          "Run AI analysis (separate step)"
        ]
      },
      "dependencies": [
        "PLAN-001"
      ],
      "blocks": [],
      "ai_context": {
        "implementation_hints": [
          "Use interview pattern from existing code",
          "Store raw answers before parsing"
        ],
        "pitfalls": [
          "Don't mix questioning and critique logic"
        ]
      },
      "spec_source": {
        "session_id": "complete-workflow-example",
        "feature_name": "Phase 1: Vision",
        "behavior_name": "Interactive Questions"
      }
    },
    {
      "id": "PLAN-005",
      "title": "Implement Vision Critique (Skeptical PM)",
      "description": "AI critique of Vision answers from Skeptical PM perspective",
      "profile_type": "cli",
      "issue_type": "feature",
      "labels": ["critique", "vision", "ai"],
      "priority": 2,
      "effort": "30min",
      "ears_requirements": [
        {
          "pattern": "ubiquitous",
          "requirement": "WHEN critiquing Vision, the system SHALL evaluate from Skeptical PM perspective"
        },
        {
          "pattern": "unwanted",
          "requirement": "IF the VORP is not 10x better, the system SHALL flag it as insufficient"
        }
      ],
      "contracts": {
        "preconditions": [
          "VisionSection is complete",
          "All 8 questions answered"
        ],
        "postconditions": [
          "Critique report generated",
          "Flags for weak areas identified",
          "Recommendations provided"
        ],
        "invariants": [
          "Critique is reproducible for same input",
          "Severity levels: Critical|High|Medium|Low"
        ]
      },
      "type_definitions": [
        {
          "name": "VisionCritique",
          "fields": [
            {"name": "flags", "type": "List(CritiqueFlag)", "required": true},
            {"name": "recommendations", "type": "List(String)", "required": true},
            {"name": "gate_status", "type": "GateStatus", "required": true}
          ]
        },
        {
          "name": "CritiqueFlag",
          "fields": [
            {"name": "severity", "type": "Severity", "required": true},
            {"name": "category", "type": "String", "required": true},
            {"name": "message", "type": "String", "required": true}
          ]
        }
      ],
      "test_cases": {
        "happy_path": [
          {
            "name": "Strong Vision passes gate",
            "input": "VisionSection with clear persona, 10x VORP",
            "expected": "GateStatus.Pass"
          }
        ],
        "edge_cases": [
          {
            "name": "Weak VORP flags Critical",
            "input": "VORP of only 2x improvement",
            "expected": "CritiqueFlag with Critical severity"
          }
        ],
        "error_cases": []
      },
      "input_schema": {
        "vision": "VisionSection"
      },
      "output_schema": {
        "type": "VisionCritique"
      },
      "edge_cases": [
        "Assumed persona (not validated) flags High severity",
        "Vague problem statement flags Medium severity"
      ],
      "boundaries": {
        "will_do": [
          "Evaluate VORP magnitude",
          "Check persona specificity",
          "Validate problem-solution fit"
        ],
        "will_not_do": [
          "Rewrite Vision (human's job)",
          "Auto-fix weak areas",
          "Skip gates (must address flags)"
        ]
      },
      "dependencies": [
        "PLAN-001",
        "PLAN-004"
      ],
      "blocks": [],
      "ai_context": {
        "implementation_hints": [
          "Use pattern matching for flag severity",
          "Provide actionable recommendations"
        ],
        "pitfalls": [
          "Don't be too lenient on VORP (must be 10x)"
        ]
      },
      "spec_source": {
        "session_id": "complete-workflow-example",
        "feature_name": "Phase 1: Vision",
        "behavior_name": "Critique (Skeptical PM)"
      }
    },
    {
      "id": "PLAN-006",
      "title": "Implement Shape Critique (Pragmatic Tech Lead)",
      "description": "AI critique of Shape answers from Pragmatic Tech Lead perspective",
      "profile_type": "cli",
      "issue_type": "feature",
      "labels": ["critique", "shape", "ai"],
      "priority": 2,
      "effort": "30min",
      "ears_requirements": [
        {
          "pattern": "ubiquitous",
          "requirement": "WHEN critiquing Shape, the system SHALL challenge scope: 'Can we cut more?'"
        },
        {
          "pattern": "unwanted",
          "requirement": "IF the MVP cannot validate the concept, the system SHALL flag it"
        }
      ],
      "contracts": {
        "preconditions": [
          "ShapeSection is complete",
          "MVP slice defined"
        ],
        "postconditions": [
          "Critique identifies cuttable features",
          "Validates MVP achievability",
          "Gate pass/fail determined"
        ],
        "invariants": [
          "Critical path is necessary subset",
          "MVP must validate north star"
        ]
      },
      "type_definitions": [
        {
          "name": "ShapeCritique",
          "fields": [
            {"name": "cuttable_features", "type": "List(String)", "required": true},
            {"name": "validation_risk", "type": "RiskLevel", "required": true},
            {"name": "achievability_score", "type": "Int", "required": true},
            {"name": "gate_status", "type": "GateStatus", "required": true}
          ]
        }
      ],
      "test_cases": {
        "happy_path": [
          {
            "name": "Minimal MVP passes",
            "input": "ShapeSection with tight scope",
            "expected": "GateStatus.Pass"
          }
        ],
        "edge_cases": [
          {
            "name": "Bloated MVP fails",
            "input": "ShapeSection with 20 features in MVP",
            "expected": "GateStatus.Fail + cuttable_features"
          }
        ],
        "error_cases": []
      },
      "input_schema": {
        "shape": "ShapeSection",
        "vision": "VisionSection"
      },
      "output_schema": {
        "type": "ShapeCritique"
      },
      "edge_cases": [
        "MVP that doesn't reach validation_moment fails",
        "Features in critical_path but not MVP are questioned"
      ],
      "boundaries": {
        "will_do": [
          "Challenge scope",
          "Validate MVP-to-north-star path",
          "Identify shortcuts"
        ],
        "will_not_do": [
          "Dictate implementation (that's SPEC phase)",
          "Override human judgment (advise only)",
          "Skip gate (address all flags)"
        ]
      },
      "dependencies": [
        "PLAN-002",
        "PLAN-004"
      ],
      "blocks": [],
      "ai_context": {
        "implementation_hints": [
          "Compare features to validation_moment necessity",
          "Flag gold-plating"
        ],
        "pitfalls": [
          "Don't confuse critical path with MVP (MVP may be smaller)"
        ]
      },
      "spec_source": {
        "session_id": "complete-workflow-example",
        "feature_name": "Phase 2: Shape",
        "behavior_name": "Critique (Pragmatic Tech Lead)"
      }
    },
    {
      "id": "PLAN-007",
      "title": "Integrate KIRK Analyzers with Spec Phase",
      "description": "Wire existing KIRK modules (quality, coverage, gaps, inversion, effects) into Spec interview flow",
      "profile_type": "cli",
      "issue_type": "integration",
      "labels": ["kirk", "spec", "integration"],
      "priority": 3,
      "effort": "30min",
      "ears_requirements": [
        {
          "pattern": "ubiquitous",
          "requirement": "WHEN running Spec phase, the system SHALL execute all 5 KIRK analyzers"
        },
        {
          "pattern": "state",
          "requirement": "WHILE iterating rounds, the system SHALL track Round Completion Score (RCS)"
        }
      ],
      "contracts": {
        "preconditions": [
          "KIRK modules exist and pass tests",
          "Spec interview session active"
        ],
        "postconditions": [
          "All 5 rounds complete with RCS gates",
          "SpecSection populated with KIRK outputs",
          "Round results stored"
        ],
        "invariants": [
          "RCS₁-₄ must be 100%",
          "RCS₅ must be ≥80%",
          "Rounds execute in sequence"
        ]
      },
      "type_definitions": [
        {
          "name": "SpecRound",
          "fields": [
            {"name": "number", "type": "Int", "required": true},
            {"name": "model", "type": "String", "required": true},
            {"name": "analyzer", "type": "String", "required": true},
            {"name": "rcs", "type": "Float", "required": true},
            {"name": "outputs", "type": "Dynamic", "required": true}
          ]
        }
      ],
      "test_cases": {
        "happy_path": [
          {
            "name": "All rounds complete successfully",
            "expected": "5 SpecRound with passing RCS"
          }
        ],
        "edge_cases": [
          {
            "name": "Round 5 with 79% RCS fails gate",
            "expected": "GateStatus.Fail"
          }
        ],
        "error_cases": [
          {
            "name": "KIRK analyzer error bubbles up",
            "expected": "Error with details"
          }
        ]
      },
      "input_schema": {
        "spec": "Partial spec from interview"
      },
      "output_schema": {
        "type": "List(SpecRound)"
      },
      "edge_cases": [
        "Pre-existing KIRK results can skip re-analysis",
        "Failed round requires re-run, not skip"
      ],
      "boundaries": {
        "will_do": [
          "Orchestrate 5-round execution",
          "Aggregate KIRK outputs",
          "Enforce RCS gates"
        ],
        "will_not_do": [
          "Modify KIRK logic (use as-is)",
          "Auto-fix failed rounds (human intervention)",
          "Run rounds in parallel (sequential only)"
        ]
      },
      "dependencies": [
        "PLAN-001",
        "PLAN-002",
        "PLAN-004"
      ],
      "blocks": [],
      "ai_context": {
        "implementation_hints": [
          "Use existing KIRK modules, don't rewrite",
          "Pipeline: interview → KIRK → critique"
        ],
        "pitfalls": [
          "Don't skip RCS validation",
          "Ensure round order is preserved"
        ]
      },
      "spec_source": {
        "session_id": "complete-workflow-example",
        "feature_name": "Phase 3: Spec",
        "behavior_name": "KIRK Integration"
      }
    },
    {
      "id": "PLAN-008",
      "title": "Implement READY Checker (5 Dimensions)",
      "description": "Calculate READY scores: Replacement, Empathy, Actionable, Discoverable, Yet-complete",
      "profile_type": "cli",
      "issue_type": "feature",
      "labels": ["ready", "scoring"],
      "priority": 3,
      "effort": "30min",
      "ears_requirements": [
        {
          "pattern": "ubiquitous",
          "requirement": "WHEN computing READY score, the system SHALL evaluate all 5 dimensions independently"
        }
      ],
      "contracts": {
        "preconditions": [
          "Complete Plan (Vision + Shape + Spec + Ready sections)",
          "All phases passed their gates"
        ],
        "postconditions": [
          "ReadyReport with 5 dimension scores",
          "overall_readiness calculated as average",
          "Blockers listed by severity"
        ],
        "invariants": [
          "Each dimension score 0-100",
          "Overall is mean of 5 dimensions"
        ]
      },
      "type_definitions": [],
      "test_cases": {
        "happy_path": [
          {
            "name": "All dimensions 90+ yields ≥90 overall",
            "expected": "ReadyReport with overall_readiness ≥90"
          }
        ],
        "edge_cases": [
          {
            "name": "One dimension at 0 drags overall down",
            "input": "Scores: [100, 100, 100, 100, 0]",
            "expected": "overall_readiness = 80"
          }
        ],
        "error_cases": []
      },
      "input_schema": {
        "plan": "CompletePlan (all 4 phases)"
      },
      "output_schema": {
        "type": "ReadyReport"
      },
      "edge_cases": [
        "Missing vision reference lowers Replacement score",
        "No error handling guidance lowers Actionable score"
      ],
      "boundaries": {
        "will_do": [
          "Score each dimension with evidence",
          "List blockers with mitigation",
          "Classify readiness (≥90: Launch, ≥80: Prod with caution, ≥70: Beta, <70: Rework)"
        ],
        "will_not_do": [
          "Auto-fix low scores (recommendations only)",
          "Override human judgment",
          "Skip dimension scoring"
        ]
      },
      "dependencies": [
        "PLAN-003",
        "PLAN-007"
      ],
      "blocks": [],
      "ai_context": {
        "implementation_hints": [
          "Use KIRK outputs for evidence",
          "Check Vision alignment for Replacement"
        ],
        "pitfalls": [
          "Don't conflate dimensions (evaluate independently)"
        ]
      },
      "spec_source": {
        "session_id": "complete-workflow-example",
        "feature_name": "Phase 4: Ready",
        "behavior_name": "READY Scoring"
      }
    },
    {
      "id": "PLAN-009",
      "title": "Implement Vision Alignment Checker",
      "description": "Compare Phase 4 spec to Phase 1 vision, detect drift",
      "profile_type": "cli",
      "issue_type": "feature",
      "labels": ["ready", "alignment"],
      "priority": 3,
      "effort": "20min",
      "ears_requirements": [
        {
          "pattern": "ubiquitous",
          "requirement": "WHEN checking alignment, the system SHALL compare final spec to original Vision"
        },
        {
          "pattern": "unwanted",
          "requirement": "IF the spec drifted from persona or north_star, the system SHALL flag it"
        }
      ],
      "contracts": {
        "preconditions": [
          "VisionSection from Phase 1 exists",
          "Complete spec from Phase 3 exists"
        ],
        "postconditions": [
          "Alignment report with drift analysis",
          "Recommendations for realignment",
          "Gate pass/fail"
        ],
        "invariants": [
          "Drift is measured across persona, north_star, VORP"
        ]
      },
      "type_definitions": [
        {
          "name": "AlignmentReport",
          "fields": [
            {"name": "persona_drift", "type": "Bool", "required": true},
            {"name": "north_star_drift", "type": "Bool", "required": true},
            {"name": "vorp_drift", "type": "Bool", "required": true},
            {"name": "scope_creep", "type": "List(String)", "required": true},
            {"name": "scope_reduction", "type": "List(String)", "required": true}
          ]
        }
      ],
      "test_cases": {
        "happy_path": [
          {
            "name": "Perfect alignment passes",
            "expected": "All drift flags false"
          }
        ],
        "edge_cases": [
          {
            "name": "Scope creep detected",
            "input": "Features beyond out_of_scope",
            "expected": "scope_creep list populated"
          }
        ],
        "error_cases": []
      },
      "input_schema": {
        "vision": "VisionSection",
        "spec": "SpecSection"
      },
      "output_schema": {
        "type": "AlignmentReport"
      },
      "edge_cases": [
        "Justified drift (documented) is acceptable",
        "Undocumented drift fails gate"
      ],
      "boundaries": {
        "will_do": [
          "Detect persona shift",
          "Flag north_star deviation",
          "Identify scope changes"
        ],
        "will_not_do": [
          "Auto-correct drift (human decision)",
          "Ignore documented drift (flag it anyway for review)"
        ]
      },
      "dependencies": [
        "PLAN-001",
        "PLAN-007",
        "PLAN-008"
      ],
      "blocks": [],
      "ai_context": {
        "implementation_hints": [
          "Use semantic comparison, not exact string match",
          "Reference out_of_scope for creep detection"
        ],
        "pitfalls": [
          "Don't reject all drift (some is justifiable evolution)"
        ]
      },
      "spec_source": {
        "session_id": "complete-workflow-example",
        "feature_name": "Phase 4: Ready",
        "behavior_name": "Vision Alignment"
      }
    },
    {
      "id": "PLAN-010",
      "title": "Generate Enhanced Beads from Complete Plan",
      "description": "Convert CompletePlan (Vision+Shape+Spec+Ready) into enhanced beads with full context",
      "profile_type": "cli",
      "issue_type": "feature",
      "labels": ["beads", "generation"],
      "priority": 4,
      "effort": "30min",
      "ears_requirements": [
        {
          "pattern": "ubiquitous",
          "requirement": "WHEN generating beads, the system SHALL include EARS, Contracts, Types, Tests, and Boundaries"
        },
        {
          "pattern": "state",
          "requirement": "WHILE generating, the system SHALL maintain dependency graph"
        }
      ],
      "contracts": {
        "preconditions": [
          "CompletePlan exists with all 4 phases",
          "READY score ≥80 (launch-ready threshold)"
        ],
        "postconditions": [
          "List of EnhancedBeadRecord generated",
          "Dependencies extracted from Spec requires[]",
          "Waves computed from topological sort"
        ],
        "invariants": [
          "No cyclic dependencies",
          "All beads have unique IDs"
        ]
      },
      "type_definitions": [],
      "test_cases": {
        "happy_path": [
          {
            "name": "Plan with 5 features generates 15+ beads",
            "expected": "List of beads with design, implement, test"
          }
        ],
        "edge_cases": [
          {
            "name": "Feature with no dependencies is Wave 1",
            "expected": "Bead in first wave"
          }
        ],
        "error_cases": [
          {
            "name": "Cyclic dependency returns error",
            "expected": "Error(CyclicDependency)"
          }
        ]
      },
      "input_schema": {
        "plan": "CompletePlan"
      },
      "output_schema": {
        "type": "List(EnhancedBeadRecord)",
        "waves": "List(Wave)"
      },
      "edge_cases": [
        "Large plans (50+ beads) compute efficiently",
        "Single-feature plan generates minimal beads"
      ],
      "boundaries": {
        "will_do": [
          "Generate design/implement/test beads per feature",
          "Extract EARS from Spec behaviors",
          "Build dependency graph"
        ],
        "will_not_do": [
          "Execute beads (separate tool)",
          "Modify plan (read-only)",
          "Generate prompts (separate command)"
        ]
      },
      "dependencies": [
        "PLAN-008",
        "PLAN-009"
      ],
      "blocks": [],
      "ai_context": {
        "implementation_hints": [
          "Reuse existing bead_templates logic",
          "Use Kahn's algorithm for topological sort"
        ],
        "pitfalls": [
          "Don't skip zero-dependency beads (they're Wave 1)",
          "Ensure effort estimates are realistic (5-30min)"
        ]
      },
      "spec_source": {
        "session_id": "complete-workflow-example",
        "feature_name": "Phase 4: Ready",
        "behavior_name": "Enhanced Bead Generation"
      }
    }
  ],
  "total_beads": 10,
  "estimated_time_minutes": 215
}
