{"id":"src-00z","title":"Implement binary detector","description":"Detect grit, turbolift, gh binaries at runtime. File: internal/platform/binaries/detector.go","status":"closed","priority":1,"issue_type":"task","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T05:01:14.246874162Z","created_by":"Lewis Prior","updated_at":"2026-01-30T05:04:39.925672531Z","closed_at":"2026-01-30T05:04:39.925672531Z","close_reason":"CommandExecutor and binary detector implemented","source_repo":".","compaction_level":0}
{"id":"src-10w","title":"ui-timeline: Implement manual control buttons (cancel/retry/logs)","description":"Build control buttons: Cancel (red, confirm dialog), Retry (yellow, failed beads only), View Logs (blue, opens modal). Send API requests on click, show loading state, handle errors. Files: crates/oya-ui/src/components/timeline/controls.rs. Tests: buttons render, API calls work, confirm dialogs shown, errors handled. Effort: 1hr. Parent: src-30m","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:02:22.272485403Z","created_by":"lewis","updated_at":"2026-02-01T14:02:22.272485403Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-126","title":"ui-ws-integration: Connect WebSocket client to server","description":"Connect gloo-net WebSocket client to ws://localhost:8080/api/ws on app initialization. Handle connection states (connecting, connected, disconnected). Log connection events. Files: crates/oya-ui/src/state/websocket.rs. Tests: connection established, state tracked, errors logged. Effort: 45min. Parent: src-17r","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:02:00.459717768Z","created_by":"lewis","updated_at":"2026-02-01T14:02:00.459717768Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-143","title":"ui-dag: Implement node selection and dependency highlighting","description":"Implement click to select node, highlight selected node with border, highlight all dependencies (parents + children) in different color. Click outside to deselect. Files: crates/oya-ui/src/components/dag_viz/selection.rs. Tests: selection works, dependencies highlight, deselect works. Effort: 1hr. Parent: src-1o6","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-01T14:01:42.859621465Z","created_by":"lewis","updated_at":"2026-02-01T14:01:42.859621465Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-17r","title":"ui: Integrate WebSocket for real-time bead status updates","description":"Connect Leptos frontend to WebSocket server. Subscribe to bincode event stream, deserialize BeadEvent updates, reactively update DAG visualization with <50ms latency using Leptos signals.\n\n# Architecture\n- gloo-net WebSocket client for WASM\n- bincode deserialization of BeadEvent messages\n- Leptos signals for reactive state updates\n- Automatic reconnection on disconnect\n- Event queue for missed messages during reconnect\n\n# Event Types Handled\n- BeadCreated: Add new node to DAG\n- BeadScheduled: Update node to yellow (scheduled)\n- BeadStarted: Update node to blue (running)\n- BeadCompleted: Update node to green (completed)\n- BeadFailed: Update node to red (failed)\n- BeadCancelled: Update node to orange (cancelled)\n\n# Success Criteria\n- WebSocket connects to ws://localhost:8080/api/ws\n- bincode deserialization works for all event types\n- DAG updates reactively on events (<50ms latency)\n- Automatic reconnection on disconnect (<5s)\n- Event queue buffers during reconnect\n- Error handling for malformed messages\n\n# Dependencies\n- Bead src-2yy: WebSocket server\n- Bead src-1o6: DAG visualization component\n\n# Files\n- crates/oya-ui/src/websocket.rs - WebSocket client wrapper\n- crates/oya-ui/src/events.rs - Event type definitions\n- crates/oya-ui/src/state/dag_state.rs - Reactive DAG state\n- crates/oya-ui/tests/websocket_test.rs - Integration tests\n\n# Implementation Notes\n- Use Leptos create_signal for reactive state\n- Implement exponential backoff for reconnection\n- Monitor latency in production (instrument with timestamps)\n\nEffort: 2hr\nBead ID: intent-cli-20260201020059-4eih0cdy\nCUE Schema: .beads/schemas/intent-cli-20260201020059-4eih0cdy.cue","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T13:59:16.819466239Z","created_by":"lewis","updated_at":"2026-02-01T13:59:16.819466239Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-17z","title":"backend: Implement axum REST API with tower middleware","description":"Implement axum HTTP server with 4 REST endpoints (create workflow, query status, cancel, health check) and tower middleware (CORS, tracing, compression). Provides backend API for Tauri frontend.\n\n# Architecture\n- axum 0.7 web framework\n- tower 0.5 middleware (CORS, tracing, compression)\n- 4 REST endpoints: POST /api/workflows, GET /api/beads/:id, POST /api/beads/:id/cancel, GET /api/health\n- Integration with SchedulerActor and StateManagerActor\n\n# Success Criteria\n- REST API listening on :8080\n- All 4 endpoints working\n- CORS configured for Tauri origin\n- Tower middleware active (compression, tracing)\n- Error responses follow RFC 7807 Problem Details\n- All handlers return Result<Json<T>, Error>\n\n# Dependencies\n- Stream B: SchedulerActor for bead creation\n- Stream A: StateManagerActor for status queries\n\n# Files\n- crates/oya-web/src/lib.rs - axum server setup\n- crates/oya-web/src/routes.rs - REST API routes\n- crates/oya-web/Cargo.toml - Backend dependencies\n- crates/oya-web/tests/rest_api_test.rs - Integration tests\n\nEffort: 4hr\nBead ID: intent-cli-20260201020059-ttfabixq\nCUE Schema: .beads/schemas/intent-cli-20260201020059-ttfabixq.cue","status":"in_progress","priority":1,"issue_type":"feature","created_at":"2026-02-01T13:53:55.343021608Z","created_by":"lewis","updated_at":"2026-02-01T13:59:27.943800886Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-1bm","title":"ui-ws-integration: WebSocket integration tests with latency measurement","description":"Integration tests: connect WS client, send events from mock server, verify DAG updates, measure end-to-end latency (server event → UI update). Target <50ms p99. Test reconnection. Files: crates/oya-ui/tests/websocket_integration_test.rs. Effort: 1hr. Parent: src-17r","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-01T14:02:01.410356230Z","created_by":"lewis","updated_at":"2026-02-01T14:02:01.410356230Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-1ev","title":"backend-axum: Integration tests for all REST endpoints","description":"Comprehensive integration test suite for REST API. Happy paths: POST /api/workflows with valid payload, GET /api/beads/:id for existing bead, POST cancel for running bead, GET /api/health when healthy. Error paths: 404 for missing bead, 400 for invalid JSON, 409 for cancel completed, 503 when actors down. Concurrency: 10 simultaneous requests. Files: crates/oya-web/tests/rest_api_test.rs. Use reqwest for HTTP client, tokio-test for async. Effort: 1hr. Parent: src-17z","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-01T14:00:35.434886192Z","created_by":"lewis","updated_at":"2026-02-01T14:00:35.434886192Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-1j8","title":"ui-ws-integration: Implement automatic reconnection with exponential backoff","description":"On WebSocket disconnect, automatically reconnect with exponential backoff: 1s, 2s, 4s, 8s, max 30s. Show reconnecting indicator in UI. Restore event stream on reconnect. Files: crates/oya-ui/src/websocket/reconnect.rs. Tests: reconnect works, backoff correct, UI shows status. Effort: 1hr. Parent: src-17r","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:02:01.168121789Z","created_by":"lewis","updated_at":"2026-02-01T14:02:01.168121789Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-1l1","title":"Migration complete: bd → br for beads_rust","status":"open","priority":4,"issue_type":"feature","created_at":"2026-02-01T06:13:22.831955609Z","created_by":"lewis","updated_at":"2026-02-01T06:13:22.831955609Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-1n3","title":"backend-ws: Implement bincode serialization for BeadEvent messages","description":"Define BeadEvent enum (Created, Scheduled, Started, Completed, Failed, Cancelled) with serde derives. Implement bincode serialization/deserialization. Benchmark serialization overhead (<1ms target). Files: crates/oya-web/src/websocket/events.rs. Tests: serialize/deserialize all event types, benchmark perf. Effort: 1hr. Parent: src-2yy","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:00:53.364613983Z","created_by":"lewis","updated_at":"2026-02-01T14:00:53.364613983Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-1n4","title":"ui-dag: Setup Canvas2D rendering with web-sys","description":"Setup HTML5 Canvas with web-sys Canvas2dContext. Implement canvas initialization, resize handling, clear/redraw loop with RequestAnimationFrame. Handle retina displays (devicePixelRatio). Files: crates/oya-ui/src/components/dag_viz/canvas.rs. Tests: canvas initializes, resize works, RAF loop runs at 60fps. Effort: 1hr. Parent: src-1o6","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:01:41.688966136Z","created_by":"lewis","updated_at":"2026-02-01T14:01:41.688966136Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-1o6","title":"ui: Implement DAG visualization with Leptos components","description":"Build interactive DAG visualization using Leptos components and Canvas API. Renders bead nodes with state colors, dependency edges, pan/zoom controls. Force-directed layout for 50+ node graphs.\n\n# Architecture\n- Leptos reactive components for DAG rendering\n- Canvas API for high-performance graph drawing\n- Force-directed layout algorithm (D3-force style)\n- State-based node rendering with color coding\n- Interactive pan/zoom with mouse/touch events\n\n# Node Color States\n- Pending: gray (#6B7280)\n- Scheduled: yellow (#FCD34D)\n- Running: blue (#3B82F6)\n- Completed: green (#10B981)\n- Failed: red (#EF4444)\n- Cancelled: orange (#F97316)\n\n# Success Criteria\n- DAG renders 50+ nodes smoothly (60fps)\n- Force-directed layout converges in <2s\n- Node colors update reactively\n- Dependency edges render with arrows\n- Pan/zoom controls responsive\n- Node selection highlights dependencies\n\n# Dependencies\n- Bead src-3s0: Tauri scaffold + Leptos app\n\n# Files\n- crates/oya-ui/src/components/dag_viz.rs - Main DAG component\n- crates/oya-ui/src/components/dag_node.rs - Node rendering\n- crates/oya-ui/src/components/dag_edge.rs - Edge rendering\n- crates/oya-ui/src/layout/force_directed.rs - Layout algorithm\n- crates/oya-ui/tests/dag_viz_test.rs - Component tests\n\n# Implementation Notes\n- Use web-sys Canvas2dContext for rendering\n- Implement RequestAnimationFrame for smooth updates\n- Cache layout calculations for performance\n- Viewport culling for large graphs (only render visible nodes)\n\nEffort: 4hr\nBead ID: intent-cli-20260201020059-xrlsf0mp\nCUE Schema: .beads/schemas/intent-cli-20260201020059-xrlsf0mp.cue","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T13:59:01.054749097Z","created_by":"lewis","updated_at":"2026-02-01T13:59:01.054749097Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-1o6.1","title":"controls-tests: Interaction tests for DAG pan/zoom controls","description":"Write comprehensive tests for DAG pan/zoom control interactions.\n\n# Scope\n- Unit tests for mouse/touch event handlers\n- Integration tests for pan/zoom transforms\n- Bounds checking validation\n- Event state management tests\n\n# Files\n- crates/oya-ui/tests/controls_mouse_test.rs - Mouse event tests\n- crates/oya-ui/tests/controls_pan_test.rs - Pan behavior tests\n- crates/oya-ui/tests/controls_zoom_test.rs - Zoom behavior tests\n- crates/oya-ui/tests/controls_touch_test.rs - Touch gesture tests\n- crates/oya-ui/tests/controls_bounds_test.rs - Bounds validation tests\n\n# Success Criteria\n- 95%+ code coverage for control modules\n- Pan/zoom edge cases validated\n- Event race conditions tested\n- Touch gesture accuracy verified\n\n# Dependencies\n- controls-mouse: Mouse events\n- controls-pan: Pan logic\n- controls-zoom: Zoom logic\n- controls-touch: Touch gestures\n- controls-bounds: Bounds constraints\n\n# Implementation Notes\n- Mock DOM events with web-sys test helpers\n- Test transform matrix calculations\n- Verify signal updates with Leptos testing utils\n- Check bounds edge cases (min/max zoom, graph edges)","status":"open","priority":1,"issue_type":"test","estimated_minutes":30,"created_at":"2026-02-01T14:25:17.791401152Z","created_by":"lewis","updated_at":"2026-02-01T14:25:17.791401152Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.1","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:25:17.791401152Z","created_by":"lewis"}]}
{"id":"src-1o6.10","title":"layout: Simulation loop with velocity Verlet integration","description":"Implement main simulation loop using velocity Verlet integration. Manages force composition, timestep iteration, and alpha decay for gradual convergence. Runs until alpha threshold or max iterations.\n\n# Architecture\n- Simulation struct with nodes, edges, forces, alpha state\n- Velocity Verlet integration for stable physics\n- Alpha decay: alpha *= decay_rate each step (0.99 typical)\n- Tick function: apply forces, integrate, update alpha\n- Iterator interface for step-by-step control\n\n# Implementation Details\n- Verlet integration: position += velocity * dt + 0.5 * acceleration * dt²\n- Alpha: simulation 'heat' parameter, 1.0 at start, decays to min\n- Alpha decay: 0.99 (1% decay per tick)\n- Alpha min: 0.001 (stop when alpha < min)\n- Force composition: sum all forces, then integrate once\n- Timestep dt: 1.0 (simplifies math, stable for typical forces)\n\n# Success Criteria\n- Simulation converges within 300 iterations for 50-node graph\n- Alpha decays smoothly from 1.0 to 0.001\n- Verlet integration maintains energy conservation (no drift)\n- Iterator interface allows pausing/resuming simulation\n- Zero unwraps, zero panics, functional error handling\n\n# Files\n- crates/oya-ui/src/layout/simulation.rs - Main loop + integration\n- crates/oya-ui/tests/simulation_test.rs - Integration tests","status":"open","priority":2,"issue_type":"feature","owner":"lewis","estimated_minutes":25,"created_at":"2026-02-01T14:25:46.457581845Z","created_by":"lewis","updated_at":"2026-02-01T14:25:46.457581845Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.10","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:25:46.457581845Z","created_by":"lewis"}]}
{"id":"src-1o6.11","title":"canvas-coords: Coordinate transformation","description":"Implement pan/zoom coordinate transformation system\n\n# Scope\nTransform between screen coordinates (mouse events) and world coordinates (DAG nodes). Handle pan/zoom state and matrix transformations.\n\n# Architecture\n- Pan offset (x, y) in world space\n- Zoom scale (0.1 to 5.0 range)\n- Screen-to-world coordinate conversion\n- World-to-screen coordinate conversion\n- Mouse wheel zoom (ctrl+wheel)\n- Mouse drag pan (click+drag)\n\n# Success Criteria\n- Pan state stored in RwSignal<(f64, f64)>\n- Zoom state stored in RwSignal<f64> (default 1.0)\n- screen_to_world() transforms mouse coords correctly\n- world_to_screen() transforms node coords correctly\n- Mouse wheel zoom works (smooth, centered on cursor)\n- Click+drag pan works (smooth, no jitter)\n- No unwraps or panics (Result<T, E> all the way)\n- Zoom clamped to [0.1, 5.0] range\n\n# Dependencies\n- Bead canvas-init (requires canvas element)\n- Bead canvas-context (requires context for transforms)\n\n# Files\n- crates/oya-ui/src/components/canvas/coords.rs\n- crates/oya-ui/src/components/dag_viz.rs (integration)\n\n# Implementation Details\nuse leptos::*;\nuse web_sys::{MouseEvent, WheelEvent};\n\nstruct Transform {\n    pan_x: f64,\n    pan_y: f64,\n    zoom: f64,\n}\n\nimpl Transform {\n    fn screen_to_world(&self, screen_x: f64, screen_y: f64) -> (f64, f64) {\n        let world_x = (screen_x / self.zoom) - self.pan_x;\n        let world_y = (screen_y / self.zoom) - self.pan_y;\n        (world_x, world_y)\n    }\n    \n    fn world_to_screen(&self, world_x: f64, world_y: f64) -> (f64, f64) {\n        let screen_x = (world_x + self.pan_x) * self.zoom;\n        let screen_y = (world_y + self.pan_y) * self.zoom;\n        (screen_x, screen_y)\n    }\n    \n    fn apply_zoom(&mut self, delta: f64, center_x: f64, center_y: f64) {\n        let new_zoom = (self.zoom * (1.0 + delta * 0.001)).clamp(0.1, 5.0);\n        \n        // Zoom centered on cursor\n        let world_center = self.screen_to_world(center_x, center_y);\n        self.zoom = new_zoom;\n        let new_screen_center = self.world_to_screen(world_center.0, world_center.1);\n        \n        self.pan_x += (center_x - new_screen_center.0) / self.zoom;\n        self.pan_y += (center_y - new_screen_center.1) / self.zoom;\n    }\n}\n\nEffort: 20min","status":"open","priority":1,"issue_type":"feature","estimated_minutes":20,"created_at":"2026-02-01T14:25:47.606896269Z","created_by":"lewis","updated_at":"2026-02-01T14:25:47.606896269Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.11","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:25:47.606896269Z","created_by":"lewis"}]}
{"id":"src-1o6.12","title":"layout: Convergence detection with velocity threshold","description":"Implement convergence detection to stop simulation early when layout stabilizes. Monitors node velocity magnitudes and stops when all below threshold. Prevents wasted computation after visual convergence.\n\n# Architecture\n- ConvergenceDetector struct tracking velocity history\n- Velocity threshold: max magnitude across all nodes\n- Rolling window: check last N ticks for stability\n- Early stopping: halt when converged before alpha_min reached\n\n# Implementation Details\n- Velocity threshold: 0.5 pixels/tick (visually imperceptible)\n- Rolling window: 5 ticks (avoid false positives from noise)\n- Max velocity calculation: nodes.iter().map(|n| n.velocity.magnitude()).max()\n- Convergence condition: max_velocity < threshold for 5 consecutive ticks\n- Return convergence reason: AlphaMin | VelocityThreshold | MaxIterations\n\n# Success Criteria\n- Detects convergence 50-100 ticks before alpha_min (saves computation)\n- No false positives on oscillating systems\n- Rolling window smooths out single-tick noise spikes\n- Property test: converged layout has all velocities < threshold\n- Reports which convergence condition triggered\n\n# Files\n- crates/oya-ui/src/layout/convergence.rs - Detection logic\n- crates/oya-ui/tests/convergence_test.rs - Unit tests with oscillation scenarios","status":"open","priority":2,"issue_type":"feature","owner":"lewis","estimated_minutes":20,"created_at":"2026-02-01T14:25:54.494298984Z","created_by":"lewis","updated_at":"2026-02-01T14:25:54.494298984Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.12","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:25:54.494298984Z","created_by":"lewis"}]}
{"id":"src-1o6.13","title":"controls-mouse: Mouse event listeners for DAG pan/zoom","description":"Implement mouse event listeners for DAG visualization pan/zoom controls.\n\n# Scope\n- Attach mousedown/mousemove/mouseup listeners to canvas\n- Track mouse position delta for pan operations\n- Capture wheel events for zoom operations\n- Prevent default browser behaviors (scroll, context menu)\n- Store event state in reactive Leptos signals\n\n# Files\n- crates/oya-ui/src/components/controls/mouse.rs - Mouse event handlers\n\n# Success Criteria\n- Mouse events fire with correct coordinates\n- Event state updates Leptos signals\n- Default behaviors prevented\n- No memory leaks from listeners\n\n# Implementation Notes\n- Use web-sys::MouseEvent for DOM events\n- Convert client coordinates to canvas space\n- Create reactive signals for mouse state\n- Cleanup listeners on component unmount","status":"open","priority":1,"issue_type":"feature","estimated_minutes":15,"created_at":"2026-02-01T14:25:55.704216200Z","created_by":"lewis","updated_at":"2026-02-01T14:25:55.704216200Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.13","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:25:55.704216200Z","created_by":"lewis"}]}
{"id":"src-1o6.14","title":"edge-tests: Edge rendering tests","description":"Comprehensive test suite for DAG edge rendering components.\n\n# Specification\n- Unit tests for Edge struct creation\n- Path calculation tests (straight lines)\n- Bezier curve generation tests\n- Arrow head calculation tests\n- Edge case handling (coincident nodes, self-loops)\n\n# Test Coverage\n1. **Edge Struct Tests**\n   - Edge creation with all fields\n   - Edge state transitions (normal → highlighted)\n   - Edge style variants\n\n2. **Line Path Tests**\n   - Straight line between nodes\n   - Node boundary adjustment\n   - Coincident nodes (error case)\n   - Zero-length edges\n\n3. **Bezier Curve Tests**\n   - Parallel edge detection\n   - Control point calculation\n   - Curve sampling accuracy\n   - Multiple parallel edges (3+)\n\n4. **Arrow Head Tests**\n   - Arrow triangle generation\n   - Direction vector accuracy\n   - Arrow scaling with zoom\n   - Different arrow styles\n\n5. **Integration Tests**\n   - Complete edge rendering pipeline\n   - Edge + arrow rendering\n   - Curve + arrow rendering\n   - Edge state updates\n\n# Test Examples\n```rust\n#[test]\nfn test_line_path_basic() -> Result<(), EdgeError> {\n    let path = calculate_line_path(\n        (0.0, 0.0), 10.0,  // source\n        (100.0, 0.0), 10.0, // target\n    )?;\n    assert_eq!(path.start, (10.0, 0.0));\n    assert_eq!(path.end, (90.0, 0.0));\n    Ok(())\n}\n\n#[test]\nfn test_arrow_direction() -> Result<(), EdgeError> {\n    let arrow = calculate_arrow_head(\n        (100.0, 50.0),\n        (1.0, 0.0),  // pointing right\n        12.0, 8.0,\n    )?;\n    assert!(arrow.tip.0 > arrow.wing1.0);\n    Ok(())\n}\n\n#[test]\nfn test_coincident_nodes_error() {\n    let result = calculate_line_path(\n        (50.0, 50.0), 10.0,\n        (50.0, 50.0), 10.0,\n    );\n    assert!(result.is_err());\n}\n```\n\n# Files\n- crates/oya-ui/tests/dag_edge_test.rs - Edge rendering tests\n\n# Success Criteria\n- All tests pass with `moon run :test`\n- >90% code coverage for edge module\n- Zero panics in tests\n- Zero unwraps in test code\n- All edge cases tested\n\n# Test Properties\n- Property-based tests with quickcheck\n- Fuzz testing for numeric edge cases\n- Snapshot tests for visual regression\n\n# Dependencies\n- Depends on all edge beads: edge-struct, edge-lines, edge-curves, edge-arrows\n\n# Notes\n- Use approx crate for f64 comparisons (epsilon = 1e-6)\n- Test arrow direction: always points toward target\n- Verify edge color/style rendering","status":"open","priority":1,"issue_type":"feature","estimated_minutes":25,"created_at":"2026-02-01T14:25:57.322562813Z","created_by":"lewis","updated_at":"2026-02-01T14:25:57.322562813Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.14","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:25:57.322562813Z","created_by":"lewis"}]}
{"id":"src-1o6.15","title":"node-struct: Define Node data structure","description":"Define the core Node data structure for DAG visualization with all state information and rendering metadata.\n\n# Specification\n- Define NodeState enum: Pending, Scheduled, Running, Completed, Failed, Cancelled\n- Define NodeShape enum: Circle, Rectangle\n- Define Node struct with fields:\n  - id: String (bead ID)\n  - label: String (bead title)\n  - state: NodeState\n  - shape: NodeShape\n  - position: (f64, f64) - canvas coordinates\n  - radius: f64 - for circle, or width/height for rect\n  - dependencies: Vec<String> - parent bead IDs\n  - hovered: bool - hover state for interaction\n\n# Success Criteria\n- Node struct derives Clone, Debug, PartialEq\n- NodeState enum is serializable (serde)\n- All fields documented with doc comments\n- Zero unwraps in constructors\n- Type-safe position and size handling\n\n# Files\n- crates/oya-ui/src/models/node.rs - Node data structures\n- crates/oya-ui/src/models/mod.rs - Module exports\n\n# Implementation Notes\n- Use newtype pattern for NodeId(String) type safety\n- Position could be Point2D struct for clarity\n- Consider Default trait for sensible defaults","status":"open","priority":1,"issue_type":"feature","owner":"lewis","estimated_minutes":15,"created_at":"2026-02-01T14:26:00.792078260Z","created_by":"lewis","updated_at":"2026-02-01T14:26:00.792078260Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.15","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:26:00.792078260Z","created_by":"lewis"}]}
{"id":"src-1o6.16","title":"layout: Comprehensive algorithm tests and benchmarks","description":"Build comprehensive test suite for force-directed layout: property tests, integration tests, performance benchmarks. Verifies correctness, stability, and performance requirements from parent bead (50+ nodes, <2s convergence, 60fps).\n\n# Test Categories\n- Property tests: force laws, vector math, symmetry\n- Integration tests: full layout on real graph topologies\n- Benchmark tests: convergence time, frame rate, memory\n- Snapshot tests: deterministic layout reproducibility\n\n# Property Tests (proptest)\n- Vec2D operations: associativity, commutativity, distributivity\n- Force symmetry: Newton's third law (equal/opposite)\n- Energy conservation: total energy decreases monotonically\n- Spring equilibrium: connected nodes converge to rest_length\n\n# Integration Tests\n- Linear chain: N nodes in sequence\n- Star topology: 1 center, N spokes\n- Grid layout: N x N lattice\n- Random DAG: 50-100 nodes with random edges\n\n# Benchmark Tests (criterion)\n- 10 node convergence time: target <100ms\n- 50 node convergence time: target <2s\n- 100 node convergence time: target <5s\n- Frame time at 50 nodes: target <16ms (60fps)\n\n# Success Criteria\n- All property tests pass with 1000 random inputs\n- Integration tests verify correct topology preservation\n- Benchmarks meet performance targets (50 nodes <2s)\n- Zero unwraps, zero panics in all test scenarios\n- Snapshot tests verify deterministic layout (same seed = same positions)\n\n# Files\n- crates/oya-ui/tests/layout_property_tests.rs - Property tests\n- crates/oya-ui/tests/layout_integration_tests.rs - Full layout tests\n- crates/oya-ui/benches/layout_benchmarks.rs - Performance benchmarks","status":"open","priority":2,"issue_type":"task","owner":"lewis","estimated_minutes":30,"created_at":"2026-02-01T14:26:05.211774258Z","created_by":"lewis","updated_at":"2026-02-01T14:26:05.211774258Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.16","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:26:05.211774258Z","created_by":"lewis"}]}
{"id":"src-1o6.17","title":"controls-pan: Implement pan with drag for DAG viewport","description":"Implement drag-to-pan functionality for DAG viewport using mouse deltas.\n\n# Scope\n- Calculate viewport offset from mouse drag delta\n- Update canvas transform for pan translation\n- Maintain pan state across render cycles\n- Smooth pan without jitter\n\n# Files\n- crates/oya-ui/src/components/controls/pan.rs - Pan logic\n\n# Success Criteria\n- Drag moves viewport smoothly\n- Pan state persists during zoom\n- No drift or coordinate errors\n- Viewport bounds handled correctly\n\n# Dependencies\n- controls-mouse: Mouse event state\n\n# Implementation Notes\n- Apply translation to Canvas2dContext transform\n- Store pan offset as (x, y) tuple in signal\n- Accumulate deltas during drag operation\n- Reset drag state on mouseup","status":"open","priority":1,"issue_type":"feature","estimated_minutes":20,"created_at":"2026-02-01T14:26:06.065641084Z","created_by":"lewis","updated_at":"2026-02-01T14:26:06.065641084Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.17","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:26:06.065641084Z","created_by":"lewis"}]}
{"id":"src-1o6.18","title":"canvas-tests: Canvas initialization tests","description":"Comprehensive test suite for Canvas initialization flow\n\n# Scope\nUnit tests for all canvas initialization beads: element creation, context acquisition, resize handling, DPI scaling, RAF loop, clear logic, and coordinate transforms.\n\n# Architecture\n- wasm-bindgen-test for browser environment\n- web-sys test fixtures (mock Window, Document)\n- Test each bead in isolation\n- Integration test for full initialization flow\n- Performance benchmarks (RAF timing, clear speed)\n\n# Test Cases\n\n## canvas-init tests\n- Creates HtmlCanvasElement successfully\n- Sets correct initial dimensions (1200x800)\n- Applies accessibility attributes\n- Attaches CSS class 'dag-canvas'\n- Returns error on invalid document\n\n## canvas-context tests\n- Acquires CanvasRenderingContext2d\n- Returns error if context unavailable\n- Type cast succeeds\n\n## canvas-resize tests\n- Attaches resize event listener\n- Updates canvas dimensions on resize\n- Debounces rapid resize events (300ms)\n- Cleans up listener on unmount\n\n## canvas-dpi tests\n- Detects device pixel ratio\n- Scales backing store correctly (1x, 2x, 3x)\n- Preserves CSS dimensions\n- Applies context scale transform\n\n## canvas-raf tests\n- Starts animation loop at 60fps\n- Calculates frame delta correctly\n- Pauses on visibility change\n- Stops cleanly on unmount\n- No memory leaks\n\n## canvas-clear tests\n- Clears canvas completely (no ghosting)\n- Applies background color\n- Renders grid when enabled\n- Performance <1ms per frame\n\n## canvas-coords tests\n- screen_to_world() transforms correctly\n- world_to_screen() transforms correctly\n- Zoom clamped to [0.1, 5.0]\n- Pan state updates correctly\n- Wheel zoom centered on cursor\n\n# Success Criteria\n- 100% code coverage for canvas module\n- All tests pass in wasm32-unknown-unknown\n- Performance benchmarks document <16ms frame budget\n- No unwraps or panics in test code\n- CI integration (moon run :test)\n\n# Dependencies\n- All canvas-* beads (tests their implementations)\n\n# Files\n- crates/oya-ui/tests/canvas/init_test.rs\n- crates/oya-ui/tests/canvas/context_test.rs\n- crates/oya-ui/tests/canvas/resize_test.rs\n- crates/oya-ui/tests/canvas/dpi_test.rs\n- crates/oya-ui/tests/canvas/raf_test.rs\n- crates/oya-ui/tests/canvas/clear_test.rs\n- crates/oya-ui/tests/canvas/coords_test.rs\n- crates/oya-ui/tests/canvas/integration_test.rs\n\n# Implementation Details\nuse wasm_bindgen_test::*;\nuse web_sys::*;\n\nwasm_bindgen_test_configure!(run_in_browser);\n\n#[wasm_bindgen_test]\nfn test_canvas_creation() {\n    let window = web_sys::window().expect(\"window\");\n    let document = window.document().expect(\"document\");\n    \n    let result = create_canvas(&document);\n    assert!(result.is_ok());\n    \n    let canvas = result.unwrap();\n    assert_eq!(canvas.width(), 1200);\n    assert_eq!(canvas.height(), 800);\n    assert_eq!(canvas.get_attribute(\"role\").unwrap(), \"img\");\n}\n\nEffort: 30min","status":"open","priority":1,"issue_type":"task","estimated_minutes":30,"created_at":"2026-02-01T14:26:07.177827769Z","created_by":"lewis","updated_at":"2026-02-01T14:26:07.177827769Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.18","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:26:07.177827769Z","created_by":"lewis"}]}
{"id":"src-1o6.19","title":"node-colors: State-based color mapping","description":"Implement color mapping from NodeState to hex color codes for consistent visual representation.\n\n# Specification\n- Implement NodeState::to_color() method returning hex string:\n  - Pending: \"#6B7280\" (gray)\n  - Scheduled: \"#FCD34D\" (yellow)\n  - Running: \"#3B82F6\" (blue)\n  - Completed: \"#10B981\" (green)\n  - Failed: \"#EF4444\" (red)\n  - Cancelled: \"#F97316\" (orange)\n- Optional: Implement to_rgb() returning (u8, u8, u8) tuple\n- Add hover state color modifier (10% lighter)\n\n# Success Criteria\n- Exhaustive match on all NodeState variants\n- Color constants defined as module consts\n- Unit tests verify all color mappings\n- No string allocation in hot path (consider Color enum)\n\n# Files\n- crates/oya-ui/src/models/node.rs - NodeState impl\n- crates/oya-ui/src/models/colors.rs - Color constants (optional)\n\n# Dependencies\n- Requires: node-struct bead completion\n\n# Implementation Notes\n- Consider Color enum with From<NodeState> impl\n- Hover modifier could be HSL-based brightness adjustment\n- Cache color strings if performance critical","status":"open","priority":1,"issue_type":"feature","owner":"lewis","estimated_minutes":10,"created_at":"2026-02-01T14:26:08.626834254Z","created_by":"lewis","updated_at":"2026-02-01T14:26:08.626834254Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.19","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:26:08.626834254Z","created_by":"lewis"}]}
{"id":"src-1o6.2","title":"canvas-raf: RequestAnimationFrame loop","description":"Implement RequestAnimationFrame-based render loop\n\n# Scope\nSet up RAF-based animation loop for smooth 60fps DAG rendering. Handle start/stop, frame timing, and integration with Leptos reactive state.\n\n# Architecture\n- web_sys::Window::request_animation_frame()\n- Closure-based RAF callback with recursion\n- Frame delta timing for physics simulation\n- Leptos RwSignal for animation state (running/paused)\n- Cleanup on component unmount (cancel_animation_frame)\n\n# Success Criteria\n- RAF loop starts on component mount\n- Runs at 60fps (16.67ms frame time)\n- Frame delta calculated (DOMHighResTimeStamp)\n- Integrates with force-directed layout updates\n- Pauses when tab loses focus (Page Visibility API)\n- Stops cleanly on component unmount\n- No unwraps or panics (Result<T, E> all the way)\n- No memory leaks (proper closure cleanup)\n\n# Dependencies\n- Bead canvas-context (requires context for rendering)\n- Bead canvas-clear (requires clear logic per frame)\n\n# Files\n- crates/oya-ui/src/components/canvas/raf.rs\n- crates/oya-ui/src/components/dag_viz.rs (integration)\n\n# Implementation Details\nuse leptos::*;\nuse web_sys::{Window, CanvasRenderingContext2d};\nuse std::cell::RefCell;\nuse std::rc::Rc;\n\nfn start_animation_loop(\n    window: &Window,\n    ctx: CanvasRenderingContext2d,\n    render_fn: impl Fn(&CanvasRenderingContext2d, f64) + 'static,\n) -> Result<i32, JsValue> {\n    let f = Rc::new(RefCell::new(None));\n    let g = f.clone();\n    \n    let mut last_time = 0.0;\n    \n    *g.borrow_mut() = Some(Closure::wrap(Box::new(move |time: f64| {\n        let delta = time - last_time;\n        last_time = time;\n        \n        render_fn(&ctx, delta);\n        \n        // Schedule next frame\n        let _ = window.request_animation_frame(f.borrow().as_ref().unwrap().as_ref().unchecked_ref());\n    }) as Box<dyn FnMut(f64)>));\n    \n    window.request_animation_frame(g.borrow().as_ref().unwrap().as_ref().unchecked_ref())\n}\n\nEffort: 20min","status":"open","priority":1,"issue_type":"feature","estimated_minutes":20,"created_at":"2026-02-01T14:25:20.191540118Z","created_by":"lewis","updated_at":"2026-02-01T14:25:20.191540118Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.2","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:25:20.191540118Z","created_by":"lewis"}]}
{"id":"src-1o6.20","title":"controls-zoom: Implement zoom with wheel for DAG viewport","description":"Implement mouse wheel zoom for DAG viewport with origin preservation.\n\n# Scope\n- Handle wheel events for zoom in/out\n- Calculate zoom factor from wheel delta\n- Preserve mouse cursor position during zoom (origin-based scaling)\n- Update canvas scale transform\n\n# Files\n- crates/oya-ui/src/components/controls/zoom.rs - Zoom logic\n\n# Success Criteria\n- Wheel zooms in/out smoothly\n- Zoom centers on mouse cursor position\n- Scale factor updates correctly\n- No coordinate drift during zoom\n\n# Dependencies\n- controls-mouse: Mouse event state\n\n# Implementation Notes\n- Use WheelEvent.deltaY for zoom direction\n- Apply scale transform around mouse origin\n- Compute inverse transform for cursor preservation\n- Store zoom level as f64 scalar in signal","status":"open","priority":1,"issue_type":"feature","estimated_minutes":20,"created_at":"2026-02-01T14:26:09.398705446Z","created_by":"lewis","updated_at":"2026-02-01T14:26:09.398705446Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.20","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:26:09.398705446Z","created_by":"lewis"}]}
{"id":"src-1o6.21","title":"controls-touch: Touch gesture support for DAG pan/zoom","description":"Implement touch gesture support for mobile/tablet pan and pinch-zoom.\n\n# Scope\n- Single-finger drag for panning\n- Two-finger pinch for zooming\n- Touch event coordinate conversion\n- Gesture state management\n\n# Files\n- crates/oya-ui/src/components/controls/touch.rs - Touch handlers\n\n# Success Criteria\n- Single touch pans viewport\n- Pinch gesture zooms smoothly\n- Touch and mouse controls don't conflict\n- Gestures feel natural on mobile\n\n# Dependencies\n- controls-pan: Pan logic\n- controls-zoom: Zoom logic\n\n# Implementation Notes\n- Use web-sys::TouchEvent for touch input\n- Calculate pinch distance for zoom factor\n- Track active touch points in Set\n- Prevent default touch behaviors (scroll, zoom)","status":"open","priority":1,"issue_type":"feature","estimated_minutes":25,"created_at":"2026-02-01T14:26:14.720750609Z","created_by":"lewis","updated_at":"2026-02-01T14:26:14.720750609Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.21","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:26:14.720750609Z","created_by":"lewis"}]}
{"id":"src-1o6.22","title":"node-shapes: Circle/rect rendering","description":"Implement canvas rendering for circle and rectangle node shapes with state-based fill colors.\n\n# Specification\n- Implement Node::render() method taking Canvas2dContext\n- Circle rendering:\n  - arc(x, y, radius, 0, 2*PI)\n  - fill with state color\n  - stroke with darker border (2px)\n- Rectangle rendering:\n  - fillRect(x - width/2, y - height/2, width, height)\n  - strokeRect for border\n  - optional rounded corners (border-radius: 4px)\n- Apply hover state visual feedback (lighter fill + shadow)\n\n# Success Criteria\n- Render matches design spec exactly\n- No unwraps in rendering code (handle context errors)\n- Shapes centered on node position\n- Border width scales with zoom level\n- Performance: <0.5ms per node render at 60fps\n\n# Files\n- crates/oya-ui/src/rendering/node_renderer.rs - Shape rendering\n- crates/oya-ui/src/models/node.rs - Node::render() method\n\n# Dependencies\n- Requires: node-struct, node-colors beads\n- web-sys Canvas2dContext\n\n# Implementation Notes\n- Use Canvas2dContext::set_fill_style() with state color\n- Cache JsValue color strings to avoid allocation\n- Consider OffscreenCanvas for pre-rendering templates\n- Handle Result<(), JsValue> from canvas methods","status":"open","priority":1,"issue_type":"feature","owner":"lewis","estimated_minutes":20,"created_at":"2026-02-01T14:26:15.869704346Z","created_by":"lewis","updated_at":"2026-02-01T14:26:15.869704346Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.22","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:26:15.869704346Z","created_by":"lewis"}]}
{"id":"src-1o6.23","title":"controls-bounds: Zoom level clamping (0.1x-5x) for DAG","description":"Implement zoom level bounds and viewport edge clamping for DAG controls.\n\n# Scope\n- Clamp zoom scale to 0.1x-5x range\n- Prevent panning beyond graph bounds\n- Calculate visible viewport rectangle\n- Apply constraints to pan/zoom transforms\n\n# Files\n- crates/oya-ui/src/components/controls/bounds.rs - Bounds logic\n\n# Success Criteria\n- Zoom clamped to [0.1, 5.0] range\n- Pan constrained to graph extents\n- Smooth behavior at limits\n- No jarring stops or jumps\n\n# Dependencies\n- controls-pan: Pan state\n- controls-zoom: Zoom state\n\n# Implementation Notes\n- Clamp zoom: zoom.clamp(0.1, 5.0)\n- Calculate graph bounding box from node positions\n- Apply edge constraints to pan offset\n- Update constraints when graph changes","status":"open","priority":1,"issue_type":"feature","estimated_minutes":15,"created_at":"2026-02-01T14:26:18.187239933Z","created_by":"lewis","updated_at":"2026-02-01T14:26:18.187239933Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.23","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:26:18.187239933Z","created_by":"lewis"}]}
{"id":"src-1o6.24","title":"controls-tests: Comprehensive interaction tests for DAG pan/zoom controls","description":"Write comprehensive tests for DAG pan/zoom control interactions.\n\n# Scope\n- Unit tests for mouse/touch event handlers\n- Integration tests for pan/zoom transforms\n- Bounds checking validation\n- Event state management tests\n\n# Files\n- crates/oya-ui/tests/controls_mouse_test.rs - Mouse event tests\n- crates/oya-ui/tests/controls_pan_test.rs - Pan behavior tests\n- crates/oya-ui/tests/controls_zoom_test.rs - Zoom behavior tests\n- crates/oya-ui/tests/controls_touch_test.rs - Touch gesture tests\n- crates/oya-ui/tests/controls_bounds_test.rs - Bounds validation tests\n\n# Success Criteria\n- 95%+ code coverage for control modules\n- Pan/zoom edge cases validated\n- Event race conditions tested\n- Touch gesture accuracy verified\n\n# Dependencies\n- controls-mouse: Mouse events\n- controls-pan: Pan logic\n- controls-zoom: Zoom logic\n- controls-touch: Touch gestures\n- controls-bounds: Bounds constraints\n\n# Implementation Notes\n- Mock DOM events with web-sys test helpers\n- Test transform matrix calculations\n- Verify signal updates with Leptos testing utils\n- Check bounds edge cases (min/max zoom, graph edges)","status":"open","priority":1,"issue_type":"test","estimated_minutes":30,"created_at":"2026-02-01T14:26:24.307914087Z","created_by":"lewis","updated_at":"2026-02-01T14:26:24.307914087Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.24","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:26:24.307914087Z","created_by":"lewis"}]}
{"id":"src-1o6.25","title":"node-labels: Text label rendering","description":"Implement text label rendering for node titles with automatic truncation and positioning.\n\n# Specification\n- Render node label centered below node shape\n- Text styling:\n  - Font: 12px Inter, sans-serif\n  - Color: #1F2937 (dark gray)\n  - Max width: 120px\n  - Truncate with ellipsis if overflow\n- Label positioning:\n  - Circle: y_offset = radius + 16px\n  - Rectangle: y_offset = height/2 + 12px\n  - Centered horizontally on node x-coordinate\n- Implement text measurement for proper centering\n\n# Success Criteria\n- Labels render at correct position for both shapes\n- Text truncates gracefully with \"...\"\n- No text overlaps with node shapes\n- Readable at default zoom (100%)\n- Handles empty/missing labels gracefully\n- No panics on measurement failures\n\n# Files\n- crates/oya-ui/src/rendering/label_renderer.rs - Text rendering\n- crates/oya-ui/src/models/node.rs - Label render method\n\n# Dependencies\n- Requires: node-struct, node-shapes beads\n- web-sys Canvas2dContext::measure_text()\n\n# Implementation Notes\n- Use measureText() to calculate text width\n- Cache font metrics to avoid repeated measurement\n- Consider multi-line labels for long titles (wrap at 2 lines max)\n- Handle Result from fillText() properly","status":"open","priority":1,"issue_type":"feature","owner":"lewis","estimated_minutes":20,"created_at":"2026-02-01T14:26:25.684636294Z","created_by":"lewis","updated_at":"2026-02-01T14:26:25.684636294Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.25","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:26:25.684636294Z","created_by":"lewis"}]}
{"id":"src-1o6.26","title":"node-hover: Hover state detection","description":"Implement mouse hover detection for nodes with hit-testing for circle and rectangle shapes.\n\n# Specification\n- Implement Node::contains_point(x: f64, y: f64) -> bool\n- Circle hit-test: distance from center <= radius\n- Rectangle hit-test: point within bounds (AABB)\n- Handle canvas coordinate transforms (pan/zoom)\n- Add mousemove event listener to canvas\n- Update node.hovered state reactively\n- Cursor changes to pointer on hover\n\n# Success Criteria\n- Accurate hit detection for both shapes\n- No false positives on overlapping nodes\n- Hover state updates within 16ms (60fps)\n- Cursor feedback immediate (<100ms)\n- Handles viewport transforms correctly\n- No memory leaks from event listeners\n\n# Files\n- crates/oya-ui/src/interaction/hover.rs - Hit testing logic\n- crates/oya-ui/src/models/node.rs - contains_point() method\n- crates/oya-ui/src/components/dag_viz.rs - Event listener setup\n\n# Dependencies\n- Requires: node-struct bead\n- web-sys MouseEvent, HtmlCanvasElement\n\n# Implementation Notes\n- Use Leptos create_effect for reactive hover updates\n- Debounce hover checks if performance critical\n- Consider spatial indexing (quadtree) for 50+ nodes\n- Handle touch events for mobile (touchstart/touchend)","status":"open","priority":1,"issue_type":"feature","owner":"lewis","estimated_minutes":15,"created_at":"2026-02-01T14:26:31.867231848Z","created_by":"lewis","updated_at":"2026-02-01T14:26:31.867231848Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.26","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:26:31.867231848Z","created_by":"lewis"}]}
{"id":"src-1o6.27","title":"node-tests: Node rendering tests","description":"Comprehensive unit and integration tests for node rendering, color mapping, and interaction.\n\n# Test Coverage\n1. **Unit Tests (node.rs)**:\n   - NodeState color mapping (all 6 states)\n   - Node struct construction with valid/invalid data\n   - contains_point() hit detection (circle/rect, edge cases)\n   - Default implementations\n\n2. **Integration Tests (node_renderer.rs)**:\n   - Circle rendering with all states\n   - Rectangle rendering with all states\n   - Label truncation at various lengths\n   - Hover state visual feedback\n   - Multi-node rendering (10+ nodes)\n\n3. **Property Tests (proptest)**:\n   - Hit detection is symmetric\n   - Colors always valid hex codes\n   - Label truncation preserves prefix\n   - Position transforms preserve containment\n\n# Success Criteria\n- 100% code coverage for node module\n- All edge cases handled (empty labels, zero radius, etc.)\n- Tests run in <500ms total\n- No panics in test execution\n- Property tests find no regressions\n\n# Files\n- crates/oya-ui/tests/node_test.rs - Unit tests\n- crates/oya-ui/tests/node_renderer_test.rs - Integration tests\n- crates/oya-ui/tests/node_property_test.rs - Property tests\n\n# Dependencies\n- Requires: ALL previous node-* beads completed\n- wasm-bindgen-test for browser tests\n- proptest for property-based testing\n\n# Implementation Notes\n- Use wasm-bindgen-test for canvas rendering tests\n- Mock Canvas2dContext for isolated rendering tests\n- Snapshot tests for visual regression (optional)\n- Benchmark critical paths (render, hit-test)","status":"open","priority":1,"issue_type":"test","owner":"lewis","estimated_minutes":25,"created_at":"2026-02-01T14:26:37.330496653Z","created_by":"lewis","updated_at":"2026-02-01T14:26:37.330496653Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.27","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:26:37.330496653Z","created_by":"lewis"}]}
{"id":"src-1o6.28","title":"edge-struct: Define Edge data structure","description":"Define the core Edge data structure for DAG edge rendering in Leptos components.\n\n# Specification\n- Create `Edge` struct with source/target node IDs\n- Support edge metadata (type, weight, label)\n- Derive Clone, Debug, PartialEq for testing\n- Add edge color/style properties (solid, dashed, dotted)\n- Include edge state (normal, highlighted, dimmed)\n\n# Data Structure\n```rust\npub struct Edge {\n    pub id: EdgeId,\n    pub source: NodeId,\n    pub target: NodeId,\n    pub edge_type: EdgeType,\n    pub weight: f64,\n    pub label: Option<String>,\n    pub style: EdgeStyle,\n    pub state: EdgeState,\n}\n\npub enum EdgeType {\n    Dependency,      // Standard dependency edge\n    Weak,            // Weak/soft dependency\n    Conflict,        // Conflicting edge\n}\n\npub enum EdgeStyle {\n    Solid,\n    Dashed,\n    Dotted,\n}\n\npub enum EdgeState {\n    Normal,\n    Highlighted,     // When node selected\n    Dimmed,          // When other node selected\n}\n```\n\n# Files\n- crates/oya-ui/src/components/dag_edge.rs - Edge struct definition\n\n# Success Criteria\n- Edge struct compiles with all derives\n- EdgeType/EdgeStyle/EdgeState enums defined\n- No panics, no unwraps\n- Type-safe node ID references\n\n# Dependencies\n- Parent: src-1o6 (DAG visualization)\n- Node ID types from dag_node.rs\n\n# Notes\n- Edges point TOWARD dependent nodes (target depends on source)\n- Arrow direction: source → target\n- Edge weight used for layout calculations","status":"open","priority":1,"issue_type":"feature","estimated_minutes":10,"created_at":"2026-02-01T14:26:53.406568377Z","created_by":"lewis","updated_at":"2026-02-01T14:26:53.406568377Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.28","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:26:53.406568377Z","created_by":"lewis"}]}
{"id":"src-1o6.3","title":"layout: Spring force for edge connections","description":"Implement spring force along edges using Hooke's law. Attracts connected nodes toward ideal edge length. Configurable stiffness and rest length parameters.\n\n# Architecture\n- SpringForce struct with stiffness and rest_length parameters\n- Force calculation: F = k * (distance - rest_length) * direction\n- Apply force to both source and target nodes (equal/opposite)\n- Edge iteration with parallel force calculation\n\n# Implementation Details\n- Hooke's law: F = -k * x (where x = displacement from rest)\n- Stiffness k: typical range 0.01 - 0.1\n- Rest length: typical 50-100 pixels\n- Direction: normalized vector from source to target\n- Bilateral force: apply +F to target, -F to source\n\n# Success Criteria\n- Connected nodes converge to rest_length distance\n- Stronger springs (higher k) converge faster\n- Force magnitude proportional to displacement\n- Handles zero-length edges gracefully (no division by zero)\n- Property tests verify Newton's third law (equal/opposite)\n\n# Files\n- crates/oya-ui/src/layout/spring_force.rs - Spring force implementation\n- crates/oya-ui/tests/spring_force_test.rs - Unit tests","status":"open","priority":1,"issue_type":"feature","owner":"lewis","estimated_minutes":20,"created_at":"2026-02-01T14:25:22.492624686Z","created_by":"lewis","updated_at":"2026-02-01T14:25:22.492624686Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.3","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:25:22.492624686Z","created_by":"lewis"}]}
{"id":"src-1o6.4","title":"edge-lines: Line path calculation","description":"Implement straight line path calculation for DAG edges between nodes.\n\n# Specification\n- Calculate line path from source node center to target node center\n- Adjust endpoints to node boundaries (avoid overlapping node circles)\n- Handle node radius for circle/ellipse shapes\n- Support different node sizes dynamically\n- Return PathSegment with start/end coordinates\n\n# Algorithm\n1. Get source node (x1, y1) and target node (x2, y2) positions\n2. Calculate direction vector: (dx, dy) = (x2-x1, y2-y1)\n3. Normalize direction: magnitude = sqrt(dx² + dy²)\n4. Adjust start point: (x1 + dx/mag * r1, y1 + dy/mag * r1)\n5. Adjust end point: (x2 - dx/mag * r2, y2 - dy/mag * r2)\n6. Return adjusted line segment\n\n# Function Signature\n```rust\npub fn calculate_line_path(\n    source_pos: (f64, f64),\n    source_radius: f64,\n    target_pos: (f64, f64),\n    target_radius: f64,\n) -> Result<PathSegment, EdgeError> {\n    // Implementation here\n}\n\npub struct PathSegment {\n    pub start: (f64, f64),\n    pub end: (f64, f64),\n    pub length: f64,\n}\n```\n\n# Files\n- crates/oya-ui/src/components/dag_edge.rs - Line path calculations\n\n# Success Criteria\n- Straight lines render between node boundaries\n- No division by zero (handle coincident nodes)\n- Paths update when nodes move\n- Zero panics, zero unwraps\n- All errors use Result<T, EdgeError>\n\n# Edge Cases\n- Coincident nodes (same position)\n- Overlapping nodes\n- Self-loops (source == target)\n\n# Dependencies\n- Depends on edge-struct bead (Edge data structure)\n\n# Notes\n- Use f64 for precision in layout calculations\n- Arrow points toward TARGET node (dependent)","status":"open","priority":1,"issue_type":"feature","estimated_minutes":20,"created_at":"2026-02-01T14:25:24.509482796Z","created_by":"lewis","updated_at":"2026-02-01T14:25:24.509482796Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.4","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:25:24.509482796Z","created_by":"lewis"}]}
{"id":"src-1o6.5","title":"layout: Node repulsion force (n-body)","description":"Implement n-body repulsion force to prevent node overlap. Uses Barnes-Hut quadtree for O(n log n) performance instead of naive O(n²). Configurable charge strength and distance limits.\n\n# Architecture\n- ChargeForce struct with strength and distance_min/max parameters\n- Quadtree spatial indexing for efficient force calculation\n- Coulomb's law: F = k * q1 * q2 / r² (repulsive when q same sign)\n- Distance clamping to prevent infinite forces\n\n# Implementation Details\n- Barnes-Hut theta parameter: 0.9 (accuracy vs speed tradeoff)\n- Charge strength: typical -30 to -100 (negative = repulsion)\n- Distance min: 1.0 (prevent division by zero)\n- Distance max: 500.0 (limit long-range interactions)\n- Quadtree cell aggregation for distant nodes\n\n# Success Criteria\n- O(n log n) complexity verified with benchmark tests\n- Nodes maintain minimum separation distance\n- No overlap in final layout (verified with collision detection)\n- Quadtree correctly aggregates distant node clusters\n- Force falls off with inverse square of distance\n\n# Files\n- crates/oya-ui/src/layout/charge_force.rs - N-body repulsion\n- crates/oya-ui/src/layout/quadtree.rs - Barnes-Hut spatial index\n- crates/oya-ui/tests/charge_force_test.rs - Unit + benchmark tests","status":"open","priority":1,"issue_type":"feature","owner":"lewis","estimated_minutes":20,"created_at":"2026-02-01T14:25:30.324383685Z","created_by":"lewis","updated_at":"2026-02-01T14:25:30.324383685Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.5","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:25:30.324383685Z","created_by":"lewis"}]}
{"id":"src-1o6.6","title":"canvas-clear: Clear and redraw logic","description":"Implement canvas clear and background rendering\n\n# Scope\nClear canvas on each frame and draw background grid/pattern. Prevents ghosting from previous frames and provides visual reference grid.\n\n# Architecture\n- CanvasRenderingContext2d.clear_rect() for full clear\n- Background grid rendering (optional, configurable)\n- Solid background color (#1F2937 dark gray)\n- Integration with RAF render loop\n\n# Success Criteria\n- Canvas cleared each frame (no ghosting)\n- Background color applied (#1F2937)\n- Optional grid overlay (10px spacing, #374151)\n- Performance: <1ms per frame for clear+background\n- No unwraps or panics (Result<T, E> all the way)\n- Configurable via props (show_grid: bool)\n\n# Dependencies\n- Bead canvas-context (requires 2D context)\n- Bead canvas-dpi (requires proper scaling)\n\n# Files\n- crates/oya-ui/src/components/canvas/clear.rs\n- crates/oya-ui/src/components/dag_viz.rs (integration)\n\n# Implementation Details\nuse web_sys::CanvasRenderingContext2d;\n\nfn clear_canvas(\n    ctx: &CanvasRenderingContext2d,\n    width: f64,\n    height: f64,\n    show_grid: bool,\n) -> Result<(), JsValue> {\n    // Clear entire canvas\n    ctx.clear_rect(0.0, 0.0, width, height);\n    \n    // Solid background\n    ctx.set_fill_style(&JsValue::from_str(\"#1F2937\"));\n    ctx.fill_rect(0.0, 0.0, width, height);\n    \n    // Optional grid\n    if show_grid {\n        ctx.set_stroke_style(&JsValue::from_str(\"#374151\"));\n        ctx.set_line_width(0.5);\n        \n        // Vertical lines\n        for x in (0..width as i32).step_by(10) {\n            ctx.move_to(x as f64, 0.0);\n            ctx.line_to(x as f64, height);\n        }\n        \n        // Horizontal lines\n        for y in (0..height as i32).step_by(10) {\n            ctx.move_to(0.0, y as f64);\n            ctx.line_to(width, y as f64);\n        }\n        \n        ctx.stroke();\n    }\n    \n    Ok(())\n}\n\nEffort: 10min","status":"open","priority":1,"issue_type":"feature","estimated_minutes":10,"created_at":"2026-02-01T14:25:32.951590504Z","created_by":"lewis","updated_at":"2026-02-01T14:25:32.951590504Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.6","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:25:32.951590504Z","created_by":"lewis"}]}
{"id":"src-1o6.7","title":"edge-curves: Bezier curve for parallel edges","description":"Implement quadratic Bezier curves for parallel edges in DAG rendering.\n\n# Specification\n- Detect parallel edges (A→B and B→A, or multiple A→B)\n- Calculate control point offset perpendicular to line\n- Generate smooth quadratic Bezier curve\n- Support configurable curve intensity (offset distance)\n- Handle edge bundling for multiple parallel edges\n\n# Algorithm\n1. Detect parallel edges: same source/target or reverse pair\n2. Calculate midpoint: (x_mid, y_mid) = ((x1+x2)/2, (y1+y2)/2)\n3. Calculate perpendicular offset vector\n4. Apply offset multiplier based on edge index\n5. Generate quadratic Bezier with control point\n6. Sample curve into line segments for rendering\n\n# Function Signature\n```rust\npub fn calculate_bezier_curve(\n    source_pos: (f64, f64),\n    target_pos: (f64, f64),\n    offset_factor: f64,  // 0.0 = straight, 1.0 = curved\n    edge_index: usize,   // For multiple parallel edges\n) -> Result<CurvePath, EdgeError> {\n    // Implementation here\n}\n\npub struct CurvePath {\n    pub start: (f64, f64),\n    pub control: (f64, f64),\n    pub end: (f64, f64),\n    pub segments: Vec<(f64, f64)>,  // Sampled points for Canvas\n}\n```\n\n# Canvas Rendering\n- Use Canvas2D quadraticCurveTo() for smooth curves\n- Sample curve at 10-20 points for hit-testing\n- Cache sampled points for performance\n\n# Files\n- crates/oya-ui/src/components/dag_edge.rs - Bezier curve calculations\n\n# Success Criteria\n- Parallel edges render as distinct curves\n- Curves don't overlap\n- Smooth visual appearance\n- Zero panics, zero unwraps\n- Result-based error handling\n\n# Edge Cases\n- 3+ parallel edges (bundle spacing)\n- Bidirectional edges (A→B and B→A)\n- Very short edges (curve degenerate case)\n\n# Dependencies\n- Depends on edge-lines bead (line path calculation)\n\n# Notes\n- Offset should be proportional to edge length\n- Arrow points toward TARGET (dependent node)\n- Use perpendicular vector: (-dy, dx) for offset direction","status":"open","priority":1,"issue_type":"feature","estimated_minutes":25,"created_at":"2026-02-01T14:25:34.596256438Z","created_by":"lewis","updated_at":"2026-02-01T14:25:34.596256438Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.7","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:25:34.596256438Z","created_by":"lewis"}]}
{"id":"src-1o6.8","title":"layout: Center gravity force","description":"Implement weak gravity force pulling nodes toward viewport center. Prevents graph from drifting off-screen. Configurable strength and center point.\n\n# Architecture\n- CenterForce struct with strength and center (x, y) parameters\n- Linear force proportional to distance from center\n- Weak strength to avoid overcrowding (0.01 - 0.05)\n- Applied equally to all nodes\n\n# Implementation Details\n- Force equation: F = strength * (center - position)\n- Typical strength: 0.03 (weak pull, doesn't dominate layout)\n- Center point: viewport midpoint (width/2, height/2)\n- Linear force (not inverse square) for gentle pull\n- No distance cutoff (applies to all nodes)\n\n# Success Criteria\n- Graph stays centered in viewport during simulation\n- Nodes don't drift off-screen during long simulations\n- Weak enough to not override spring/repulsion forces\n- Property test: center of mass converges toward target center\n- Handles viewport resize by updating center point\n\n# Files\n- crates/oya-ui/src/layout/center_force.rs - Gravity implementation\n- crates/oya-ui/tests/center_force_test.rs - Unit tests","status":"open","priority":1,"issue_type":"feature","owner":"lewis","estimated_minutes":15,"created_at":"2026-02-01T14:25:37.615543034Z","created_by":"lewis","updated_at":"2026-02-01T14:25:37.615543034Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.8","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:25:37.615543034Z","created_by":"lewis"}]}
{"id":"src-1o6.9","title":"edge-arrows: Arrow head rendering","description":"Implement arrow head rendering for DAG edges pointing toward dependent nodes.\n\n# Specification\n- Calculate arrow head triangle at target end of edge\n- Support configurable arrow size (length, width)\n- Render filled triangle using Canvas path\n- Handle both straight lines and Bezier curves\n- Arrow points TOWARD target (dependent node)\n\n# Algorithm\n1. Get edge direction at target endpoint\n2. Calculate perpendicular vector for arrow wings\n3. Generate 3 triangle points: tip + 2 wings\n4. Fill triangle using Canvas fillPath\n5. Support different arrow styles (filled, outline, none)\n\n# Function Signature\n```rust\npub fn calculate_arrow_head(\n    edge_end: (f64, f64),\n    direction: (f64, f64),  // Normalized direction vector\n    arrow_length: f64,\n    arrow_width: f64,\n) -> Result<ArrowPath, EdgeError> {\n    // Implementation here\n}\n\npub struct ArrowPath {\n    pub tip: (f64, f64),\n    pub wing1: (f64, f64),\n    pub wing2: (f64, f64),\n}\n\npub enum ArrowStyle {\n    Filled,      // Solid triangle\n    Outline,     // Stroke only\n    None,        // No arrow (for weak deps)\n}\n```\n\n# Canvas Rendering\n```javascript\nctx.beginPath();\nctx.moveTo(tip.x, tip.y);\nctx.lineTo(wing1.x, wing1.y);\nctx.lineTo(wing2.x, wing2.y);\nctx.closePath();\nctx.fill();  // or ctx.stroke()\n```\n\n# Files\n- crates/oya-ui/src/components/dag_edge.rs - Arrow rendering\n\n# Success Criteria\n- Arrows point correctly toward target node\n- Arrow size scales with zoom level\n- Clean triangle rendering at all angles\n- Zero panics, zero unwraps\n- Result-based error handling\n\n# Arrow Size Defaults\n- Length: 12px\n- Width: 8px\n- Scale with zoom: arrow_size * zoom_factor\n\n# Dependencies\n- Depends on edge-lines bead (line path)\n- Depends on edge-curves bead (Bezier curves)\n\n# Notes\n- Arrow direction: normalize(target - source)\n- For Bezier curves: use tangent at endpoint\n- Perpendicular vector: (-dy, dx) for wings","status":"open","priority":1,"issue_type":"feature","estimated_minutes":20,"created_at":"2026-02-01T14:25:45.989462494Z","created_by":"lewis","updated_at":"2026-02-01T14:25:45.989462494Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.9","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:25:45.989462494Z","created_by":"lewis"}]}
{"id":"src-1oc","title":"ui-dag: Implement viewport culling for performance","description":"Optimize rendering for large graphs (100+ nodes): only render nodes/edges visible in viewport, skip offscreen elements. Implement spatial index (quadtree or grid). Target: 60fps with 200 nodes. Files: crates/oya-ui/src/components/dag_viz/culling.rs. Tests: culling works, FPS maintained, memory stable. Effort: 1hr. Parent: src-1o6","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-01T14:01:43.100495246Z","created_by":"lewis","updated_at":"2026-02-01T14:01:43.100495246Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-1pp","title":"[test] Happy path verification - normal spawn","description":"Test that normal spawn operation works without errors. This is a Red Queen test to verify that the transaction tracking and cleanup logic doesn't break normal spawn workflows.","acceptance_criteria":"- Run zjj spawn with valid bead\n- Operation completes successfully\n- No cleanup artifacts left\n- Recovery log not created on success","status":"in_progress","priority":2,"issue_type":"bug","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T14:45:24.846839673Z","created_by":"Lewis Prior","updated_at":"2026-02-01T07:34:18.943690848Z","source_repo":".","compaction_level":0}
{"id":"src-1tl","title":"[Red Queen] MAJOR: correct-transition-path: echo fail","status":"closed","priority":1,"issue_type":"bug","owner":"priorlewis43@gmail.com","created_at":"2026-01-29T13:11:26.946000167Z","created_by":"Lewis Prior","updated_at":"2026-01-30T04:11:40.190659074Z","closed_at":"2026-01-30T04:11:40.190659074Z","close_reason":"Tests are false positives: P0 test passes (exit 0), P1 tests use 'echo fail' which always succeeds","source_repo":".","compaction_level":0}
{"id":"src-208","title":"backend-axum: Implement POST /api/workflows endpoint","description":"Implement workflow creation endpoint. Accept JSON payload with bead spec, validate schema, send message to SchedulerActor to create bead, return 201 Created with bead ID in response body. Error handling: 400 Bad Request for invalid JSON/schema, 503 Service Unavailable if SchedulerActor is down. Files: crates/oya-web/src/routes/workflows.rs. Tests: valid payload returns 201, invalid JSON returns 400, missing fields return 400. Effort: 1hr. Parent: src-17z","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:00:34.521132561Z","created_by":"lewis","updated_at":"2026-02-01T14:00:34.521132561Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-22d","title":"ui-dag: Implement pan/zoom controls with mouse/touch","description":"Implement pan (mouse drag) and zoom (mouse wheel / pinch) controls. Transform canvas coordinates, clamp zoom levels (0.1x - 5x), smooth transitions. Files: crates/oya-ui/src/components/dag_viz/controls.rs. Tests: pan works, zoom works, touch gestures work, bounds enforced. Effort: 1hr. Parent: src-1o6","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:01:42.623477187Z","created_by":"lewis","updated_at":"2026-02-01T14:01:42.623477187Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-293","title":"Implement bulk-apply feature","description":"Apply pattern to multiple repos via Turbolift. Vertical slice: internal/features/bulkapply/","status":"closed","priority":2,"issue_type":"feature","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T05:01:17.566431608Z","created_by":"Lewis Prior","updated_at":"2026-01-30T05:06:36.926447646Z","closed_at":"2026-01-30T05:06:36.926447646Z","close_reason":"Closed","source_repo":".","compaction_level":0}
{"id":"src-2ab","title":"ui-timeline: Implement phase progress indicator component","description":"Build Leptos component showing TDD15 phases (0-15) as horizontal progress bar. Highlight current phase, show completed phases in green, pending in gray. Show phase names on hover. Files: crates/oya-ui/src/components/timeline/phase_progress.rs. Tests: all phases render, current highlighted, hover shows names. Effort: 1hr. Parent: src-30m","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:02:21.795570325Z","created_by":"lewis","updated_at":"2026-02-01T14:02:21.795570325Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-2lp","title":"ui-leptos: Setup Leptos 0.7 CSR with WASM build pipeline","description":"Setup Leptos 0.7 with client-side rendering (CSR) mode. Configure trunk for WASM builds, add Leptos dependencies, create main app component. Setup hot reload for dev. Files: crates/oya-ui/Trunk.toml, crates/oya-ui/src/main.rs, crates/oya-ui/src/app.rs. Tests: WASM builds, app renders in browser. Effort: 1hr. Parent: src-3s0","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:01:16.948657640Z","created_by":"lewis","updated_at":"2026-02-01T14:01:16.948657640Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-2lz","title":"backend-ws: Implement broadcast to all connected WebSocket clients","description":"Subscribe to EventStoreActor event stream, serialize events with bincode, broadcast to all connected clients. Handle client disconnections gracefully (remove from registry). Files: crates/oya-web/src/websocket/broadcast.rs. Tests: events reach all clients, disconnected clients removed, no memory leaks. Effort: 1hr. Parent: src-2yy","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:00:53.595006883Z","created_by":"lewis","updated_at":"2026-02-01T14:00:53.595006883Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-2nh","title":"Create Makefile with quality gates","description":"Build targets for test, lint, security, mutation testing, CI pipeline","status":"closed","priority":0,"issue_type":"task","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T05:01:12.282879715Z","created_by":"Lewis Prior","updated_at":"2026-01-30T05:03:14.468415426Z","closed_at":"2026-01-30T05:03:14.468415426Z","close_reason":"Project structure, Makefile, and linter config created","source_repo":".","compaction_level":0}
{"id":"src-2oo","title":"ui-dag: DAG visualization component tests","description":"Component tests for DAG viz: render 50 nodes, layout converges, colors update on state change, pan/zoom works, selection works, performance (FPS, memory). Use wasm-bindgen-test. Files: crates/oya-ui/tests/dag_viz_test.rs. Effort: 1hr. Parent: src-1o6","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-01T14:01:43.341710895Z","created_by":"lewis","updated_at":"2026-02-01T14:01:43.341710895Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-2pc","title":"event-sourcing: Implement DurableEventStore with bincode and fsync","description":"## Overview\nImplement DurableEventStore wrapper around SurrealDB for append-only event log with guaranteed durability via fsync and bincode binary serialization.\n\n## Architecture\n**Serialization**: bincode for fast binary encoding\n**Storage**: SurrealDB state_transition table with fsync\n**API**: append_event(), read_events(), replay_from()\n\n## Key Features\n- Append-only writes to state_transition table\n- bincode serialization for BeadEvent structs\n- fsync guarantee on every append\n- Read events by bead_id or time range\n- Support for event replay from checkpoint\n\n## Core Struct\n```rust\npub struct DurableEventStore {\n    db: Arc<Surreal<Any>>,\n}\n\nimpl DurableEventStore {\n    pub async fn append_event(&self, event: &BeadEvent) -> Result<(), Error>;\n    pub async fn read_events(&self, bead_id: &str) -> Result<Vec<BeadEvent>, Error>;\n    pub async fn replay_from(&self, checkpoint_id: &str) -> Result<Vec<BeadEvent>, Error>;\n}\n```\n\n## Files to Create\n- crates/events/src/durable_store.rs - DurableEventStore implementation\n- crates/events/src/types.rs - BeadEvent enum definition\n- crates/events/tests/durable_test.rs - Integration tests\n\n## Success Criteria\n- Event append latency <3ms with fsync\n- Events persisted durably (survives crash)\n- bincode serialization working correctly\n- Read/replay operations functional\n- Integration tests passing\n\n## Dependencies\n- bincode = \"1.3\"\n- surrealdb = \"2.0\"\n\n## Quality Gates\n- Zero unwraps, zero panics\n- Railway-Oriented Programming\n- Proptest for serialization round-trips\n- fsync verified via strace\n\n## CUE Schema\nSchema: .beads/schemas/intent-cli-20260201012642-t73sooov.cue (TO BE CREATED)\n\n## Effort: 4 hours","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T13:56:51.707484463Z","created_by":"lewis","updated_at":"2026-02-01T13:56:51.707484463Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-2tg","title":"[code] Fix type mismatch errors in json/error.rs","description":"Pre-existing type mismatch errors in json/error.rs - expected reference found &UndoError, &RevertError","acceptance_criteria":"1. All type mismatch errors resolved","status":"open","priority":2,"issue_type":"bug","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T16:21:44.010120871Z","created_by":"Lewis Prior","updated_at":"2026-01-30T16:21:44.010120871Z","source_repo":".","compaction_level":0,"labels":["severity:important","smell:code"]}
{"id":"src-2xp","title":"ui-dag: Implement edge rendering with arrows","description":"Render dependency edges as lines/curves with directional arrows. Calculate arrow position at node boundary. Handle edge cases (self-loops, parallel edges). Files: crates/oya-ui/src/components/dag_viz/edge.rs. Tests: edges connect nodes, arrows point correctly, curved edges don't overlap. Effort: 1hr. Parent: src-1o6","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:01:42.388349613Z","created_by":"lewis","updated_at":"2026-02-01T14:01:42.388349613Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-2yy","title":"backend: Implement WebSocket server with bincode binary streaming","description":"Implement WebSocket server for real-time bead event streaming using bincode binary protocol. Broadcasts BeadEvent updates to all connected clients with <50ms latency.\n\n# Architecture\n- WebSocket endpoint at ws://localhost:8080/api/ws\n- bincode binary serialization for BeadEvent messages\n- Broadcast to all connected clients\n- Subscribe to EventStoreActor event stream\n- <50ms latency from event to client delivery\n\n# Success Criteria\n- WebSocket server listening on /api/ws\n- bincode serialization/deserialization working\n- Events broadcast to all connected clients\n- <50ms latency verified\n- Connection handling (connect, disconnect, error recovery)\n\n# Dependencies\n- Stream A: EventStoreActor for event stream\n- Bead src-17z: axum server setup\n\n# Files\n- crates/oya-web/src/websocket.rs - WebSocket server\n- crates/oya-web/tests/websocket_test.rs - Integration tests\n\nEffort: 4hr\nBead ID: intent-cli-20260201020059-hwlgqn0s\nCUE Schema: .beads/schemas/intent-cli-20260201020059-hwlgqn0s.cue","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T13:54:04.354711644Z","created_by":"lewis","updated_at":"2026-02-01T13:54:04.354711644Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-2zm","title":"backend-axum: Implement GET /api/beads/:id endpoint","description":"Implement bead status query endpoint. Extract bead ID from path parameter, query StateManagerActor for current state, return 200 OK with JSON containing: status, phase, events, timestamps. Error handling: 404 Not Found if bead doesn't exist, 503 if StateManagerActor unavailable. Files: crates/oya-web/src/routes/beads.rs. Tests: valid ID returns 200 with state, invalid ID returns 404, actor down returns 503. Effort: 45min. Parent: src-17z","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:00:34.749060609Z","created_by":"lewis","updated_at":"2026-02-01T14:00:34.749060609Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-30m","title":"ui: Implement execution timeline and manual bead controls","description":"Build Step Functions-like execution timeline component with Leptos. Shows phase progress, event history, manual actions (cancel/retry buttons), error visualization, responsive layout.\n\n# Architecture\n- Leptos components for timeline UI\n- Phase progress indicator (15 phases for TDD15)\n- Chronological event history list\n- Manual control buttons (cancel, retry, view logs)\n- Error visualization with stack traces\n- Responsive layout (Tailwind CSS or Leptos styling)\n\n# Timeline Features\n- Phase progress bar with current phase highlighted\n- Event history (scrollable list, newest first)\n- Event timestamps (relative time: \"2m ago\")\n- Event type icons (created, scheduled, running, completed, failed)\n- Click event to expand details\n- Auto-scroll to latest event\n\n# Manual Controls\n- Cancel button (RED, confirm dialog)\n- Retry button (YELLOW, for failed beads only)\n- View logs button (opens log viewer)\n- Download bead state button (JSON export)\n\n# Success Criteria\n- Timeline renders all bead phases\n- Event history updates in real-time\n- Manual controls send correct API requests\n- Error visualization shows stack traces\n- Responsive layout works on 1024px+ screens\n- Confirm dialogs prevent accidental actions\n\n# Dependencies\n- Bead src-17z: axum REST API (for cancel/retry endpoints)\n- Bead src-17r: WebSocket integration (for real-time updates)\n- Bead src-1o6: DAG visualization (timeline shown alongside DAG)\n\n# Files\n- crates/oya-ui/src/components/timeline.rs - Timeline component\n- crates/oya-ui/src/components/phase_progress.rs - Phase indicator\n- crates/oya-ui/src/components/event_list.rs - Event history\n- crates/oya-ui/src/components/controls.rs - Manual control buttons\n- crates/oya-ui/tests/timeline_test.rs - Component tests\n\nEffort: 4hr\nBead ID: intent-cli-20260201020059-n6vt99rk\nCUE Schema: .beads/schemas/intent-cli-20260201020059-n6vt99rk.cue","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-01T13:59:34.155802711Z","created_by":"lewis","updated_at":"2026-02-01T13:59:34.155802711Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-30m.1","title":"timeline-progress: Progress bar component","description":"Implement progress bar component for phase visualization.\n\nTDD15 Phases (0-15):\n0. Setup: Add ProgressBar struct\n1. Red: Test ProgressBar::new() with total steps\n2. Green: Implement ProgressBar::new()\n3. Refactor: Add width configuration\n4. Red: Test ProgressBar::render() with 0% progress\n5. Green: Implement basic ASCII rendering\n6. Refactor: Extract bar characters to constants\n7. Red: Test ProgressBar::update() changes display\n8. Green: Implement progress updates\n9. Refactor: Add percentage calculation\n10. Red: Test ProgressBar with colors (via owo-colors)\n11. Green: Add color support for states\n12. Refactor: Clean up color logic\n13. Red: Test ProgressBar::set_label() for phase name\n14. Green: Add label display\n15. Refactor: Polish formatting, add docs\n\nAcceptance:\n- ProgressBar struct with configurable width\n- ASCII rendering with [=====>    ] style\n- Color support (green=done, yellow=active, grey=pending)\n- Label display for phase name\n- Zero unwraps, zero panics\n- moon run :quick passes","status":"open","priority":2,"issue_type":"feature","estimated_minutes":20,"created_at":"2026-02-01T14:25:20.036640398Z","created_by":"lewis","updated_at":"2026-02-01T14:25:20.036640398Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-30m.1","depends_on_id":"src-30m","type":"parent-child","created_at":"2026-02-01T14:25:20.036640398Z","created_by":"lewis"}]}
{"id":"src-30m.2","title":"timeline-events: Event list component","description":"Implement event list component for detailed phase activity.\n\nTDD15 Phases (0-15):\n0. Setup: Add EventList struct\n1. Red: Test EventList::new() creates empty list\n2. Green: Implement EventList::new()\n3. Refactor: Add capacity pre-allocation\n4. Red: Test EventList::push() adds events\n5. Green: Implement event storage\n6. Refactor: Use VecDeque for efficient operations\n7. Red: Test EventList::render() formats events\n8. Green: Implement basic rendering\n9. Refactor: Extract event formatting\n10. Red: Test event icons (✓, ✗, ⚠, ℹ)\n11. Green: Add EventType enum with icons\n12. Refactor: Clean up icon mapping\n13. Red: Test EventList::filter_by_phase()\n14. Green: Implement filtering\n15. Refactor: Polish API, add docs\n\nAcceptance:\n- EventList struct with VecDeque storage\n- Event struct with type, timestamp, message\n- EventType enum (Success, Error, Warning, Info)\n- Icon-based rendering\n- Phase filtering\n- Zero unwraps, zero panics\n- moon run :quick passes","status":"open","priority":2,"issue_type":"feature","estimated_minutes":25,"created_at":"2026-02-01T14:25:24.554973432Z","created_by":"lewis","updated_at":"2026-02-01T14:25:24.554973432Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-30m.2","depends_on_id":"src-30m","type":"parent-child","created_at":"2026-02-01T14:25:24.554973432Z","created_by":"lewis"}]}
{"id":"src-30m.3","title":"timeline-timestamps: Relative time formatting","description":"Implement relative time formatting for event timestamps.\n\nTDD15 Phases (0-15):\n0. Setup: Add RelativeTime struct\n1. Red: Test RelativeTime::format() with 'just now'\n2. Green: Implement 'just now' (<5s)\n3. Refactor: Add time constants\n4. Red: Test seconds formatting '30s ago'\n5. Green: Add seconds formatting\n6. Refactor: Extract formatting logic\n7. Red: Test minutes formatting '5m ago'\n8. Green: Add minutes formatting\n9. Refactor: Clean up time calculations\n10. Red: Test hours formatting '2h ago'\n11. Green: Add hours formatting\n12. Refactor: Simplify threshold checks\n13. Red: Test days formatting 'yesterday', '3d ago'\n14. Green: Add days formatting with special cases\n15. Refactor: Polish API, add docs\n\nAcceptance:\n- RelativeTime formatter\n- Formats: 'just now', '30s', '5m', '2h', 'yesterday', '3d'\n- Thresholds: <5s, <60s, <60m, <24h, <2d, >=2d\n- Pure functional implementation\n- Zero unwraps, zero panics\n- moon run :quick passes","status":"open","priority":2,"issue_type":"feature","estimated_minutes":15,"created_at":"2026-02-01T14:25:30.806722934Z","created_by":"lewis","updated_at":"2026-02-01T14:25:30.806722934Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-30m.3","depends_on_id":"src-30m","type":"parent-child","created_at":"2026-02-01T14:25:30.806722934Z","created_by":"lewis"}]}
{"id":"src-30m.4","title":"timeline-scroll: Auto-scroll to latest","description":"Implement auto-scroll behavior for terminal output.\n\nTDD15 Phases (0-15):\n0. Setup: Add ScrollState struct\n1. Red: Test ScrollState::new() with viewport height\n2. Green: Implement ScrollState::new()\n3. Refactor: Add viewport configuration\n4. Red: Test ScrollState::should_scroll() logic\n5. Green: Implement scroll detection\n6. Refactor: Extract scroll threshold calculation\n7. Red: Test ScrollState::update() on new events\n8. Green: Implement state updates\n9. Refactor: Clean up state transitions\n10. Red: Test ScrollState::render_window() slices events\n11. Green: Implement windowed rendering\n12. Refactor: Use Range for clean slicing\n13. Red: Test scroll anchor (top/bottom/current)\n14. Green: Add ScrollAnchor enum\n15. Refactor: Polish API, add docs\n\nAcceptance:\n- ScrollState struct with viewport tracking\n- Auto-scroll to bottom on new events\n- Windowed rendering for large event lists\n- ScrollAnchor enum (Top, Bottom, Current)\n- Zero unwraps, zero panics\n- moon run :quick passes","status":"open","priority":2,"issue_type":"feature","estimated_minutes":15,"created_at":"2026-02-01T14:25:36.519168702Z","created_by":"lewis","updated_at":"2026-02-01T14:25:36.519168702Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-30m.4","depends_on_id":"src-30m","type":"parent-child","created_at":"2026-02-01T14:25:36.519168702Z","created_by":"lewis"}]}
{"id":"src-30m.5","title":"timeline-expand: Expand/collapse events","description":"Implement expand/collapse functionality for event details.\n\nTDD15 Phases (0-15):\n0. Setup: Add ExpandableEvent struct\n1. Red: Test ExpandableEvent::new() with summary\n2. Green: Implement ExpandableEvent::new()\n3. Refactor: Add builder pattern for details\n4. Red: Test ExpandableEvent::toggle() changes state\n5. Green: Implement toggle logic\n6. Refactor: Use bool for expanded state\n7. Red: Test ExpandableEvent::render() with collapsed\n8. Green: Implement collapsed rendering (one line)\n9. Refactor: Extract summary formatting\n10. Red: Test ExpandableEvent::render() with expanded\n11. Green: Implement expanded rendering (multi-line)\n12. Refactor: Clean up indentation logic\n13. Red: Test expand indicator (▶/▼)\n14. Green: Add visual indicators\n15. Refactor: Polish API, add docs\n\nAcceptance:\n- ExpandableEvent struct with toggle state\n- Collapsed: single line with ▶ indicator\n- Expanded: multi-line with ▼ and indented details\n- Builder pattern for details\n- Zero unwraps, zero panics\n- moon run :quick passes","status":"open","priority":2,"issue_type":"feature","estimated_minutes":20,"created_at":"2026-02-01T14:25:40.082090464Z","created_by":"lewis","updated_at":"2026-02-01T14:25:40.082090464Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-30m.5","depends_on_id":"src-30m","type":"parent-child","created_at":"2026-02-01T14:25:40.082090464Z","created_by":"lewis"}]}
{"id":"src-30m.6","title":"timeline-tests: Timeline tests","description":"Comprehensive test suite for Timeline feature.\n\nTDD15 Phases (0-15):\n0. Setup: Create tests/timeline_test.rs\n1. Red: Test complete timeline flow end-to-end\n2. Green: Implement integration test\n3. Refactor: Extract test helpers\n4. Red: Test phase transitions\n5. Green: Add transition tests\n6. Refactor: Use test fixtures\n7. Red: Test progress bar updates\n8. Green: Add progress tests\n9. Refactor: Mock time for determinism\n10. Red: Test event filtering and rendering\n11. Green: Add event tests\n12. Refactor: Clean up assertions\n13. Red: Test error cases (invalid phase, etc)\n14. Green: Add error handling tests\n15. Refactor: Polish suite, add docs\n\nTest Coverage:\n- Timeline creation and initialization\n- Phase transitions and tracking\n- Progress bar rendering at 0%, 50%, 100%\n- Event list operations (push, filter, render)\n- Relative time formatting across all ranges\n- Scroll behavior with large event lists\n- Expand/collapse state management\n- Error cases and edge conditions\n\nAcceptance:\n- All components tested\n- Edge cases covered\n- moon run :test passes\n- moon run :coverage shows >90%\n- Zero unwraps, zero panics","status":"open","priority":2,"issue_type":"test","estimated_minutes":30,"created_at":"2026-02-01T14:25:46.511758281Z","created_by":"lewis","updated_at":"2026-02-01T14:25:46.511758281Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-30m.6","depends_on_id":"src-30m","type":"parent-child","created_at":"2026-02-01T14:25:46.511758281Z","created_by":"lewis"}]}
{"id":"src-30m.7","title":"timeline-struct: Timeline component structure","description":"Create basic Timeline component structure for execution visualization.\n\nTDD15 Phases (0-15):\n0. Setup: Add Timeline struct with Display trait\n1. Red: Test Timeline::new() returns empty timeline\n2. Green: Implement Timeline::new()\n3. Refactor: Add builder pattern if needed\n4. Red: Test Timeline::render() formats output\n5. Green: Implement basic render()\n6. Refactor: Extract rendering helpers\n7. Red: Test Timeline with phases enum\n8. Green: Add ExecutionPhase enum\n9. Refactor: Organize phase-related code\n10. Red: Test Timeline::set_current_phase()\n11. Green: Implement phase tracking\n12. Refactor: Clean up phase state management\n13. Red: Test Timeline::duration() calculation\n14. Green: Implement duration tracking\n15. Refactor: Polish API, add docs\n\nAcceptance:\n- Timeline struct with phase tracking\n- Basic rendering via Display trait\n- Duration calculation\n- Zero unwraps, zero panics\n- moon run :quick passes","status":"open","priority":2,"issue_type":"feature","estimated_minutes":15,"created_at":"2026-02-01T14:26:18.326746694Z","created_by":"lewis","updated_at":"2026-02-01T14:26:18.326746694Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-30m.7","depends_on_id":"src-30m","type":"parent-child","created_at":"2026-02-01T14:26:18.326746694Z","created_by":"lewis"}]}
{"id":"src-30m.8","title":"timeline-phases: Phase data model","description":"Implement phase data model for execution stages.\n\nTDD15 Phases (0-15):\n0. Setup: Define Phase struct\n1. Red: Test Phase::new() with timestamp\n2. Green: Implement Phase::new()\n3. Refactor: Add phase name validation\n4. Red: Test Phase::duration() between phases\n5. Green: Implement duration calculation\n6. Refactor: Use chrono for time handling\n7. Red: Test PhaseTransition events\n8. Green: Add PhaseTransition enum\n9. Refactor: Clean up transition logic\n10. Red: Test phase status (running/complete/failed)\n11. Green: Add PhaseStatus enum\n12. Refactor: Organize status-related code\n13. Red: Test phase metadata (logs, artifacts)\n14. Green: Add metadata storage\n15. Refactor: Polish API, add docs\n\nAcceptance:\n- Phase struct with timestamps\n- PhaseTransition and PhaseStatus enums\n- Duration calculation between phases\n- Metadata storage (logs, artifacts)\n- Zero unwraps, zero panics\n- moon run :quick passes","status":"open","priority":2,"issue_type":"feature","estimated_minutes":15,"created_at":"2026-02-01T14:26:23.381511387Z","created_by":"lewis","updated_at":"2026-02-01T14:26:23.381511387Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-30m.8","depends_on_id":"src-30m","type":"parent-child","created_at":"2026-02-01T14:26:23.381511387Z","created_by":"lewis"}]}
{"id":"src-312","title":"ui-ws: Setup WebSocket client for WASM environment","description":"Setup gloo-net WebSocket client for WASM. Implement connection to ws://localhost:8080/api/ws, handle connection lifecycle (connect, disconnect, error). Create WebSocket context for sharing across components. Files: crates/oya-ui/src/websocket/client.rs. Tests: WS connects from WASM, disconnect handled. Effort: 1hr. Parent: src-3s0","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:01:17.653348608Z","created_by":"lewis","updated_at":"2026-02-01T14:01:17.653348608Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-35d","title":"ui-ws-integration: Deserialize bincode BeadEvent messages","description":"Receive binary WebSocket messages, deserialize with bincode into BeadEvent enum. Handle all event types: Created, Scheduled, Started, Completed, Failed, Cancelled. Log deserialization errors. Files: crates/oya-ui/src/events/deserialize.rs. Tests: all event types deserialize, malformed messages logged. Effort: 45min. Parent: src-17r","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:02:00.694059366Z","created_by":"lewis","updated_at":"2026-02-01T14:02:00.694059366Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-36j","title":"backend-ws: Implement connection error handling and recovery","description":"Handle WebSocket errors: client disconnect, network errors, serialization failures. Log errors with tracing. Implement graceful degradation (continue serving other clients if one fails). Files: crates/oya-web/src/websocket/errors.rs. Tests: client disconnect doesn't crash server, serialization error logged, other clients unaffected. Effort: 45min. Parent: src-2yy","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-01T14:00:53.825510243Z","created_by":"lewis","updated_at":"2026-02-01T14:00:53.825510243Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-37t","title":"backend-axum: Setup axum router with tower middleware stack","description":"Setup basic axum router with tower middleware layers for the REST API server.\n\n# Middleware Stack\n1. CORS: Allow Tauri origin (http://tauri.localhost)\n2. Compression: gzip and brotli encoding\n3. Tracing: Request/response logging with tracing-subscriber\n4. Timeout: 30s request timeout\n\n# Success Criteria\n- axum Router initialized with all middleware\n- CORS headers present in responses\n- Compression works (Accept-Encoding: gzip)\n- Tracing logs requests/responses\n- Timeout triggers on slow requests (>30s)\n\n# Files\n- crates/oya-web/src/lib.rs - Server initialization\n- crates/oya-web/src/middleware.rs - Middleware configuration\n\n# Dependencies\nParent bead: src-17z (axum REST API)\n\nEffort: 1hr\nAtomic decomposition of axum REST API","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:00:14.275034090Z","created_by":"lewis","updated_at":"2026-02-01T14:00:14.275034090Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-39w","title":"ui-tauri: Initialize Tauri 2.0 project structure","description":"Create Tauri 2.0 project with cargo tauri init. Configure tauri.conf.json: app identifier, window size (1280x720), permissions, CSP policy. Setup src-tauri directory structure. Files: crates/oya-ui/src-tauri/tauri.conf.json, crates/oya-ui/src-tauri/Cargo.toml. Tests: tauri app builds, window opens. Effort: 1hr. Parent: src-3s0","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:01:16.711255436Z","created_by":"lewis","updated_at":"2026-02-01T14:01:16.711255436Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-3a7","title":"backend-ws: Setup WebSocket server with axum integration","description":"Setup WebSocket endpoint at /api/ws using axum WebSocket support. Handle WebSocket upgrade, connection lifecycle (connect, ping/pong, disconnect), maintain client registry. Files: crates/oya-web/src/websocket/server.rs. Tests: client can connect, ping/pong works, disconnect cleans up. Effort: 1hr. Parent: src-2yy","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:00:53.135771934Z","created_by":"lewis","updated_at":"2026-02-01T14:00:53.135771934Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-3bi","title":"idempotency: Implement IdempotentExecutor with cache and DB storage","description":"## Overview\nImplement IdempotentExecutor that ensures exactly-once execution via idempotency keys. Combines in-memory HashMap cache with SurrealDB persistence.\n\n## Architecture\n**Cache**: HashMap<Uuid, ExecutionResult> with RwLock\n**Persistence**: SurrealDB idempotency_key table\n**Guarantee**: Same key → Return cached result (no re-execution)\n\n## Core API\n```rust\npub struct IdempotentExecutor {\n    cache: Arc<RwLock<HashMap<Uuid, ExecutionResult>>>,\n    db: Arc<Surreal<Any>>,\n}\n\nimpl IdempotentExecutor {\n    pub async fn execute<F, T>(&self, key: Uuid, f: F) -> Result<T, Error>\n    where F: FnOnce() -> Result<T, Error>;\n}\n```\n\n## Execution Flow\n1. Check in-memory cache (fast path)\n2. If miss, check DB (durable storage)\n3. If miss, execute function\n4. Store result in cache + DB\n5. Return result\n\n## Files to Create\n- crates/workflow/src/idempotency/executor.rs - IdempotentExecutor\n- crates/workflow/src/idempotency/cache.rs - Cache wrapper\n- crates/workflow/tests/executor_test.rs - Integration tests\n\n## Success Criteria\n- Cache hit latency <1ms\n- DB hit latency <10ms\n- Duplicate execution prevented (100% guarantee)\n- Integration tests: same input = same result\n- Cache eviction policy working\n\n## Dependencies\n- tokio with sync features for RwLock\n- surrealdb for persistence\n\n## Quality Gates\n- Zero unwraps, zero panics\n- Railway-Oriented Programming\n- Proptest for idempotency guarantees\n- Thread-safe (concurrent execution safe)\n\n## CUE Schema\nSchema: .beads/schemas/intent-cli-20260201012642-z9lgvyom.cue (TO BE CREATED)\n\n## Effort: 4 hours","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T13:57:30.527433837Z","created_by":"lewis","updated_at":"2026-02-01T13:57:30.527433837Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-3cy","title":"ui-ws-integration: Update DAG state reactively with Leptos signals","description":"On BeadEvent received, update DAG state using Leptos create_signal. Map events to state changes: Created adds node, Scheduled/Started/Completed/Failed/Cancelled update node color. Trigger DAG re-render. Files: crates/oya-ui/src/state/dag_state.rs. Tests: events update signals, DAG re-renders, latency <50ms. Effort: 1hr. Parent: src-17r","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:02:00.929083579Z","created_by":"lewis","updated_at":"2026-02-01T14:02:00.929083579Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-3ds","title":"backend-ws: WebSocket integration tests with latency measurement","description":"Integration tests: connect multiple clients, send events from EventStoreActor, verify all clients receive within <50ms, test concurrent connections (100 clients), test disconnect/reconnect. Measure p50/p95/p99 latency. Files: crates/oya-web/tests/websocket_test.rs. Use tungstenite for WS client. Effort: 1hr. Parent: src-2yy","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-01T14:00:54.055127528Z","created_by":"lewis","updated_at":"2026-02-01T14:00:54.055127528Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-3lp","title":"Add hello world command to OYA CLI","description":"Test bead to verify OYA pipeline works end-to-end. Add simple 'hello' subcommand that prints 'Hello from OYA Storm Goddess'.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-01T06:15:11.854113061Z","created_by":"lewis","updated_at":"2026-02-01T06:32:30.949372987Z","closed_at":"2026-02-01T06:32:30.949360017Z","close_reason":"done","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-3ls","title":"idempotency: Generate deterministic UUID v5 keys from bead+input","description":"## Overview\nImplement deterministic UUID v5 key generation for idempotency. Same bead + input always produces same UUID, preventing duplicate execution.\n\n## Algorithm\n**UUID v5**: Deterministic key from namespace + name\n**Namespace**: UUID v5 from bead_id\n**Name**: SHA-256 hash of input JSON\n\n## Key Generation Flow\n```rust\npub fn idempotency_key(bead_id: &str, input: &serde_json::Value) -> Uuid {\n    let namespace = Uuid::new_v5(&Uuid::NAMESPACE_OID, bead_id.as_bytes());\n    let input_hash = sha256(serde_json::to_string(input));\n    Uuid::new_v5(&namespace, input_hash.as_bytes())\n}\n```\n\n## Properties\n- **Deterministic**: Same input → Same UUID\n- **Unique**: Different inputs → Different UUIDs\n- **Collision-resistant**: SHA-256 hash collision resistance\n\n## Files to Create\n- crates/workflow/src/idempotency/keys.rs - UUID v5 generation\n- crates/workflow/src/idempotency/types.rs - IdempotencyKey wrapper\n- crates/workflow/tests/idempotency_test.rs - Property tests\n\n## Success Criteria\n- UUID v5 generation working\n- Same input produces same key (100% deterministic)\n- Different inputs produce different keys\n- Proptest validates determinism\n\n## Dependencies\n- uuid = { version = \"1.0\", features = [\"v5\"] }\n- sha2 = \"0.10\" for SHA-256 hashing\n\n## Quality Gates\n- Zero unwraps, zero panics\n- Proptest for determinism\n- 1M+ iterations without collision\n\n## CUE Schema\nSchema: .beads/schemas/intent-cli-20260201012642-2sgtpztz.cue (TO BE CREATED)\n\n## Effort: 2 hours","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T13:57:17.960505707Z","created_by":"lewis","updated_at":"2026-02-01T13:57:17.960505707Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-3rx","title":"backend-axum: Implement POST /api/beads/:id/cancel endpoint","description":"Implement bead cancellation endpoint. Extract bead ID, send cancel message to SchedulerActor, wait for acknowledgment, return 200 OK. Error handling: 404 if bead not found, 409 Conflict if already completed/cancelled, 503 if actor unavailable. Files: crates/oya-web/src/routes/beads.rs. Tests: cancel running bead returns 200, cancel completed returns 409, cancel nonexistent returns 404. Effort: 45min. Parent: src-17z","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:00:34.974957368Z","created_by":"lewis","updated_at":"2026-02-01T14:00:34.974957368Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-3s0","title":"ui: Implement Tauri 2.0 scaffold with Leptos CSR frontend","description":"Create Tauri 2.0 desktop app with Leptos client-side rendering (CSR) frontend. Sets up project structure, build pipeline, HTTP client, and WebSocket connection to axum backend.\n\n# Architecture\n- Tauri 2.0 native desktop window (cross-platform)\n- Leptos 0.7 CSR (WASM frontend)\n- HTTP client for REST API calls\n- WebSocket client for real-time updates\n- Build pipeline (Rust nightly for WASM)\n\n# Success Criteria\n- Tauri app launches successfully\n- Leptos frontend renders in window\n- HTTP client connects to axum backend\n- WebSocket client establishes connection\n- Build pipeline works (dev + release modes)\n\n# Dependencies\n- Bead src-17z: axum REST API\n- Bead src-2yy: WebSocket server\n\n# Files\n- crates/oya-ui/src-tauri/main.rs - Tauri wrapper\n- crates/oya-ui/src/app.rs - Leptos frontend app\n- crates/oya-ui/src/websocket.rs - WebSocket client\n- crates/oya-ui/Cargo.toml - Frontend dependencies\n- crates/oya-ui/tauri.conf.json - Tauri configuration\n\nEffort: 4hr\nBead ID: intent-cli-20260201020059-o7uvwmxl\nCUE Schema: .beads/schemas/intent-cli-20260201020059-o7uvwmxl.cue","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T13:54:14.722567199Z","created_by":"lewis","updated_at":"2026-02-01T13:54:14.722567199Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-3s0.1","title":"Setup Tailwind CSS with Leptos class helpers","description":"Configure Tailwind CSS v4 for Leptos with utility classes and responsive design.\n\n# Architecture\n- Tailwind CSS v4 via CDN (CSR-friendly)\n- tailwind.config.js with custom theme\n- Leptos class! macro for dynamic classes\n- Responsive breakpoints (sm, md, lg, xl)\n- Dark mode support (class-based)\n\n# Files to Create\n- crates/oya-ui/tailwind.config.js (theme config)\n- crates/oya-ui/public/styles/main.css (Tailwind imports)\n- crates/oya-ui/src/utils/classes.rs (class helper functions)\n- crates/oya-ui/src/components/ui/mod.rs (UI primitives)\n- crates/oya-ui/src/components/ui/button.rs (Button component)\n- Update index.html (Tailwind CSS link)\n\n# Success Criteria\n- Tailwind utilities work in components\n- Responsive design works (mobile-first)\n- Dark mode toggle works\n- class! macro compiles dynamic classes\n- Button component has variants (primary, secondary)\n- trunk serve shows styled components\n- No FOUC (flash of unstyled content)\n\n# Dependencies\n- Previous bead: leptos-signals\n- Tailwind CSS v4 CLI (npm install -D tailwindcss)\n\nEffort: 20min","status":"open","priority":2,"issue_type":"feature","estimated_minutes":20,"created_at":"2026-02-01T14:25:17.077554883Z","created_by":"lewis","updated_at":"2026-02-01T14:25:17.077554883Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-3s0.1","depends_on_id":"src-3s0","type":"parent-child","created_at":"2026-02-01T14:25:17.077554883Z","created_by":"lewis"}]}
{"id":"src-3s0.2","title":"Initialize Leptos 0.7 CSR project structure","description":"Create minimal Leptos 0.7 client-side rendering project with WASM target.\n\n# Architecture\n- Cargo workspace member: crates/oya-ui\n- Leptos 0.7 with CSR feature only (no SSR)\n- WASM target (wasm32-unknown-unknown)\n- Minimal index.html entry point\n- lib.rs with re-exports\n\n# Files to Create\n- crates/oya-ui/Cargo.toml (leptos = 0.7, CSR features)\n- crates/oya-ui/src/lib.rs (re-export app module)\n- crates/oya-ui/index.html (minimal WASM loader)\n- crates/oya-ui/README.md (build instructions)\n\n# Success Criteria\n- cargo check --target wasm32-unknown-unknown passes\n- Leptos 0.7 dependency correctly configured\n- CSR feature enabled, SSR disabled\n- Project compiles without errors\n- README documents dev workflow\n\n# Dependencies\n- Add to workspace Cargo.toml\n- Install wasm32-unknown-unknown target","status":"open","priority":1,"issue_type":"feature","estimated_minutes":15,"created_at":"2026-02-01T14:26:21.125885357Z","created_by":"lewis","updated_at":"2026-02-01T14:26:21.125885357Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-3s0.2","depends_on_id":"src-3s0","type":"parent-child","created_at":"2026-02-01T14:26:21.125885357Z","created_by":"lewis"}]}
{"id":"src-3s0.3","title":"Configure Trunk for WASM builds and hot reload","description":"Setup Trunk build system for Leptos WASM compilation with dev server and hot reload.\n\n# Architecture\n- Trunk.toml configuration\n- WASM optimization settings\n- Dev server with hot reload\n- Public assets directory structure\n- Release build optimization\n\n# Files to Create\n- crates/oya-ui/Trunk.toml (build config)\n- crates/oya-ui/.cargo/config.toml (WASM settings)\n- crates/oya-ui/public/.gitkeep (static assets)\n- Update crates/oya-ui/README.md (trunk commands)\n\n# Success Criteria\n- trunk serve launches dev server\n- Hot reload works on file changes\n- trunk build --release produces optimized WASM\n- WASM size < 500KB gzipped for hello world\n- No console errors in browser\n\n# Dependencies\n- trunk CLI installed (cargo install trunk)\n- wasm-bindgen-cli installed\n- Previous bead: src-3s0.2","status":"open","priority":1,"issue_type":"feature","estimated_minutes":15,"created_at":"2026-02-01T14:26:29.786455991Z","created_by":"lewis","updated_at":"2026-02-01T14:26:29.786455991Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-3s0.3","depends_on_id":"src-3s0","type":"parent-child","created_at":"2026-02-01T14:26:29.786455991Z","created_by":"lewis"}]}
{"id":"src-3s0.4","title":"Create main App component with functional patterns","description":"Implement root Leptos App component using functional Rust patterns and zero-unwrap rules.\n\n# Architecture\n- app.rs module with App component\n- Functional error handling (Result<_, LeptosError>)\n- Component composition pattern\n- Props with proper validation\n- Zero unwraps, zero panics\n\n# Files to Create\n- crates/oya-ui/src/app.rs (main App component)\n- crates/oya-ui/src/components/mod.rs (component registry)\n- crates/oya-ui/src/error.rs (LeptosError type)\n- Update src/lib.rs (export App)\n\n# Success Criteria\n- App component renders without errors\n- No unwrap() or expect() calls\n- All errors use Result<T, LeptosError>\n- Props validation with proper error messages\n- moon run :quick passes\n- Browser console shows no errors\n\n# Dependencies\n- Previous bead: src-3s0.3\n- Follows CLAUDE.md code quality rules","status":"open","priority":1,"issue_type":"feature","estimated_minutes":20,"created_at":"2026-02-01T14:26:39.429293942Z","created_by":"lewis","updated_at":"2026-02-01T14:26:39.429293942Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-3s0.4","depends_on_id":"src-3s0","type":"parent-child","created_at":"2026-02-01T14:26:39.429293942Z","created_by":"lewis"}]}
{"id":"src-3s0.5","title":"Setup Leptos router with CSR navigation","description":"Configure leptos_router for client-side navigation with route guards and error boundaries.\n\n# Architecture\n- leptos_router 0.7 dependency\n- Route definitions (/, /tasks, /task/:slug)\n- Navigation components (NavBar, Link)\n- Route guards for validation\n- Error boundaries for 404/errors\n\n# Files to Create\n- crates/oya-ui/src/router.rs (route definitions)\n- crates/oya-ui/src/components/nav.rs (NavBar component)\n- crates/oya-ui/src/pages/mod.rs (page components registry)\n- crates/oya-ui/src/pages/home.rs (home page)\n- crates/oya-ui/src/pages/not_found.rs (404 page)\n- Update Cargo.toml (leptos_router dep)\n\n# Success Criteria\n- Client-side navigation works without reload\n- Route transitions are instant\n- 404 page renders for invalid routes\n- NavBar highlights active route\n- Browser history works (back/forward)\n- moon run :quick passes\n\n# Dependencies\n- Previous bead: src-3s0.4\n- leptos_router = 0.7","status":"open","priority":2,"issue_type":"feature","estimated_minutes":20,"created_at":"2026-02-01T14:26:48.498631140Z","created_by":"lewis","updated_at":"2026-02-01T14:26:48.498631140Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-3s0.5","depends_on_id":"src-3s0","type":"parent-child","created_at":"2026-02-01T14:26:48.498631140Z","created_by":"lewis"}]}
{"id":"src-3s0.6","title":"Create reactive state management with Leptos signals","description":"Implement reactive state management using Leptos signals, memos, and effects with functional patterns.\n\n# Architecture\n- Global state with create_rw_signal\n- Derived state with create_memo\n- Side effects with create_effect\n- LocalStorage persistence\n- Zero unwraps, functional error handling\n\n# Files to Create\n- crates/oya-ui/src/state/mod.rs (state management)\n- crates/oya-ui/src/state/task_state.rs (task state signals)\n- crates/oya-ui/src/state/persistence.rs (localStorage wrapper)\n- crates/oya-ui/src/hooks/mod.rs (custom hooks)\n- crates/oya-ui/src/hooks/use_tasks.rs (task management hook)\n\n# Success Criteria\n- Reactive updates work across components\n- State persists to localStorage\n- Memos prevent unnecessary recomputation\n- Effects cleanup properly on unmount\n- No unwrap() or expect() calls\n- moon run :quick passes\n- State updates trigger minimal re-renders\n\n# Dependencies\n- Previous bead: src-3s0.5\n- gloo-storage for localStorage (WASM-compatible)","status":"open","priority":2,"issue_type":"feature","estimated_minutes":25,"created_at":"2026-02-01T14:26:57.422015236Z","created_by":"lewis","updated_at":"2026-02-01T14:26:57.422015236Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-3s0.6","depends_on_id":"src-3s0","type":"parent-child","created_at":"2026-02-01T14:26:57.422015236Z","created_by":"lewis"}]}
{"id":"src-3sn","title":"ui-timeline: Implement chronological event history list","description":"Build scrollable event list component (newest first). Show event type icons, timestamps (relative: '2m ago'), event details. Click to expand full details. Auto-scroll to latest on new event. Files: crates/oya-ui/src/components/timeline/event_list.rs. Tests: events render, scroll works, auto-scroll, expand/collapse. Effort: 1hr. Parent: src-30m","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:02:22.032313694Z","created_by":"lewis","updated_at":"2026-02-01T14:02:22.032313694Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-3uc","title":"ui-timeline: Implement responsive layout with Tailwind CSS","description":"Apply responsive layout to timeline: side-by-side with DAG on 1280px+, stacked on smaller screens. Use Tailwind CSS utility classes. Ensure timeline scrolls independently from DAG. Files: crates/oya-ui/src/components/timeline.rs, styles.css. Tests: layout responsive, scroll independent. Effort: 45min. Parent: src-30m","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-01T14:02:22.751774606Z","created_by":"lewis","updated_at":"2026-02-01T14:02:22.751774606Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-3v2","title":"ui-dag: Implement node rendering with state-based colors","description":"Render bead nodes as circles/rounded rects with state-based colors: pending=gray, scheduled=yellow, running=blue, completed=green, failed=red, cancelled=orange. Include bead ID label. Handle node selection (highlight border). Files: crates/oya-ui/src/components/dag_viz/node.rs. Tests: all states render correctly, selection works, labels visible. Effort: 1hr. Parent: src-1o6","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:01:42.153472397Z","created_by":"lewis","updated_at":"2026-02-01T14:01:42.153472397Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-3w0","title":"ui-http: Implement HTTP client for REST API calls","description":"Setup reqwasm or gloo-net HTTP client for REST API calls from WASM. Implement wrapper functions for: POST /api/workflows, GET /api/beads/:id, POST /api/beads/:id/cancel. Handle CORS, timeouts, errors. Files: crates/oya-ui/src/api/client.rs, crates/oya-ui/src/api/types.rs. Tests: API calls work from WASM, errors handled. Effort: 1hr. Parent: src-3s0","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:01:17.413558928Z","created_by":"lewis","updated_at":"2026-02-01T14:01:17.413558928Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-560","title":"ui-tauri: Integration tests for Tauri + Leptos setup","description":"Integration tests: Tauri app launches, Leptos WASM loads, HTTP client connects to backend, WebSocket connects, window responds to events. Use tauri-driver for UI automation. Files: crates/oya-ui/tests/integration_test.rs. Effort: 1hr. Parent: src-3s0","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-01T14:01:17.889564046Z","created_by":"lewis","updated_at":"2026-02-01T14:01:17.889564046Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-5v0","title":"[nuoc] job-resume causes double state transition","status":"closed","priority":1,"issue_type":"bug","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T04:39:08.606892354Z","created_by":"Lewis Prior","updated_at":"2026-02-01T06:34:54.694676461Z","closed_at":"2026-02-01T06:34:54.694667261Z","close_reason":"Not relevant to OYA Rust project - nushell code removed","source_repo":".","compaction_level":0}
{"id":"src-6fc","title":"[nuoc] ctx-basic.nu imports missing ctx.nu file","status":"closed","priority":0,"issue_type":"bug","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T04:39:08.161607739Z","created_by":"Lewis Prior","updated_at":"2026-02-01T06:34:54.581247240Z","closed_at":"2026-02-01T06:34:54.581233861Z","close_reason":"Not relevant to OYA Rust project - nushell code removed","source_repo":".","compaction_level":0}
{"id":"src-767","title":"[nuoc] virtual_object_state table never initialized","status":"closed","priority":0,"issue_type":"bug","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T04:39:08.224208358Z","created_by":"Lewis Prior","updated_at":"2026-02-01T06:34:54.600716686Z","closed_at":"2026-02-01T06:34:54.600705876Z","close_reason":"Not relevant to OYA Rust project - nushell code removed","source_repo":".","compaction_level":0}
{"id":"src-8fb","title":"[test] State - workspace creation failure","description":"Red Queen test: Simulate workspace creation failure by making the workspaces directory read-only before spawn attempts to create workspace. Expected behavior: Cleanup_and_rollback_state function handles partial state, workspace is removed, bead status rolls back to 'open'.","acceptance_criteria":"- Workspace is cleaned up\n- Bead status is reset to 'open'\n- Recovery log records the failure\n- No orphaned directories remain","status":"open","priority":2,"issue_type":"bug","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T14:45:36.180297708Z","created_by":"Lewis Prior","updated_at":"2026-01-30T14:45:36.180297708Z","source_repo":".","compaction_level":0}
{"id":"src-8uf","title":"Create GritQL pattern utilities","description":"Pattern parsing, validation, command builders. Files: pkg/gritql/*.go","status":"closed","priority":2,"issue_type":"task","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T05:01:15.370740530Z","created_by":"Lewis Prior","updated_at":"2026-01-30T05:05:26.943888489Z","closed_at":"2026-01-30T05:05:26.943888489Z","close_reason":"Closed","source_repo":".","compaction_level":0}
{"id":"src-9h0","title":"[Red Queen] MAJOR: transition-backing-off: echo fail","status":"closed","priority":1,"issue_type":"bug","owner":"priorlewis43@gmail.com","created_at":"2026-01-29T13:11:03.947630504Z","created_by":"Lewis Prior","updated_at":"2026-01-30T04:11:40.191328790Z","closed_at":"2026-01-30T04:11:40.191328790Z","close_reason":"Tests are false positives: P0 test passes (exit 0), P1 tests use 'echo fail' which always succeeds","source_repo":".","compaction_level":0}
{"id":"src-c16","title":"[nuoc] Task failure bypasses job backing-off state","status":"closed","priority":1,"issue_type":"bug","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T04:39:08.374464326Z","created_by":"Lewis Prior","updated_at":"2026-02-01T06:34:54.635969758Z","closed_at":"2026-02-01T06:34:54.635961358Z","close_reason":"Not relevant to OYA Rust project - nushell code removed","source_repo":".","compaction_level":0}
{"id":"src-c1j","title":"Initialize Go module and project structure","description":"Create go.mod, .gitignore, directory structure for vertical slices","status":"closed","priority":0,"issue_type":"task","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T05:01:11.479470928Z","created_by":"Lewis Prior","updated_at":"2026-01-30T05:03:14.466765988Z","closed_at":"2026-01-30T05:03:14.466765988Z","close_reason":"Project structure, Makefile, and linter config created","source_repo":".","compaction_level":0}
{"id":"src-ccx","title":"Implement CommandExecutor interface","description":"Core platform layer for executing external commands (grit, turbolift). File: internal/platform/executor/executor.go","status":"closed","priority":1,"issue_type":"task","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T05:01:13.684137443Z","created_by":"Lewis Prior","updated_at":"2026-01-30T05:04:39.921895594Z","closed_at":"2026-01-30T05:04:39.921895594Z","close_reason":"CommandExecutor and binary detector implemented","source_repo":".","compaction_level":0}
{"id":"src-ct8","title":"[test] Recovery log format","description":"Red Queen test: Trigger multiple spawn failures to verify recovery log format. Expected behavior: Each failure creates a timestamped entry in .zjj/recovery.log with bead ID and reason. Verify log entries have RFC3339 timestamps and structured messages.","acceptance_criteria":"- Multiple entries in .zjj/recovery.log\n- Each entry has RFC3339 timestamp\n- Entries include bead ID and failure reason","status":"open","priority":2,"issue_type":"bug","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T14:45:48.234791638Z","created_by":"Lewis Prior","updated_at":"2026-01-30T14:45:48.234791638Z","source_repo":".","compaction_level":0}
{"id":"src-cv7","title":"[test] Cross-command - rollback consistency","description":"Red Queen test: Test rollback logic consistency across different failure scenarios. Verify that cleanup_and_rollback_state correctly handles workspace cleanup and bead status reset regardless of where the failure occurs in the spawn workflow.","acceptance_criteria":"- Rollback behavior is consistent\n- Workspace is cleaned in all failure scenarios\n- Bead status is reset to 'open'\n- Recovery log entries are created appropriately","status":"open","priority":2,"issue_type":"bug","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T14:45:59.105148925Z","created_by":"Lewis Prior","updated_at":"2026-01-30T14:45:59.105148925Z","source_repo":".","compaction_level":0}
{"id":"src-d5s","title":"[code] Fix const function .clone() error in revert/types.rs","description":"Pre-existing compilation error in revert/types.rs:27:45 - cannot call non-const method .clone() in constant functions","acceptance_criteria":"1. Build succeeds with zero errors","status":"open","priority":2,"issue_type":"bug","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T16:21:35.142965716Z","created_by":"Lewis Prior","updated_at":"2026-01-30T16:21:35.142965716Z","source_repo":".","compaction_level":0,"labels":["severity:important","smell:code"]}
{"id":"src-d8g","title":"[Red Queen] MAJOR: transition-suspended: echo fail","status":"closed","priority":1,"issue_type":"bug","owner":"priorlewis43@gmail.com","created_at":"2026-01-29T13:11:03.824021470Z","created_by":"Lewis Prior","updated_at":"2026-01-30T04:11:40.191916148Z","closed_at":"2026-01-30T04:11:40.191916148Z","close_reason":"Tests are false positives: P0 test passes (exit 0), P1 tests use 'echo fail' which always succeeds","source_repo":".","compaction_level":0}
{"id":"src-def","title":"Create Turbolift campaign utilities","description":"Campaign management, repo loading, command builders. Files: pkg/turbolift/*.go","status":"closed","priority":2,"issue_type":"task","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T05:01:16.250012853Z","created_by":"Lewis Prior","updated_at":"2026-01-30T05:05:28.684019971Z","closed_at":"2026-01-30T05:05:28.684019971Z","close_reason":"Closed","source_repo":".","compaction_level":0}
{"id":"src-drp","title":"ui-timeline: Timeline component integration tests","description":"Integration tests for timeline: render phases, show events, control buttons work (cancel/retry/logs), errors display, layout responsive, real-time updates from WebSocket. Files: crates/oya-ui/tests/timeline_test.rs. Effort: 1hr. Parent: src-30m","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-01T14:02:22.994108623Z","created_by":"lewis","updated_at":"2026-02-01T14:02:22.994108623Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-ds1","title":"[test] State - bead database corruption","description":"Red Queen test: Corrupt the .beads/issues.jsonl file with invalid JSON during spawn's bead status update phase. Expected behavior: Error handling catches database error, triggers rollback logic, workspace is cleaned.","acceptance_criteria":"- Database error is properly caught\n- Rollback logic is triggered\n- Workspace is cleaned\n- Recovery log records the error","status":"open","priority":2,"issue_type":"bug","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T14:45:41.500946969Z","created_by":"Lewis Prior","updated_at":"2026-01-30T14:45:41.500946969Z","source_repo":".","compaction_level":0}
{"id":"src-ec9","title":"Configure golangci-lint with funlen=40","description":"Create .golangci.yml with comprehensive linters and 40-line function limit","status":"closed","priority":0,"issue_type":"task","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T05:01:12.946509175Z","created_by":"Lewis Prior","updated_at":"2026-01-30T05:03:14.469248660Z","closed_at":"2026-01-30T05:03:14.469248660Z","close_reason":"Project structure, Makefile, and linter config created","source_repo":".","compaction_level":0}
{"id":"src-ghl","title":"Test bead for spawn verification","status":"open","priority":4,"issue_type":"task","created_at":"2026-02-01T07:38:22.626549646Z","created_by":"lewis","updated_at":"2026-02-01T07:38:22.626549646Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-i9m","title":"Create example patterns and integration tests","description":"Add .grit/patterns/ examples and end-to-end tests","status":"closed","priority":3,"issue_type":"task","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T05:01:19.736920580Z","created_by":"Lewis Prior","updated_at":"2026-01-30T05:46:04.460274099Z","closed_at":"2026-01-30T05:46:04.460274099Z","close_reason":"Created 7 production-ready GritQL patterns with comprehensive documentation, integration tests, examples, and validation script","source_repo":".","compaction_level":0}
{"id":"src-jh0","title":"Create GoFR main entry point","description":"Wire up all features with GoFR framework. File: cmd/gofr-migrate/main.go","status":"closed","priority":3,"issue_type":"task","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T05:01:18.267936461Z","created_by":"Lewis Prior","updated_at":"2026-01-30T05:09:28.518276575Z","closed_at":"2026-01-30T05:09:28.518276575Z","close_reason":"Main application entry point created and building successfully","source_repo":".","compaction_level":0}
{"id":"src-l7z","title":"Verify OYA naming convention across entire codebase - hostile sweep for any remaining 'factory' references","description":"Completed hostile verification and renaming of entire codebase from 'factory' to 'oya'. Changes: 1) Renamed crates/factory to crates/pipeline and oya-factory to oya-pipeline 2) Updated all Cargo.toml references 3) Fixed all source code imports 4) Renamed .factory directory to .oya 5) Updated environment variable FACTORY_ACTOR to OYA_ACTOR 6) Fixed all documentation files 7) Created hostile verification script at scripts/verify-oya-naming.sh 8) Verification passes: no 'factory' references found in codebase (excluding vendor/node_modules)","status":"closed","priority":2,"issue_type":"task","owner":"priorlewis43@gmail.com","created_at":"2026-02-01T06:03:45.860497772Z","created_by":"Lewis Prior","updated_at":"2026-02-01T06:12:28.836937767Z","closed_at":"2026-02-01T06:12:24.196320047Z","source_repo":".","compaction_level":0}
{"id":"src-mjy","title":"ui-timeline: Implement error visualization with stack traces","description":"Build error display component for failed beads. Show error message, stack trace (formatted), timestamp. Copy-to-clipboard button. Expandable details. Files: crates/oya-ui/src/components/timeline/error_viz.rs. Tests: errors render, stack trace formatted, copy works, expand/collapse. Effort: 1hr. Parent: src-30m","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-01T14:02:22.510827242Z","created_by":"lewis","updated_at":"2026-02-01T14:02:22.510827242Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-rf1","title":"[test] Input boundary - missing bead","description":"Red Queen test: Run zjj spawn without a bead ID argument. Expected behavior: Validation error with clear message about missing required argument.","acceptance_criteria":"- Command fails with clear error message\n- Error code is non-zero\n- Error message indicates missing bead_id","status":"open","priority":2,"issue_type":"bug","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T14:45:30.868979493Z","created_by":"Lewis Prior","updated_at":"2026-01-30T14:45:30.868979493Z","source_repo":".","compaction_level":0}
{"id":"src-sjj","title":"[nuoc] ctx-await-awakeable missing job-level suspension","status":"closed","priority":1,"issue_type":"bug","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T04:39:08.455471126Z","created_by":"Lewis Prior","updated_at":"2026-02-01T06:34:54.656629527Z","closed_at":"2026-02-01T06:34:54.656620407Z","close_reason":"Not relevant to OYA Rust project - nushell code removed","source_repo":".","compaction_level":0}
{"id":"src-swf","title":"[test] Doctor detection - incomplete transactions","description":"Red Queen test: Create an expired transaction entry directly in the database to simulate an orphaned agent spawn. Expected behavior: zjj doctor check_incomplete_transactions() detects this as an incomplete transaction with expired timestamp.","acceptance_criteria":"- Doctor detects incomplete transaction\n- Transaction state is identified as 'active' with expired timestamp\n- User is warned about the issue\n- Fix function can clean it up via 'zjj doctor --fix'","status":"open","priority":2,"issue_type":"bug","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T14:45:53.148792594Z","created_by":"Lewis Prior","updated_at":"2026-01-30T14:45:53.148792594Z","source_repo":".","compaction_level":0}
{"id":"src-u53","title":"backend-axum: Implement GET /api/health endpoint","description":"Implement health check endpoint for monitoring. Check: SurrealDB connection (ping query), UniverseSupervisor status (actor count), ProcessPool status (worker count). Return 200 OK with JSON status or 503 Service Unavailable if any component down. Files: crates/oya-web/src/routes/health.rs. Tests: all healthy returns 200, DB down returns 503, actors down returns 503. Effort: 30min. Parent: src-17z","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-01T14:00:35.203110404Z","created_by":"lewis","updated_at":"2026-02-01T14:00:35.203110404Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-u68","title":"Add comprehensive tests with mutation testing","description":"Achieve ≥80% line coverage and ≥80% mutation score for all packages","status":"open","priority":3,"issue_type":"task","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T05:01:18.967184137Z","created_by":"Lewis Prior","updated_at":"2026-01-30T05:01:18.967184137Z","source_repo":".","compaction_level":0}
{"id":"src-u8t","title":"ui-tauri: Integrate Leptos WASM build with Tauri window","description":"Configure Tauri to load Leptos WASM app in desktop window. Setup build script to compile WASM and copy to Tauri assets. Configure CSP to allow WASM. Files: crates/oya-ui/src-tauri/build.rs, crates/oya-ui/index.html. Tests: Tauri window loads Leptos app, hot reload works. Effort: 1hr. Parent: src-3s0","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:01:17.181477657Z","created_by":"lewis","updated_at":"2026-02-01T14:01:17.181477657Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-uya","title":"event-sourcing: Benchmark fsync overhead and validate performance","description":"## Overview\nBenchmark fsync write latency to verify 2-3ms overhead is acceptable. Use criterion for statistically significant measurements.\n\n## Benchmark Scenarios\n1. **Append Event with fsync** - Measure p50/p95/p99 latency\n2. **Append Event without fsync** - Baseline comparison\n3. **Batch Append** - Test throughput with multiple events\n4. **Read Events** - Measure query performance\n5. **Replay from Checkpoint** - Measure recovery time\n\n## Performance Targets\n- Event append with fsync: <3ms (p99)\n- Event append without fsync: <0.5ms (p99)\n- Read 1000 events: <50ms\n- Replay 1000 events: <5s\n\n## Files to Create\n- benches/fsync_overhead.rs - Criterion benchmarks\n- benches/event_throughput.rs - Throughput measurements\n\n## Tools\n- criterion = \"0.5\" for benchmarking\n- strace to verify fsync() syscalls\n- perf for CPU profiling\n\n## Success Criteria\n- p99 append latency <3ms confirmed\n- Benchmark results documented\n- fsync overhead measured and acceptable\n- Performance baseline established\n\n## Quality Gates\n- Statistical significance (criterion)\n- Multiple iterations (>100 samples)\n- Results reproducible\n\n## CUE Schema\nSchema: .beads/schemas/intent-cli-20260201012642-xie2aw1d.cue (TO BE CREATED)\n\n## Effort: 2 hours","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-01T13:57:05.589448114Z","created_by":"lewis","updated_at":"2026-02-01T13:57:05.589448114Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-wpt","title":"[Red Queen] CRITICAL: validation-invalid-transition: nu -c 'use oc-engine.nu *; if (is-valid-transition \"pending\" \"running\") { exit 1 } else { exit 0 }'","status":"closed","priority":0,"issue_type":"bug","owner":"priorlewis43@gmail.com","created_at":"2026-01-29T13:10:43.031994478Z","created_by":"Lewis Prior","updated_at":"2026-01-30T04:11:40.189530538Z","closed_at":"2026-01-30T04:11:40.189530538Z","close_reason":"Tests are false positives: P0 test passes (exit 0), P1 tests use 'echo fail' which always succeeds","source_repo":".","compaction_level":0}
{"id":"src-xo1","title":"Implement apply feature","description":"Apply GritQL pattern to single repo. Vertical slice: internal/features/apply/","status":"closed","priority":2,"issue_type":"feature","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T05:01:16.883058037Z","created_by":"Lewis Prior","updated_at":"2026-01-30T05:06:08.467867644Z","closed_at":"2026-01-30T05:06:08.467867644Z","close_reason":"Closed","source_repo":".","compaction_level":0}
{"id":"src-xwo","title":"[nuoc] resolve-awakeable doesn't restore job to running","status":"closed","priority":1,"issue_type":"bug","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T04:39:08.532472744Z","created_by":"Lewis Prior","updated_at":"2026-02-01T06:34:54.675459392Z","closed_at":"2026-02-01T06:34:54.675444062Z","close_reason":"Not relevant to OYA Rust project - nushell code removed","source_repo":".","compaction_level":0}
{"id":"src-y4y","title":"ui-dag: Implement force-directed layout algorithm","description":"Implement D3-force style force-directed layout: spring forces for edges, repulsion between nodes, center gravity. Run simulation until convergence (<2s for 50 nodes). Cache layout to avoid recalculation. Files: crates/oya-ui/src/layout/force_directed.rs. Tests: layout converges, 50 nodes in <2s, nodes don't overlap. Effort: 2hr. Parent: src-1o6","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:01:41.920776910Z","created_by":"lewis","updated_at":"2026-02-01T14:01:41.920776910Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-z28","title":"event-sourcing: Define complete SurrealDB schema with fsync","description":"## Overview\nImplement complete SurrealDB schema with 12 tables for event sourcing, workflow orchestration, and process management. Configure embedded kv-rocksdb with sync_mode='full' for fsync guarantees.\n\n## Architecture\n**Storage Engine**: Embedded SurrealDB with kv-rocksdb backend\n**Sync Mode**: sync_mode='full' for fsync on every write\n**Expected Overhead**: 2-3ms per write (acceptable for zero data loss)\n\n## Schema Tables (12 total)\n1. **state_transition** - Append-only event log with fsync\n2. **idempotency_key** - Prevents duplicate execution\n3. **checkpoint** - Compressed state snapshots (zstd)\n4. **bead** - Bead metadata\n5. **workflow_run** - Workflow execution tracking\n6. **process** - Worker process tracking\n7. **workspace** - Workspace isolation state\n8. **schedule** - Scheduled execution\n9. **token_bucket** - Rate limiting state\n10. **concurrency_limit** - Resource limits\n11. **webhook** - Webhook configurations\n12. **Graph relations** - depends_on, blocks edges\n\n## Files to Create\n- schema.surql - Complete SurrealDB schema definition\n- crates/events/src/db.rs - Database connection wrapper\n\n## Success Criteria\n- All 12 tables defined with proper indexes\n- Graph relations (depends_on, blocks) working\n- Embedded kv-rocksdb configured correctly\n- sync_mode='full' verified\n- Schema validation tests passing\n\n## Dependencies\n- surrealdb = { version = \"2.0\", features = [\"kv-rocksdb\"] }\n\n## Quality Gates\n- Zero unwraps, zero panics\n- All errors use Result<T, Error>\n- Schema validates with SurrealDB\n\n## CUE Schema\nSchema: .beads/schemas/intent-cli-20260201012642-u2duduno.cue (TO BE CREATED)\n\n## Effort: 4 hours","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T13:56:38.573078920Z","created_by":"lewis","updated_at":"2026-02-01T13:56:38.573078920Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-zl5","title":"[nuoc] job-execute skips ready state validation","status":"closed","priority":1,"issue_type":"bug","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T04:39:08.296376807Z","created_by":"Lewis Prior","updated_at":"2026-02-01T06:34:54.618951069Z","closed_at":"2026-02-01T06:34:54.618939669Z","close_reason":"Not relevant to OYA Rust project - nushell code removed","source_repo":".","compaction_level":0}
