{"id":"src-00z","title":"Implement binary detector","description":"Detect grit, turbolift, gh binaries at runtime. File: internal/platform/binaries/detector.go","status":"closed","priority":1,"issue_type":"task","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T05:01:14.246874162Z","created_by":"Lewis Prior","updated_at":"2026-01-30T05:04:39.925672531Z","closed_at":"2026-01-30T05:04:39.925672531Z","close_reason":"CommandExecutor and binary detector implemented","source_repo":".","compaction_level":0}
{"id":"src-103n","title":"replay: EventSourcingReplay: Implement progress tracking","description":"# Architecture\nTrack replay progress (events processed, percentage complete, ETA).\n\n# Files\n- crates/events/src/replay/progress.rs - Progress tracking\n\n# Success Criteria\n- Report: events_total, events_processed, percent_complete\n- Emit progress updates every 100 events\n- Calculate ETA based on event processing rate\n\n# Quality Standards\n- Zero unwraps, zero panics\n- Use tokio::sync::watch for progress updates\n- Thread-safe progress counter (AtomicU64)","status":"open","priority":1,"issue_type":"feature","estimated_minutes":15,"created_at":"2026-02-01T14:47:49.278557972Z","created_by":"lewis","updated_at":"2026-02-01T14:47:49.278557972Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-10w","title":"ui-timeline: Implement manual control buttons (cancel/retry/logs)","description":"Build control buttons: Cancel (red, confirm dialog), Retry (yellow, failed beads only), View Logs (blue, opens modal). Send API requests on click, show loading state, handle errors. Files: crates/oya-ui/src/components/timeline/controls.rs. Tests: buttons render, API calls work, confirm dialogs shown, errors handled. Effort: 1hr. Parent: src-30m","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:02:22.272485403Z","created_by":"lewis","updated_at":"2026-02-01T14:02:22.272485403Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-11j","title":"event-sourcing: DurableEventStore: Event retrieval and filtering","description":"Implement query and filtering logic for event retrieval.\n\nSuccess criteria:\n- Implement get_events() with stream_id filtering\n- Implement get_events_since() with sequence number filtering\n- Define QueryError type with thiserror\n- Zero unwraps, zero panics\n- Functional iterator patterns with map/filter/collect\n\nFiles: crates/events/src/durable_store.rs\n\nEstimated time: 20 minutes","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:37:58.665694314Z","created_by":"lewis","updated_at":"2026-02-01T14:37:58.665694314Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-11wb","title":"actor-system: Unit tests for actor lifecycle and message handling","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085546-jjsoctn0.cue implementation.cue\n# Schema location: /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085546-jjsoctn0.cue\n\n\n#EnhancedBead: {\n  id: \"intent-cli-20260201085546-jjsoctn0\"\n  title: \"actor-system: Unit tests for actor lifecycle and message handling\"\n  type: \"feature\"\n  priority: 1\n  effort_estimate: \"30min\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL test all actor lifecycle events\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN actor spawned\\\", shall: \\\"THE SYSTEM SHALL verify actor is running\\\"},\n      {trigger: \\\"WHEN actor stopped\\\", shall: \\\"THE SYSTEM SHALL verify cleanup completed\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF test uses unwrap\\\", shall_not: \\\"THE SYSTEM SHALL NOT panic on test failure\\\", because: \\\"tests must use Result for errors\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Message patterns implemented\\\",\n        \\\"tokio-test added to dev-dependencies\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"All lifecycle events tested\\\",\n        \\\"100% test coverage for actor basics\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"Tests never use unwrap or expect\\\",\n      \\\"All tests use tokio-test runtime\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write comprehensive unit tests with tokio-test\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement to make tests pass\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/intent-cli-20260201085546-jjsoctn0/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:56:30.040756311Z","created_by":"lewis","updated_at":"2026-02-01T14:56:30.040756311Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-126","title":"ui-ws-integration: Connect WebSocket client to server","description":"Connect gloo-net WebSocket client to ws://localhost:8080/api/ws on app initialization. Handle connection states (connecting, connected, disconnected). Log connection events. Files: crates/oya-ui/src/state/websocket.rs. Tests: connection established, state tracked, errors logged. Effort: 45min. Parent: src-17r","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:02:00.459717768Z","created_by":"lewis","updated_at":"2026-02-01T14:02:00.459717768Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-143","title":"ui-dag: Implement node selection and dependency highlighting","description":"Implement click to select node, highlight selected node with border, highlight all dependencies (parents + children) in different color. Click outside to deselect. Files: crates/oya-ui/src/components/dag_viz/selection.rs. Tests: selection works, dependencies highlight, deselect works. Effort: 1hr. Parent: src-1o6","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-01T14:01:42.859621465Z","created_by":"lewis","updated_at":"2026-02-01T14:01:42.859621465Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-168i","title":"rate-limiter: Implement token bucket algorithm","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-vchwq9jk.cue implementation.cue\n# Schema location: /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-vchwq9jk.cue\n\n\n#EnhancedBead: {\n  id: \"intent-cli-20260201085944-vchwq9jk\"\n  title: \"rate-limiter: Implement token bucket algorithm\"\n  type: \"feature\"\n  priority: 2\n  effort_estimate: \"30min\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL implement token bucket rate limiting\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN refill timer fires\\\", shall: \\\"THE SYSTEM SHALL add tokens up to capacity\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF token count exceeds capacity\\\", shall_not: \\\"THE SYSTEM SHALL NOT overflow bucket\\\", because: \\\"capacity is hard limit\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"ractor Actor trait understood\\\",\n        \\\"tokio runtime available\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"Token bucket implemented\\\",\n        \\\"Refill timer running\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"Token count never exceeds capacity\\\",\n      \\\"Token count never negative\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write rate limiter tests\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement rate-limiter: Implement token bucket algorithm\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/intent-cli-20260201085944-vchwq9jk/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-01T14:59:45.934772893Z","created_by":"lewis","updated_at":"2026-02-01T14:59:45.934772893Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-16k2","title":"checkpoint: CheckpointManager: Unit tests for checkpoint/resume cycle","description":"# Architecture\nTest complete checkpoint → restore cycle with property-based testing.\n\n# Files\n- crates/workflow/tests/checkpoint_test.rs - Unit tests\n- crates/workflow/tests/checkpoint_properties.rs - Proptest properties\n\n# Success Criteria\n- Test: checkpoint → restore = exact state (round-trip)\n- Test: compression achieves 50%+ size reduction\n- Property test: any serializable state round-trips successfully\n\n# Quality Standards\n- Zero unwraps in tests\n- Proptest for exhaustive state combinations\n- Temp SurrealDB instance per test","status":"open","priority":1,"issue_type":"feature","estimated_minutes":30,"created_at":"2026-02-01T14:47:22.134424037Z","created_by":"lewis","updated_at":"2026-02-01T14:47:22.134424037Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-17r","title":"ui: Integrate WebSocket for real-time bead status updates","description":"Connect Leptos frontend to WebSocket server. Subscribe to bincode event stream, deserialize BeadEvent updates, reactively update DAG visualization with <50ms latency using Leptos signals.\n\n# Architecture\n- gloo-net WebSocket client for WASM\n- bincode deserialization of BeadEvent messages\n- Leptos signals for reactive state updates\n- Automatic reconnection on disconnect\n- Event queue for missed messages during reconnect\n\n# Event Types Handled\n- BeadCreated: Add new node to DAG\n- BeadScheduled: Update node to yellow (scheduled)\n- BeadStarted: Update node to blue (running)\n- BeadCompleted: Update node to green (completed)\n- BeadFailed: Update node to red (failed)\n- BeadCancelled: Update node to orange (cancelled)\n\n# Success Criteria\n- WebSocket connects to ws://localhost:8080/api/ws\n- bincode deserialization works for all event types\n- DAG updates reactively on events (<50ms latency)\n- Automatic reconnection on disconnect (<5s)\n- Event queue buffers during reconnect\n- Error handling for malformed messages\n\n# Dependencies\n- Bead src-2yy: WebSocket server\n- Bead src-1o6: DAG visualization component\n\n# Files\n- crates/oya-ui/src/websocket.rs - WebSocket client wrapper\n- crates/oya-ui/src/events.rs - Event type definitions\n- crates/oya-ui/src/state/dag_state.rs - Reactive DAG state\n- crates/oya-ui/tests/websocket_test.rs - Integration tests\n\n# Implementation Notes\n- Use Leptos create_signal for reactive state\n- Implement exponential backoff for reconnection\n- Monitor latency in production (instrument with timestamps)\n\nEffort: 2hr\nBead ID: intent-cli-20260201020059-4eih0cdy\nCUE Schema: .beads/schemas/intent-cli-20260201020059-4eih0cdy.cue","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T13:59:16.819466239Z","created_by":"lewis","updated_at":"2026-02-01T13:59:16.819466239Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-17z","title":"backend: Implement axum REST API with tower middleware","description":"Implement axum HTTP server with 4 REST endpoints (create workflow, query status, cancel, health check) and tower middleware (CORS, tracing, compression). Provides backend API for Tauri frontend.\n\n# Architecture\n- axum 0.7 web framework\n- tower 0.5 middleware (CORS, tracing, compression)\n- 4 REST endpoints: POST /api/workflows, GET /api/beads/:id, POST /api/beads/:id/cancel, GET /api/health\n- Integration with SchedulerActor and StateManagerActor\n\n# Success Criteria\n- REST API listening on :8080\n- All 4 endpoints working\n- CORS configured for Tauri origin\n- Tower middleware active (compression, tracing)\n- Error responses follow RFC 7807 Problem Details\n- All handlers return Result<Json<T>, Error>\n\n# Dependencies\n- Stream B: SchedulerActor for bead creation\n- Stream A: StateManagerActor for status queries\n\n# Files\n- crates/oya-web/src/lib.rs - axum server setup\n- crates/oya-web/src/routes.rs - REST API routes\n- crates/oya-web/Cargo.toml - Backend dependencies\n- crates/oya-web/tests/rest_api_test.rs - Integration tests\n\nEffort: 4hr\nBead ID: intent-cli-20260201020059-ttfabixq\nCUE Schema: .beads/schemas/intent-cli-20260201020059-ttfabixq.cue","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-02-01T13:53:55.343021608Z","created_by":"lewis","updated_at":"2026-02-01T14:52:22.339911208Z","closed_at":"2026-02-01T14:52:22.339847809Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-18e","title":"event-sourcing: Benchmarks: Setup criterion benchmarking harness","description":"# Architecture\nSetup Criterion benchmarking infrastructure for measuring fsync overhead with statistical analysis.\n\n# Files\n- benches/fsync_overhead.rs - Criterion benchmark harness\n- Cargo.toml - Add criterion dev-dependency\n\n# Success Criteria\n- Criterion configured with warm-up, measurement time\n- Benchmark output includes mean, std dev, confidence intervals\n- HTML report generation enabled\n\n# Quality Standards\n- Zero unwraps in benchmark code\n- Criterion::default() configuration\n- Sample size: 100 iterations minimum","status":"open","priority":2,"issue_type":"feature","estimated_minutes":15,"created_at":"2026-02-01T14:46:08.212869893Z","created_by":"lewis","updated_at":"2026-02-01T14:46:08.212869893Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-19yb","title":"storage-actors: Unit tests with tokio-test","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085547-iojg0qyb.cue implementation.cue\n# Schema location: /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085547-iojg0qyb.cue\n\n\n#EnhancedBead: {\n  id: \"intent-cli-20260201085547-iojg0qyb\"\n  title: \"storage-actors: Unit tests with tokio-test\"\n  type: \"feature\"\n  priority: 1\n  effort_estimate: \"30min\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL test all storage actor operations\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN running storage actor tests\\\", shall: \\\"THE SYSTEM SHALL use tokio-test runtime\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF test uses unwrap\\\", shall_not: \\\"THE SYSTEM SHALL NOT panic on failure\\\", because: \\\"tests must use Result\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Storage actors integrated\\\",\n        \\\"tokio-test available\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"100% handler coverage\\\",\n        \\\"All tests use Result types\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"Tests never unwrap or expect\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write comprehensive unit tests with tokio-test\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement to make tests pass\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/intent-cli-20260201085547-iojg0qyb/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:56:30.975242495Z","created_by":"lewis","updated_at":"2026-02-01T14:56:30.975242495Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-1be","title":"idempotency: UUID v5: Unit tests for determinism validation","description":"# Architecture\nComprehensive tests validating deterministic UUID v5 generation with property-based testing.\n\n# Files\n- crates/workflow/tests/idempotent_keys_test.rs - Unit tests\n- crates/workflow/tests/key_properties.rs - Proptest properties\n\n# Success Criteria\n- Test: same bead_id + same input = same UUID (determinism)\n- Test: different input = different UUID (uniqueness)\n- Property test: serialization order doesn't matter\n- Property test: UUID format validation\n\n# Quality Standards\n- Zero unwraps in tests\n- Proptest for exhaustive validation\n- Test collision resistance (different inputs → different UUIDs)","status":"open","priority":1,"issue_type":"feature","estimated_minutes":30,"created_at":"2026-02-01T14:46:28.289126486Z","created_by":"lewis","updated_at":"2026-02-01T14:46:28.289126486Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-1bm","title":"ui-ws-integration: WebSocket integration tests with latency measurement","description":"Integration tests: connect WS client, send events from mock server, verify DAG updates, measure end-to-end latency (server event → UI update). Target <50ms p99. Test reconnection. Files: crates/oya-ui/tests/websocket_integration_test.rs. Effort: 1hr. Parent: src-17r","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-01T14:02:01.410356230Z","created_by":"lewis","updated_at":"2026-02-01T14:02:01.410356230Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-1ce","title":"event-sourcing: DurableEventStore: Implement event retrieval and filtering","description":"# Architecture\nImplement get_events() with filtering by bead_id, time range, and event type with streaming results.\n\n# Files\n- crates/events/src/durable_store/query.rs - Event query implementation\n\n# Success Criteria\n- get_events(filter: EventFilter) -> Result<impl Stream<Item = Event>, QueryError>\n- Filter by bead_id, timestamp range (after, before), event_type\n- Streaming to handle large result sets without OOM\n\n# Quality Standards\n- Zero unwraps, zero panics\n- Railway-Oriented Programming for query pipeline\n- Async streaming with futures::Stream","status":"open","priority":1,"issue_type":"feature","estimated_minutes":30,"created_at":"2026-02-01T14:45:46.800543316Z","created_by":"lewis","updated_at":"2026-02-01T14:45:46.800543316Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-1d7","title":"event-sourcing: DurableEventStore: Setup bincode event serialization","description":"# Architecture\nImplement Event trait with bincode serialization/deserialization using Result types for all operations.\n\n# Files\n- crates/events/src/event.rs - Event trait definition\n- crates/events/src/serialize.rs - Bincode serialization with error handling\n\n# Success Criteria\n- Event trait with serialize() -> Result<Vec<u8>, SerializeError>\n- Event trait with deserialize(bytes: &[u8]) -> Result<Self, DeserializeError>\n- All serialization errors use thiserror\n\n# Quality Standards\n- Zero unwraps, zero panics\n- Railway-Oriented Programming for serialization pipeline\n- Bincode config: little-endian, variable-length integers","status":"open","priority":1,"issue_type":"feature","estimated_minutes":30,"created_at":"2026-02-01T14:45:46.619880408Z","created_by":"lewis","updated_at":"2026-02-01T14:45:46.619880408Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-1ddg","title":"storage-actors: Integration with SurrealDB and DurableEventStore","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085547-d8bk5i24.cue implementation.cue\n# Schema location: /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085547-d8bk5i24.cue\n\n\n#EnhancedBead: {\n  id: \"intent-cli-20260201085547-d8bk5i24\"\n  title: \"storage-actors: Integration with SurrealDB and DurableEventStore\"\n  type: \"feature\"\n  priority: 1\n  effort_estimate: \"30min\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL integrate actors with Stream A storage\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN actor starts\\\", shall: \\\"THE SYSTEM SHALL connect to SurrealDB\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF storage backend unavailable\\\", shall_not: \\\"THE SYSTEM SHALL NOT start actor\\\", because: \\\"fail-fast principle\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Both actors implemented\\\",\n        \\\"Stream A storage available\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"Actors connected to real storage\\\",\n        \\\"Connection pooling configured\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"Connection failures propagate as actor errors\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write integration tests\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Wire actors to storage backends\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/intent-cli-20260201085547-d8bk5i24/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:56:30.887951218Z","created_by":"lewis","updated_at":"2026-02-01T14:56:30.887951218Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-1dn","title":"event-sourcing: SurrealDB Schema: Define rate limiting tables","description":"# Architecture\nDefine token_bucket (rate limiting) and concurrency_limit (resource management) tables with atomic counter updates.\n\n# Files\n- schema.surql - Rate limiting table definitions\n- crates/workflow/src/schema/limits.rs - Rust type mappings\n\n# Success Criteria\n- Token bucket with refill rate, capacity, current tokens\n- Concurrency limit with max_concurrent, current_count\n- Atomic increment/decrement operations\n\n# Quality Standards\n- Zero unwraps, zero panics\n- Concurrency-safe counter updates\n- Railway-Oriented Programming","status":"open","priority":1,"issue_type":"feature","estimated_minutes":15,"created_at":"2026-02-01T14:45:15.228159919Z","created_by":"lewis","updated_at":"2026-02-01T14:45:15.228159919Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-1ev","title":"backend-axum: Integration tests for all REST endpoints","description":"Comprehensive integration test suite for REST API. Happy paths: POST /api/workflows with valid payload, GET /api/beads/:id for existing bead, POST cancel for running bead, GET /api/health when healthy. Error paths: 404 for missing bead, 400 for invalid JSON, 409 for cancel completed, 503 when actors down. Concurrency: 10 simultaneous requests. Files: crates/oya-web/tests/rest_api_test.rs. Use reqwest for HTTP client, tokio-test for async. Effort: 1hr. Parent: src-17z","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-01T14:00:35.434886192Z","created_by":"lewis","updated_at":"2026-02-01T14:00:35.434886192Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-1fy0","title":"integration: Event Sourcing: Checkpoint and resume cycle test","description":"# Architecture\nFull checkpoint/resume cycle: create checkpoint, restore from checkpoint, verify exact state restoration.\n\n# Files\n- tests/integration/checkpoint_resume_test.rs - Checkpoint/resume integration test\n\n# Success Criteria\n- Build state by applying 500 events\n- Create checkpoint with zstd compression\n- Restore from checkpoint\n- Verify restored state === original state (exact match)\n\n# Quality Standards\n- Zero unwraps in tests\n- Test compression ratio (>50% size reduction)\n- Verify checkpoint metadata (timestamps, sizes)","status":"open","priority":1,"issue_type":"feature","estimated_minutes":30,"created_at":"2026-02-01T14:48:13.650832679Z","created_by":"lewis","updated_at":"2026-02-01T14:48:13.650832679Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-1h5b","title":"storage-actors: Define StateManagerActor message protocol","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085547-szubrujq.cue implementation.cue\n# Schema location: /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085547-szubrujq.cue\n\n\n#EnhancedBead: {\n  id: \"intent-cli-20260201085547-szubrujq\"\n  title: \"storage-actors: Define StateManagerActor message protocol\"\n  type: \"feature\"\n  priority: 1\n  effort_estimate: \"30min\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL define StateManagerActor message protocol\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN SaveState message received\\\", shall: \\\"THE SYSTEM SHALL persist state to SurrealDB\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF state serialization fails\\\", shall_not: \\\"THE SYSTEM SHALL NOT lose original state\\\", because: \\\"data integrity\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"SurrealDB connection available\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"Message types defined with bincode derive\\\",\n        \\\"Protocol documented\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"All messages use bincode serialization\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Define message enums\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Add bincode derives\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/intent-cli-20260201085547-szubrujq/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:56:30.627472173Z","created_by":"lewis","updated_at":"2026-02-01T14:56:30.627472173Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-1j8","title":"ui-ws-integration: Implement automatic reconnection with exponential backoff","description":"On WebSocket disconnect, automatically reconnect with exponential backoff: 1s, 2s, 4s, 8s, max 30s. Show reconnecting indicator in UI. Restore event stream on reconnect. Files: crates/oya-ui/src/websocket/reconnect.rs. Tests: reconnect works, backoff correct, UI shows status. Effort: 1hr. Parent: src-17r","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:02:01.168121789Z","created_by":"lewis","updated_at":"2026-02-01T14:02:01.168121789Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-1l1","title":"Migration complete: bd → br for beads_rust","status":"open","priority":4,"issue_type":"feature","created_at":"2026-02-01T06:13:22.831955609Z","created_by":"lewis","updated_at":"2026-02-01T06:13:22.831955609Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-1mpq","title":"actor-system: Implement ping/pong example with ractor Actor trait","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085546-zqvj5ams.cue implementation.cue\n# Schema location: /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085546-zqvj5ams.cue\n\n\n#EnhancedBead: {\n  id: \"intent-cli-20260201085546-zqvj5ams\"\n  title: \"actor-system: Implement ping/pong example with ractor Actor trait\"\n  type: \"feature\"\n  priority: 1\n  effort_estimate: \"30min\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL implement ping/pong actors using ractor\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN PingActor sends Ping message\\\", shall: \\\"THE SYSTEM SHALL reply with Pong\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF actor panics\\\", shall_not: \\\"THE SYSTEM SHALL NOT leave messages unhandled\\\", because: \\\"supervision must handle panics gracefully\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"ractor Actor trait understood\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"PingActor and PongActor implemented\\\",\n        \\\"Message passing works bidirectionally\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"Actors always handle messages or supervise\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        \n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write tests for ping/pong actors\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement PingActor and PongActor\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/intent-cli-20260201085546-zqvj5ams/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:56:29.868478377Z","created_by":"lewis","updated_at":"2026-02-01T14:56:29.868478377Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-1n3","title":"backend-ws: Implement bincode serialization for BeadEvent messages","description":"Define BeadEvent enum (Created, Scheduled, Started, Completed, Failed, Cancelled) with serde derives. Implement bincode serialization/deserialization. Benchmark serialization overhead (<1ms target). Files: crates/oya-web/src/websocket/events.rs. Tests: serialize/deserialize all event types, benchmark perf. Effort: 1hr. Parent: src-2yy","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:00:53.364613983Z","created_by":"lewis","updated_at":"2026-02-01T14:00:53.364613983Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-1n4","title":"ui-dag: Setup Canvas2D rendering with web-sys","description":"Setup HTML5 Canvas with web-sys Canvas2dContext. Implement canvas initialization, resize handling, clear/redraw loop with RequestAnimationFrame. Handle retina displays (devicePixelRatio). Files: crates/oya-ui/src/components/dag_viz/canvas.rs. Tests: canvas initializes, resize works, RAF loop runs at 60fps. Effort: 1hr. Parent: src-1o6","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:01:41.688966136Z","created_by":"lewis","updated_at":"2026-02-01T14:01:41.688966136Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-1o6","title":"ui: Implement DAG visualization with Leptos components","description":"Build interactive DAG visualization using Leptos components and Canvas API. Renders bead nodes with state colors, dependency edges, pan/zoom controls. Force-directed layout for 50+ node graphs.\n\n# Architecture\n- Leptos reactive components for DAG rendering\n- Canvas API for high-performance graph drawing\n- Force-directed layout algorithm (D3-force style)\n- State-based node rendering with color coding\n- Interactive pan/zoom with mouse/touch events\n\n# Node Color States\n- Pending: gray (#6B7280)\n- Scheduled: yellow (#FCD34D)\n- Running: blue (#3B82F6)\n- Completed: green (#10B981)\n- Failed: red (#EF4444)\n- Cancelled: orange (#F97316)\n\n# Success Criteria\n- DAG renders 50+ nodes smoothly (60fps)\n- Force-directed layout converges in <2s\n- Node colors update reactively\n- Dependency edges render with arrows\n- Pan/zoom controls responsive\n- Node selection highlights dependencies\n\n# Dependencies\n- Bead src-3s0: Tauri scaffold + Leptos app\n\n# Files\n- crates/oya-ui/src/components/dag_viz.rs - Main DAG component\n- crates/oya-ui/src/components/dag_node.rs - Node rendering\n- crates/oya-ui/src/components/dag_edge.rs - Edge rendering\n- crates/oya-ui/src/layout/force_directed.rs - Layout algorithm\n- crates/oya-ui/tests/dag_viz_test.rs - Component tests\n\n# Implementation Notes\n- Use web-sys Canvas2dContext for rendering\n- Implement RequestAnimationFrame for smooth updates\n- Cache layout calculations for performance\n- Viewport culling for large graphs (only render visible nodes)\n\nEffort: 4hr\nBead ID: intent-cli-20260201020059-xrlsf0mp\nCUE Schema: .beads/schemas/intent-cli-20260201020059-xrlsf0mp.cue","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T13:59:01.054749097Z","created_by":"lewis","updated_at":"2026-02-01T13:59:01.054749097Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-1o6.1","title":"controls-tests: Interaction tests for DAG pan/zoom controls","description":"Write comprehensive tests for DAG pan/zoom control interactions.\n\n# Scope\n- Unit tests for mouse/touch event handlers\n- Integration tests for pan/zoom transforms\n- Bounds checking validation\n- Event state management tests\n\n# Files\n- crates/oya-ui/tests/controls_mouse_test.rs - Mouse event tests\n- crates/oya-ui/tests/controls_pan_test.rs - Pan behavior tests\n- crates/oya-ui/tests/controls_zoom_test.rs - Zoom behavior tests\n- crates/oya-ui/tests/controls_touch_test.rs - Touch gesture tests\n- crates/oya-ui/tests/controls_bounds_test.rs - Bounds validation tests\n\n# Success Criteria\n- 95%+ code coverage for control modules\n- Pan/zoom edge cases validated\n- Event race conditions tested\n- Touch gesture accuracy verified\n\n# Dependencies\n- controls-mouse: Mouse events\n- controls-pan: Pan logic\n- controls-zoom: Zoom logic\n- controls-touch: Touch gestures\n- controls-bounds: Bounds constraints\n\n# Implementation Notes\n- Mock DOM events with web-sys test helpers\n- Test transform matrix calculations\n- Verify signal updates with Leptos testing utils\n- Check bounds edge cases (min/max zoom, graph edges)","status":"open","priority":1,"issue_type":"test","estimated_minutes":30,"created_at":"2026-02-01T14:25:17.791401152Z","created_by":"lewis","updated_at":"2026-02-01T14:25:17.791401152Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.1","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:25:17.791401152Z","created_by":"lewis"}]}
{"id":"src-1o6.10","title":"layout: Simulation loop with velocity Verlet integration","description":"Implement main simulation loop using velocity Verlet integration. Manages force composition, timestep iteration, and alpha decay for gradual convergence. Runs until alpha threshold or max iterations.\n\n# Architecture\n- Simulation struct with nodes, edges, forces, alpha state\n- Velocity Verlet integration for stable physics\n- Alpha decay: alpha *= decay_rate each step (0.99 typical)\n- Tick function: apply forces, integrate, update alpha\n- Iterator interface for step-by-step control\n\n# Implementation Details\n- Verlet integration: position += velocity * dt + 0.5 * acceleration * dt²\n- Alpha: simulation 'heat' parameter, 1.0 at start, decays to min\n- Alpha decay: 0.99 (1% decay per tick)\n- Alpha min: 0.001 (stop when alpha < min)\n- Force composition: sum all forces, then integrate once\n- Timestep dt: 1.0 (simplifies math, stable for typical forces)\n\n# Success Criteria\n- Simulation converges within 300 iterations for 50-node graph\n- Alpha decays smoothly from 1.0 to 0.001\n- Verlet integration maintains energy conservation (no drift)\n- Iterator interface allows pausing/resuming simulation\n- Zero unwraps, zero panics, functional error handling\n\n# Files\n- crates/oya-ui/src/layout/simulation.rs - Main loop + integration\n- crates/oya-ui/tests/simulation_test.rs - Integration tests","status":"open","priority":2,"issue_type":"feature","owner":"lewis","estimated_minutes":25,"created_at":"2026-02-01T14:25:46.457581845Z","created_by":"lewis","updated_at":"2026-02-01T14:25:46.457581845Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.10","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:25:46.457581845Z","created_by":"lewis"}]}
{"id":"src-1o6.11","title":"canvas-coords: Coordinate transformation","description":"Implement pan/zoom coordinate transformation system\n\n# Scope\nTransform between screen coordinates (mouse events) and world coordinates (DAG nodes). Handle pan/zoom state and matrix transformations.\n\n# Architecture\n- Pan offset (x, y) in world space\n- Zoom scale (0.1 to 5.0 range)\n- Screen-to-world coordinate conversion\n- World-to-screen coordinate conversion\n- Mouse wheel zoom (ctrl+wheel)\n- Mouse drag pan (click+drag)\n\n# Success Criteria\n- Pan state stored in RwSignal<(f64, f64)>\n- Zoom state stored in RwSignal<f64> (default 1.0)\n- screen_to_world() transforms mouse coords correctly\n- world_to_screen() transforms node coords correctly\n- Mouse wheel zoom works (smooth, centered on cursor)\n- Click+drag pan works (smooth, no jitter)\n- No unwraps or panics (Result<T, E> all the way)\n- Zoom clamped to [0.1, 5.0] range\n\n# Dependencies\n- Bead canvas-init (requires canvas element)\n- Bead canvas-context (requires context for transforms)\n\n# Files\n- crates/oya-ui/src/components/canvas/coords.rs\n- crates/oya-ui/src/components/dag_viz.rs (integration)\n\n# Implementation Details\nuse leptos::*;\nuse web_sys::{MouseEvent, WheelEvent};\n\nstruct Transform {\n    pan_x: f64,\n    pan_y: f64,\n    zoom: f64,\n}\n\nimpl Transform {\n    fn screen_to_world(&self, screen_x: f64, screen_y: f64) -> (f64, f64) {\n        let world_x = (screen_x / self.zoom) - self.pan_x;\n        let world_y = (screen_y / self.zoom) - self.pan_y;\n        (world_x, world_y)\n    }\n    \n    fn world_to_screen(&self, world_x: f64, world_y: f64) -> (f64, f64) {\n        let screen_x = (world_x + self.pan_x) * self.zoom;\n        let screen_y = (world_y + self.pan_y) * self.zoom;\n        (screen_x, screen_y)\n    }\n    \n    fn apply_zoom(&mut self, delta: f64, center_x: f64, center_y: f64) {\n        let new_zoom = (self.zoom * (1.0 + delta * 0.001)).clamp(0.1, 5.0);\n        \n        // Zoom centered on cursor\n        let world_center = self.screen_to_world(center_x, center_y);\n        self.zoom = new_zoom;\n        let new_screen_center = self.world_to_screen(world_center.0, world_center.1);\n        \n        self.pan_x += (center_x - new_screen_center.0) / self.zoom;\n        self.pan_y += (center_y - new_screen_center.1) / self.zoom;\n    }\n}\n\nEffort: 20min","status":"open","priority":1,"issue_type":"feature","estimated_minutes":20,"created_at":"2026-02-01T14:25:47.606896269Z","created_by":"lewis","updated_at":"2026-02-01T14:25:47.606896269Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.11","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:25:47.606896269Z","created_by":"lewis"}]}
{"id":"src-1o6.12","title":"layout: Convergence detection with velocity threshold","description":"Implement convergence detection to stop simulation early when layout stabilizes. Monitors node velocity magnitudes and stops when all below threshold. Prevents wasted computation after visual convergence.\n\n# Architecture\n- ConvergenceDetector struct tracking velocity history\n- Velocity threshold: max magnitude across all nodes\n- Rolling window: check last N ticks for stability\n- Early stopping: halt when converged before alpha_min reached\n\n# Implementation Details\n- Velocity threshold: 0.5 pixels/tick (visually imperceptible)\n- Rolling window: 5 ticks (avoid false positives from noise)\n- Max velocity calculation: nodes.iter().map(|n| n.velocity.magnitude()).max()\n- Convergence condition: max_velocity < threshold for 5 consecutive ticks\n- Return convergence reason: AlphaMin | VelocityThreshold | MaxIterations\n\n# Success Criteria\n- Detects convergence 50-100 ticks before alpha_min (saves computation)\n- No false positives on oscillating systems\n- Rolling window smooths out single-tick noise spikes\n- Property test: converged layout has all velocities < threshold\n- Reports which convergence condition triggered\n\n# Files\n- crates/oya-ui/src/layout/convergence.rs - Detection logic\n- crates/oya-ui/tests/convergence_test.rs - Unit tests with oscillation scenarios","status":"open","priority":2,"issue_type":"feature","owner":"lewis","estimated_minutes":20,"created_at":"2026-02-01T14:25:54.494298984Z","created_by":"lewis","updated_at":"2026-02-01T14:25:54.494298984Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.12","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:25:54.494298984Z","created_by":"lewis"}]}
{"id":"src-1o6.13","title":"controls-mouse: Mouse event listeners for DAG pan/zoom","description":"Implement mouse event listeners for DAG visualization pan/zoom controls.\n\n# Scope\n- Attach mousedown/mousemove/mouseup listeners to canvas\n- Track mouse position delta for pan operations\n- Capture wheel events for zoom operations\n- Prevent default browser behaviors (scroll, context menu)\n- Store event state in reactive Leptos signals\n\n# Files\n- crates/oya-ui/src/components/controls/mouse.rs - Mouse event handlers\n\n# Success Criteria\n- Mouse events fire with correct coordinates\n- Event state updates Leptos signals\n- Default behaviors prevented\n- No memory leaks from listeners\n\n# Implementation Notes\n- Use web-sys::MouseEvent for DOM events\n- Convert client coordinates to canvas space\n- Create reactive signals for mouse state\n- Cleanup listeners on component unmount","status":"open","priority":1,"issue_type":"feature","estimated_minutes":15,"created_at":"2026-02-01T14:25:55.704216200Z","created_by":"lewis","updated_at":"2026-02-01T14:25:55.704216200Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.13","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:25:55.704216200Z","created_by":"lewis"}]}
{"id":"src-1o6.14","title":"edge-tests: Edge rendering tests","description":"Comprehensive test suite for DAG edge rendering components.\n\n# Specification\n- Unit tests for Edge struct creation\n- Path calculation tests (straight lines)\n- Bezier curve generation tests\n- Arrow head calculation tests\n- Edge case handling (coincident nodes, self-loops)\n\n# Test Coverage\n1. **Edge Struct Tests**\n   - Edge creation with all fields\n   - Edge state transitions (normal → highlighted)\n   - Edge style variants\n\n2. **Line Path Tests**\n   - Straight line between nodes\n   - Node boundary adjustment\n   - Coincident nodes (error case)\n   - Zero-length edges\n\n3. **Bezier Curve Tests**\n   - Parallel edge detection\n   - Control point calculation\n   - Curve sampling accuracy\n   - Multiple parallel edges (3+)\n\n4. **Arrow Head Tests**\n   - Arrow triangle generation\n   - Direction vector accuracy\n   - Arrow scaling with zoom\n   - Different arrow styles\n\n5. **Integration Tests**\n   - Complete edge rendering pipeline\n   - Edge + arrow rendering\n   - Curve + arrow rendering\n   - Edge state updates\n\n# Test Examples\n```rust\n#[test]\nfn test_line_path_basic() -> Result<(), EdgeError> {\n    let path = calculate_line_path(\n        (0.0, 0.0), 10.0,  // source\n        (100.0, 0.0), 10.0, // target\n    )?;\n    assert_eq!(path.start, (10.0, 0.0));\n    assert_eq!(path.end, (90.0, 0.0));\n    Ok(())\n}\n\n#[test]\nfn test_arrow_direction() -> Result<(), EdgeError> {\n    let arrow = calculate_arrow_head(\n        (100.0, 50.0),\n        (1.0, 0.0),  // pointing right\n        12.0, 8.0,\n    )?;\n    assert!(arrow.tip.0 > arrow.wing1.0);\n    Ok(())\n}\n\n#[test]\nfn test_coincident_nodes_error() {\n    let result = calculate_line_path(\n        (50.0, 50.0), 10.0,\n        (50.0, 50.0), 10.0,\n    );\n    assert!(result.is_err());\n}\n```\n\n# Files\n- crates/oya-ui/tests/dag_edge_test.rs - Edge rendering tests\n\n# Success Criteria\n- All tests pass with `moon run :test`\n- >90% code coverage for edge module\n- Zero panics in tests\n- Zero unwraps in test code\n- All edge cases tested\n\n# Test Properties\n- Property-based tests with quickcheck\n- Fuzz testing for numeric edge cases\n- Snapshot tests for visual regression\n\n# Dependencies\n- Depends on all edge beads: edge-struct, edge-lines, edge-curves, edge-arrows\n\n# Notes\n- Use approx crate for f64 comparisons (epsilon = 1e-6)\n- Test arrow direction: always points toward target\n- Verify edge color/style rendering","status":"open","priority":1,"issue_type":"feature","estimated_minutes":25,"created_at":"2026-02-01T14:25:57.322562813Z","created_by":"lewis","updated_at":"2026-02-01T14:25:57.322562813Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.14","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:25:57.322562813Z","created_by":"lewis"}]}
{"id":"src-1o6.15","title":"node-struct: Define Node data structure","description":"Define the core Node data structure for DAG visualization with all state information and rendering metadata.\n\n# Specification\n- Define NodeState enum: Pending, Scheduled, Running, Completed, Failed, Cancelled\n- Define NodeShape enum: Circle, Rectangle\n- Define Node struct with fields:\n  - id: String (bead ID)\n  - label: String (bead title)\n  - state: NodeState\n  - shape: NodeShape\n  - position: (f64, f64) - canvas coordinates\n  - radius: f64 - for circle, or width/height for rect\n  - dependencies: Vec<String> - parent bead IDs\n  - hovered: bool - hover state for interaction\n\n# Success Criteria\n- Node struct derives Clone, Debug, PartialEq\n- NodeState enum is serializable (serde)\n- All fields documented with doc comments\n- Zero unwraps in constructors\n- Type-safe position and size handling\n\n# Files\n- crates/oya-ui/src/models/node.rs - Node data structures\n- crates/oya-ui/src/models/mod.rs - Module exports\n\n# Implementation Notes\n- Use newtype pattern for NodeId(String) type safety\n- Position could be Point2D struct for clarity\n- Consider Default trait for sensible defaults","status":"open","priority":1,"issue_type":"feature","owner":"lewis","estimated_minutes":15,"created_at":"2026-02-01T14:26:00.792078260Z","created_by":"lewis","updated_at":"2026-02-01T14:26:00.792078260Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.15","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:26:00.792078260Z","created_by":"lewis"}]}
{"id":"src-1o6.16","title":"layout: Comprehensive algorithm tests and benchmarks","description":"Build comprehensive test suite for force-directed layout: property tests, integration tests, performance benchmarks. Verifies correctness, stability, and performance requirements from parent bead (50+ nodes, <2s convergence, 60fps).\n\n# Test Categories\n- Property tests: force laws, vector math, symmetry\n- Integration tests: full layout on real graph topologies\n- Benchmark tests: convergence time, frame rate, memory\n- Snapshot tests: deterministic layout reproducibility\n\n# Property Tests (proptest)\n- Vec2D operations: associativity, commutativity, distributivity\n- Force symmetry: Newton's third law (equal/opposite)\n- Energy conservation: total energy decreases monotonically\n- Spring equilibrium: connected nodes converge to rest_length\n\n# Integration Tests\n- Linear chain: N nodes in sequence\n- Star topology: 1 center, N spokes\n- Grid layout: N x N lattice\n- Random DAG: 50-100 nodes with random edges\n\n# Benchmark Tests (criterion)\n- 10 node convergence time: target <100ms\n- 50 node convergence time: target <2s\n- 100 node convergence time: target <5s\n- Frame time at 50 nodes: target <16ms (60fps)\n\n# Success Criteria\n- All property tests pass with 1000 random inputs\n- Integration tests verify correct topology preservation\n- Benchmarks meet performance targets (50 nodes <2s)\n- Zero unwraps, zero panics in all test scenarios\n- Snapshot tests verify deterministic layout (same seed = same positions)\n\n# Files\n- crates/oya-ui/tests/layout_property_tests.rs - Property tests\n- crates/oya-ui/tests/layout_integration_tests.rs - Full layout tests\n- crates/oya-ui/benches/layout_benchmarks.rs - Performance benchmarks","status":"open","priority":2,"issue_type":"task","owner":"lewis","estimated_minutes":30,"created_at":"2026-02-01T14:26:05.211774258Z","created_by":"lewis","updated_at":"2026-02-01T14:26:05.211774258Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.16","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:26:05.211774258Z","created_by":"lewis"}]}
{"id":"src-1o6.17","title":"controls-pan: Implement pan with drag for DAG viewport","description":"Implement drag-to-pan functionality for DAG viewport using mouse deltas.\n\n# Scope\n- Calculate viewport offset from mouse drag delta\n- Update canvas transform for pan translation\n- Maintain pan state across render cycles\n- Smooth pan without jitter\n\n# Files\n- crates/oya-ui/src/components/controls/pan.rs - Pan logic\n\n# Success Criteria\n- Drag moves viewport smoothly\n- Pan state persists during zoom\n- No drift or coordinate errors\n- Viewport bounds handled correctly\n\n# Dependencies\n- controls-mouse: Mouse event state\n\n# Implementation Notes\n- Apply translation to Canvas2dContext transform\n- Store pan offset as (x, y) tuple in signal\n- Accumulate deltas during drag operation\n- Reset drag state on mouseup","status":"open","priority":1,"issue_type":"feature","estimated_minutes":20,"created_at":"2026-02-01T14:26:06.065641084Z","created_by":"lewis","updated_at":"2026-02-01T14:26:06.065641084Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.17","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:26:06.065641084Z","created_by":"lewis"}]}
{"id":"src-1o6.18","title":"canvas-tests: Canvas initialization tests","description":"Comprehensive test suite for Canvas initialization flow\n\n# Scope\nUnit tests for all canvas initialization beads: element creation, context acquisition, resize handling, DPI scaling, RAF loop, clear logic, and coordinate transforms.\n\n# Architecture\n- wasm-bindgen-test for browser environment\n- web-sys test fixtures (mock Window, Document)\n- Test each bead in isolation\n- Integration test for full initialization flow\n- Performance benchmarks (RAF timing, clear speed)\n\n# Test Cases\n\n## canvas-init tests\n- Creates HtmlCanvasElement successfully\n- Sets correct initial dimensions (1200x800)\n- Applies accessibility attributes\n- Attaches CSS class 'dag-canvas'\n- Returns error on invalid document\n\n## canvas-context tests\n- Acquires CanvasRenderingContext2d\n- Returns error if context unavailable\n- Type cast succeeds\n\n## canvas-resize tests\n- Attaches resize event listener\n- Updates canvas dimensions on resize\n- Debounces rapid resize events (300ms)\n- Cleans up listener on unmount\n\n## canvas-dpi tests\n- Detects device pixel ratio\n- Scales backing store correctly (1x, 2x, 3x)\n- Preserves CSS dimensions\n- Applies context scale transform\n\n## canvas-raf tests\n- Starts animation loop at 60fps\n- Calculates frame delta correctly\n- Pauses on visibility change\n- Stops cleanly on unmount\n- No memory leaks\n\n## canvas-clear tests\n- Clears canvas completely (no ghosting)\n- Applies background color\n- Renders grid when enabled\n- Performance <1ms per frame\n\n## canvas-coords tests\n- screen_to_world() transforms correctly\n- world_to_screen() transforms correctly\n- Zoom clamped to [0.1, 5.0]\n- Pan state updates correctly\n- Wheel zoom centered on cursor\n\n# Success Criteria\n- 100% code coverage for canvas module\n- All tests pass in wasm32-unknown-unknown\n- Performance benchmarks document <16ms frame budget\n- No unwraps or panics in test code\n- CI integration (moon run :test)\n\n# Dependencies\n- All canvas-* beads (tests their implementations)\n\n# Files\n- crates/oya-ui/tests/canvas/init_test.rs\n- crates/oya-ui/tests/canvas/context_test.rs\n- crates/oya-ui/tests/canvas/resize_test.rs\n- crates/oya-ui/tests/canvas/dpi_test.rs\n- crates/oya-ui/tests/canvas/raf_test.rs\n- crates/oya-ui/tests/canvas/clear_test.rs\n- crates/oya-ui/tests/canvas/coords_test.rs\n- crates/oya-ui/tests/canvas/integration_test.rs\n\n# Implementation Details\nuse wasm_bindgen_test::*;\nuse web_sys::*;\n\nwasm_bindgen_test_configure!(run_in_browser);\n\n#[wasm_bindgen_test]\nfn test_canvas_creation() {\n    let window = web_sys::window().expect(\"window\");\n    let document = window.document().expect(\"document\");\n    \n    let result = create_canvas(&document);\n    assert!(result.is_ok());\n    \n    let canvas = result.unwrap();\n    assert_eq!(canvas.width(), 1200);\n    assert_eq!(canvas.height(), 800);\n    assert_eq!(canvas.get_attribute(\"role\").unwrap(), \"img\");\n}\n\nEffort: 30min","status":"open","priority":1,"issue_type":"task","estimated_minutes":30,"created_at":"2026-02-01T14:26:07.177827769Z","created_by":"lewis","updated_at":"2026-02-01T14:26:07.177827769Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.18","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:26:07.177827769Z","created_by":"lewis"}]}
{"id":"src-1o6.19","title":"node-colors: State-based color mapping","description":"Implement color mapping from NodeState to hex color codes for consistent visual representation.\n\n# Specification\n- Implement NodeState::to_color() method returning hex string:\n  - Pending: \"#6B7280\" (gray)\n  - Scheduled: \"#FCD34D\" (yellow)\n  - Running: \"#3B82F6\" (blue)\n  - Completed: \"#10B981\" (green)\n  - Failed: \"#EF4444\" (red)\n  - Cancelled: \"#F97316\" (orange)\n- Optional: Implement to_rgb() returning (u8, u8, u8) tuple\n- Add hover state color modifier (10% lighter)\n\n# Success Criteria\n- Exhaustive match on all NodeState variants\n- Color constants defined as module consts\n- Unit tests verify all color mappings\n- No string allocation in hot path (consider Color enum)\n\n# Files\n- crates/oya-ui/src/models/node.rs - NodeState impl\n- crates/oya-ui/src/models/colors.rs - Color constants (optional)\n\n# Dependencies\n- Requires: node-struct bead completion\n\n# Implementation Notes\n- Consider Color enum with From<NodeState> impl\n- Hover modifier could be HSL-based brightness adjustment\n- Cache color strings if performance critical","status":"open","priority":1,"issue_type":"feature","owner":"lewis","estimated_minutes":10,"created_at":"2026-02-01T14:26:08.626834254Z","created_by":"lewis","updated_at":"2026-02-01T14:26:08.626834254Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.19","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:26:08.626834254Z","created_by":"lewis"}]}
{"id":"src-1o6.2","title":"canvas-raf: RequestAnimationFrame loop","description":"Implement RequestAnimationFrame-based render loop\n\n# Scope\nSet up RAF-based animation loop for smooth 60fps DAG rendering. Handle start/stop, frame timing, and integration with Leptos reactive state.\n\n# Architecture\n- web_sys::Window::request_animation_frame()\n- Closure-based RAF callback with recursion\n- Frame delta timing for physics simulation\n- Leptos RwSignal for animation state (running/paused)\n- Cleanup on component unmount (cancel_animation_frame)\n\n# Success Criteria\n- RAF loop starts on component mount\n- Runs at 60fps (16.67ms frame time)\n- Frame delta calculated (DOMHighResTimeStamp)\n- Integrates with force-directed layout updates\n- Pauses when tab loses focus (Page Visibility API)\n- Stops cleanly on component unmount\n- No unwraps or panics (Result<T, E> all the way)\n- No memory leaks (proper closure cleanup)\n\n# Dependencies\n- Bead canvas-context (requires context for rendering)\n- Bead canvas-clear (requires clear logic per frame)\n\n# Files\n- crates/oya-ui/src/components/canvas/raf.rs\n- crates/oya-ui/src/components/dag_viz.rs (integration)\n\n# Implementation Details\nuse leptos::*;\nuse web_sys::{Window, CanvasRenderingContext2d};\nuse std::cell::RefCell;\nuse std::rc::Rc;\n\nfn start_animation_loop(\n    window: &Window,\n    ctx: CanvasRenderingContext2d,\n    render_fn: impl Fn(&CanvasRenderingContext2d, f64) + 'static,\n) -> Result<i32, JsValue> {\n    let f = Rc::new(RefCell::new(None));\n    let g = f.clone();\n    \n    let mut last_time = 0.0;\n    \n    *g.borrow_mut() = Some(Closure::wrap(Box::new(move |time: f64| {\n        let delta = time - last_time;\n        last_time = time;\n        \n        render_fn(&ctx, delta);\n        \n        // Schedule next frame\n        let _ = window.request_animation_frame(f.borrow().as_ref().unwrap().as_ref().unchecked_ref());\n    }) as Box<dyn FnMut(f64)>));\n    \n    window.request_animation_frame(g.borrow().as_ref().unwrap().as_ref().unchecked_ref())\n}\n\nEffort: 20min","status":"open","priority":1,"issue_type":"feature","estimated_minutes":20,"created_at":"2026-02-01T14:25:20.191540118Z","created_by":"lewis","updated_at":"2026-02-01T14:25:20.191540118Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.2","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:25:20.191540118Z","created_by":"lewis"}]}
{"id":"src-1o6.20","title":"controls-zoom: Implement zoom with wheel for DAG viewport","description":"Implement mouse wheel zoom for DAG viewport with origin preservation.\n\n# Scope\n- Handle wheel events for zoom in/out\n- Calculate zoom factor from wheel delta\n- Preserve mouse cursor position during zoom (origin-based scaling)\n- Update canvas scale transform\n\n# Files\n- crates/oya-ui/src/components/controls/zoom.rs - Zoom logic\n\n# Success Criteria\n- Wheel zooms in/out smoothly\n- Zoom centers on mouse cursor position\n- Scale factor updates correctly\n- No coordinate drift during zoom\n\n# Dependencies\n- controls-mouse: Mouse event state\n\n# Implementation Notes\n- Use WheelEvent.deltaY for zoom direction\n- Apply scale transform around mouse origin\n- Compute inverse transform for cursor preservation\n- Store zoom level as f64 scalar in signal","status":"open","priority":1,"issue_type":"feature","estimated_minutes":20,"created_at":"2026-02-01T14:26:09.398705446Z","created_by":"lewis","updated_at":"2026-02-01T14:26:09.398705446Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.20","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:26:09.398705446Z","created_by":"lewis"}]}
{"id":"src-1o6.21","title":"controls-touch: Touch gesture support for DAG pan/zoom","description":"Implement touch gesture support for mobile/tablet pan and pinch-zoom.\n\n# Scope\n- Single-finger drag for panning\n- Two-finger pinch for zooming\n- Touch event coordinate conversion\n- Gesture state management\n\n# Files\n- crates/oya-ui/src/components/controls/touch.rs - Touch handlers\n\n# Success Criteria\n- Single touch pans viewport\n- Pinch gesture zooms smoothly\n- Touch and mouse controls don't conflict\n- Gestures feel natural on mobile\n\n# Dependencies\n- controls-pan: Pan logic\n- controls-zoom: Zoom logic\n\n# Implementation Notes\n- Use web-sys::TouchEvent for touch input\n- Calculate pinch distance for zoom factor\n- Track active touch points in Set\n- Prevent default touch behaviors (scroll, zoom)","status":"open","priority":1,"issue_type":"feature","estimated_minutes":25,"created_at":"2026-02-01T14:26:14.720750609Z","created_by":"lewis","updated_at":"2026-02-01T14:26:14.720750609Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.21","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:26:14.720750609Z","created_by":"lewis"}]}
{"id":"src-1o6.22","title":"node-shapes: Circle/rect rendering","description":"Implement canvas rendering for circle and rectangle node shapes with state-based fill colors.\n\n# Specification\n- Implement Node::render() method taking Canvas2dContext\n- Circle rendering:\n  - arc(x, y, radius, 0, 2*PI)\n  - fill with state color\n  - stroke with darker border (2px)\n- Rectangle rendering:\n  - fillRect(x - width/2, y - height/2, width, height)\n  - strokeRect for border\n  - optional rounded corners (border-radius: 4px)\n- Apply hover state visual feedback (lighter fill + shadow)\n\n# Success Criteria\n- Render matches design spec exactly\n- No unwraps in rendering code (handle context errors)\n- Shapes centered on node position\n- Border width scales with zoom level\n- Performance: <0.5ms per node render at 60fps\n\n# Files\n- crates/oya-ui/src/rendering/node_renderer.rs - Shape rendering\n- crates/oya-ui/src/models/node.rs - Node::render() method\n\n# Dependencies\n- Requires: node-struct, node-colors beads\n- web-sys Canvas2dContext\n\n# Implementation Notes\n- Use Canvas2dContext::set_fill_style() with state color\n- Cache JsValue color strings to avoid allocation\n- Consider OffscreenCanvas for pre-rendering templates\n- Handle Result<(), JsValue> from canvas methods","status":"open","priority":1,"issue_type":"feature","owner":"lewis","estimated_minutes":20,"created_at":"2026-02-01T14:26:15.869704346Z","created_by":"lewis","updated_at":"2026-02-01T14:26:15.869704346Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.22","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:26:15.869704346Z","created_by":"lewis"}]}
{"id":"src-1o6.23","title":"controls-bounds: Zoom level clamping (0.1x-5x) for DAG","description":"Implement zoom level bounds and viewport edge clamping for DAG controls.\n\n# Scope\n- Clamp zoom scale to 0.1x-5x range\n- Prevent panning beyond graph bounds\n- Calculate visible viewport rectangle\n- Apply constraints to pan/zoom transforms\n\n# Files\n- crates/oya-ui/src/components/controls/bounds.rs - Bounds logic\n\n# Success Criteria\n- Zoom clamped to [0.1, 5.0] range\n- Pan constrained to graph extents\n- Smooth behavior at limits\n- No jarring stops or jumps\n\n# Dependencies\n- controls-pan: Pan state\n- controls-zoom: Zoom state\n\n# Implementation Notes\n- Clamp zoom: zoom.clamp(0.1, 5.0)\n- Calculate graph bounding box from node positions\n- Apply edge constraints to pan offset\n- Update constraints when graph changes","status":"open","priority":1,"issue_type":"feature","estimated_minutes":15,"created_at":"2026-02-01T14:26:18.187239933Z","created_by":"lewis","updated_at":"2026-02-01T14:26:18.187239933Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.23","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:26:18.187239933Z","created_by":"lewis"}]}
{"id":"src-1o6.24","title":"controls-tests: Comprehensive interaction tests for DAG pan/zoom controls","description":"Write comprehensive tests for DAG pan/zoom control interactions.\n\n# Scope\n- Unit tests for mouse/touch event handlers\n- Integration tests for pan/zoom transforms\n- Bounds checking validation\n- Event state management tests\n\n# Files\n- crates/oya-ui/tests/controls_mouse_test.rs - Mouse event tests\n- crates/oya-ui/tests/controls_pan_test.rs - Pan behavior tests\n- crates/oya-ui/tests/controls_zoom_test.rs - Zoom behavior tests\n- crates/oya-ui/tests/controls_touch_test.rs - Touch gesture tests\n- crates/oya-ui/tests/controls_bounds_test.rs - Bounds validation tests\n\n# Success Criteria\n- 95%+ code coverage for control modules\n- Pan/zoom edge cases validated\n- Event race conditions tested\n- Touch gesture accuracy verified\n\n# Dependencies\n- controls-mouse: Mouse events\n- controls-pan: Pan logic\n- controls-zoom: Zoom logic\n- controls-touch: Touch gestures\n- controls-bounds: Bounds constraints\n\n# Implementation Notes\n- Mock DOM events with web-sys test helpers\n- Test transform matrix calculations\n- Verify signal updates with Leptos testing utils\n- Check bounds edge cases (min/max zoom, graph edges)","status":"open","priority":1,"issue_type":"test","estimated_minutes":30,"created_at":"2026-02-01T14:26:24.307914087Z","created_by":"lewis","updated_at":"2026-02-01T14:26:24.307914087Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.24","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:26:24.307914087Z","created_by":"lewis"}]}
{"id":"src-1o6.25","title":"node-labels: Text label rendering","description":"Implement text label rendering for node titles with automatic truncation and positioning.\n\n# Specification\n- Render node label centered below node shape\n- Text styling:\n  - Font: 12px Inter, sans-serif\n  - Color: #1F2937 (dark gray)\n  - Max width: 120px\n  - Truncate with ellipsis if overflow\n- Label positioning:\n  - Circle: y_offset = radius + 16px\n  - Rectangle: y_offset = height/2 + 12px\n  - Centered horizontally on node x-coordinate\n- Implement text measurement for proper centering\n\n# Success Criteria\n- Labels render at correct position for both shapes\n- Text truncates gracefully with \"...\"\n- No text overlaps with node shapes\n- Readable at default zoom (100%)\n- Handles empty/missing labels gracefully\n- No panics on measurement failures\n\n# Files\n- crates/oya-ui/src/rendering/label_renderer.rs - Text rendering\n- crates/oya-ui/src/models/node.rs - Label render method\n\n# Dependencies\n- Requires: node-struct, node-shapes beads\n- web-sys Canvas2dContext::measure_text()\n\n# Implementation Notes\n- Use measureText() to calculate text width\n- Cache font metrics to avoid repeated measurement\n- Consider multi-line labels for long titles (wrap at 2 lines max)\n- Handle Result from fillText() properly","status":"open","priority":1,"issue_type":"feature","owner":"lewis","estimated_minutes":20,"created_at":"2026-02-01T14:26:25.684636294Z","created_by":"lewis","updated_at":"2026-02-01T14:26:25.684636294Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.25","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:26:25.684636294Z","created_by":"lewis"}]}
{"id":"src-1o6.26","title":"node-hover: Hover state detection","description":"Implement mouse hover detection for nodes with hit-testing for circle and rectangle shapes.\n\n# Specification\n- Implement Node::contains_point(x: f64, y: f64) -> bool\n- Circle hit-test: distance from center <= radius\n- Rectangle hit-test: point within bounds (AABB)\n- Handle canvas coordinate transforms (pan/zoom)\n- Add mousemove event listener to canvas\n- Update node.hovered state reactively\n- Cursor changes to pointer on hover\n\n# Success Criteria\n- Accurate hit detection for both shapes\n- No false positives on overlapping nodes\n- Hover state updates within 16ms (60fps)\n- Cursor feedback immediate (<100ms)\n- Handles viewport transforms correctly\n- No memory leaks from event listeners\n\n# Files\n- crates/oya-ui/src/interaction/hover.rs - Hit testing logic\n- crates/oya-ui/src/models/node.rs - contains_point() method\n- crates/oya-ui/src/components/dag_viz.rs - Event listener setup\n\n# Dependencies\n- Requires: node-struct bead\n- web-sys MouseEvent, HtmlCanvasElement\n\n# Implementation Notes\n- Use Leptos create_effect for reactive hover updates\n- Debounce hover checks if performance critical\n- Consider spatial indexing (quadtree) for 50+ nodes\n- Handle touch events for mobile (touchstart/touchend)","status":"open","priority":1,"issue_type":"feature","owner":"lewis","estimated_minutes":15,"created_at":"2026-02-01T14:26:31.867231848Z","created_by":"lewis","updated_at":"2026-02-01T14:26:31.867231848Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.26","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:26:31.867231848Z","created_by":"lewis"}]}
{"id":"src-1o6.27","title":"node-tests: Node rendering tests","description":"Comprehensive unit and integration tests for node rendering, color mapping, and interaction.\n\n# Test Coverage\n1. **Unit Tests (node.rs)**:\n   - NodeState color mapping (all 6 states)\n   - Node struct construction with valid/invalid data\n   - contains_point() hit detection (circle/rect, edge cases)\n   - Default implementations\n\n2. **Integration Tests (node_renderer.rs)**:\n   - Circle rendering with all states\n   - Rectangle rendering with all states\n   - Label truncation at various lengths\n   - Hover state visual feedback\n   - Multi-node rendering (10+ nodes)\n\n3. **Property Tests (proptest)**:\n   - Hit detection is symmetric\n   - Colors always valid hex codes\n   - Label truncation preserves prefix\n   - Position transforms preserve containment\n\n# Success Criteria\n- 100% code coverage for node module\n- All edge cases handled (empty labels, zero radius, etc.)\n- Tests run in <500ms total\n- No panics in test execution\n- Property tests find no regressions\n\n# Files\n- crates/oya-ui/tests/node_test.rs - Unit tests\n- crates/oya-ui/tests/node_renderer_test.rs - Integration tests\n- crates/oya-ui/tests/node_property_test.rs - Property tests\n\n# Dependencies\n- Requires: ALL previous node-* beads completed\n- wasm-bindgen-test for browser tests\n- proptest for property-based testing\n\n# Implementation Notes\n- Use wasm-bindgen-test for canvas rendering tests\n- Mock Canvas2dContext for isolated rendering tests\n- Snapshot tests for visual regression (optional)\n- Benchmark critical paths (render, hit-test)","status":"open","priority":1,"issue_type":"test","owner":"lewis","estimated_minutes":25,"created_at":"2026-02-01T14:26:37.330496653Z","created_by":"lewis","updated_at":"2026-02-01T14:26:37.330496653Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.27","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:26:37.330496653Z","created_by":"lewis"}]}
{"id":"src-1o6.28","title":"edge-struct: Define Edge data structure","description":"Define the core Edge data structure for DAG edge rendering in Leptos components.\n\n# Specification\n- Create `Edge` struct with source/target node IDs\n- Support edge metadata (type, weight, label)\n- Derive Clone, Debug, PartialEq for testing\n- Add edge color/style properties (solid, dashed, dotted)\n- Include edge state (normal, highlighted, dimmed)\n\n# Data Structure\n```rust\npub struct Edge {\n    pub id: EdgeId,\n    pub source: NodeId,\n    pub target: NodeId,\n    pub edge_type: EdgeType,\n    pub weight: f64,\n    pub label: Option<String>,\n    pub style: EdgeStyle,\n    pub state: EdgeState,\n}\n\npub enum EdgeType {\n    Dependency,      // Standard dependency edge\n    Weak,            // Weak/soft dependency\n    Conflict,        // Conflicting edge\n}\n\npub enum EdgeStyle {\n    Solid,\n    Dashed,\n    Dotted,\n}\n\npub enum EdgeState {\n    Normal,\n    Highlighted,     // When node selected\n    Dimmed,          // When other node selected\n}\n```\n\n# Files\n- crates/oya-ui/src/components/dag_edge.rs - Edge struct definition\n\n# Success Criteria\n- Edge struct compiles with all derives\n- EdgeType/EdgeStyle/EdgeState enums defined\n- No panics, no unwraps\n- Type-safe node ID references\n\n# Dependencies\n- Parent: src-1o6 (DAG visualization)\n- Node ID types from dag_node.rs\n\n# Notes\n- Edges point TOWARD dependent nodes (target depends on source)\n- Arrow direction: source → target\n- Edge weight used for layout calculations","status":"open","priority":1,"issue_type":"feature","estimated_minutes":10,"created_at":"2026-02-01T14:26:53.406568377Z","created_by":"lewis","updated_at":"2026-02-01T14:26:53.406568377Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.28","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:26:53.406568377Z","created_by":"lewis"}]}
{"id":"src-1o6.29","title":"layout: Define force equations and vector math","description":"Define core force equation types and vector mathematics for force-directed layout. Implements Force trait, Vec2D operations (add, subtract, scale, magnitude, normalize), and force accumulation. Based on D3-force architecture with separated force types.\n\n# Architecture\n- Force trait with apply() method returning Vec2D\n- Vec2D struct with x, y fields and vector operations\n- Node position/velocity tracking structs\n- Force accumulation and integration logic\n\n# Implementation Details\n- Vec2D: add, subtract, scale, magnitude, normalize, distance\n- Force trait: apply(node_id, graph_state) -> Vec2D\n- NodeState: position, velocity, acceleration fields\n- Verlet integration: position += velocity + 0.5 * acceleration * dt^2\n\n# Success Criteria\n- Vec2D operations pass property tests (associativity, commutativity)\n- Force accumulation combines multiple forces correctly\n- Integration step updates positions with correct physics\n- Zero unwraps, zero panics, functional patterns\n\n# Files\n- crates/oya-ui/src/layout/forces.rs - Force trait + Vec2D\n- crates/oya-ui/src/layout/node_state.rs - Position/velocity tracking","status":"open","priority":1,"issue_type":"feature","owner":"lewis","estimated_minutes":20,"created_at":"2026-02-01T14:27:17.684383182Z","created_by":"lewis","updated_at":"2026-02-01T14:27:17.684383182Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.29","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:27:17.684383182Z","created_by":"lewis"}]}
{"id":"src-1o6.3","title":"layout: Spring force for edge connections","description":"Implement spring force along edges using Hooke's law. Attracts connected nodes toward ideal edge length. Configurable stiffness and rest length parameters.\n\n# Architecture\n- SpringForce struct with stiffness and rest_length parameters\n- Force calculation: F = k * (distance - rest_length) * direction\n- Apply force to both source and target nodes (equal/opposite)\n- Edge iteration with parallel force calculation\n\n# Implementation Details\n- Hooke's law: F = -k * x (where x = displacement from rest)\n- Stiffness k: typical range 0.01 - 0.1\n- Rest length: typical 50-100 pixels\n- Direction: normalized vector from source to target\n- Bilateral force: apply +F to target, -F to source\n\n# Success Criteria\n- Connected nodes converge to rest_length distance\n- Stronger springs (higher k) converge faster\n- Force magnitude proportional to displacement\n- Handles zero-length edges gracefully (no division by zero)\n- Property tests verify Newton's third law (equal/opposite)\n\n# Files\n- crates/oya-ui/src/layout/spring_force.rs - Spring force implementation\n- crates/oya-ui/tests/spring_force_test.rs - Unit tests","status":"open","priority":1,"issue_type":"feature","owner":"lewis","estimated_minutes":20,"created_at":"2026-02-01T14:25:22.492624686Z","created_by":"lewis","updated_at":"2026-02-01T14:25:22.492624686Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.3","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:25:22.492624686Z","created_by":"lewis"}]}
{"id":"src-1o6.30","title":"canvas-init: HTML5 Canvas element creation","description":"HTML5 Canvas element creation and DOM integration\n\n# Scope\nCreate and append HTML5 Canvas element to Leptos component DOM. Handle initial sizing, attributes, and accessibility properties.\n\n# Architecture\n- web-sys::HtmlCanvasElement creation\n- DOM node mounting via Leptos NodeRef\n- Initial width/height attributes (1200x800)\n- Accessibility attributes (role, aria-label)\n- CSS class attachment for styling\n\n# Success Criteria\n- Canvas element created programmatically\n- Mounted to DOM via Leptos component lifecycle\n- Initial size set to 1200x800 logical pixels\n- Accessibility attributes present (ARIA)\n- CSS class 'dag-canvas' attached\n- No unwraps or panics (Result<T, E> all the way)\n\n# Files\n- crates/oya-ui/src/components/canvas/init.rs\n- crates/oya-ui/src/components/dag_viz.rs (integration)\n\nEffort: 10min","status":"open","priority":1,"issue_type":"feature","estimated_minutes":10,"created_at":"2026-02-01T14:27:54.721429222Z","created_by":"lewis","updated_at":"2026-02-01T14:27:54.721429222Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.30","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:27:54.721429222Z","created_by":"lewis"}]}
{"id":"src-1o6.31","title":"canvas-context: Get Canvas2dContext","description":"Acquire Canvas 2D rendering context with error handling\n\n# Scope\nGet Canvas2dContext from HtmlCanvasElement with proper error handling and type safety. Store context in Leptos reactive state.\n\n# Architecture\n- web-sys::CanvasRenderingContext2d acquisition\n- Type-safe JsValue -> CanvasRenderingContext2d casting\n- Leptos RwSignal for context storage\n- Error handling for unsupported browsers\n\n# Success Criteria\n- Context acquired via get_context(\"2d\")?\n- Type cast to CanvasRenderingContext2d with error handling\n- Stored in RwSignal<Option<CanvasRenderingContext2d>>\n- Error returned if context unavailable\n- No unwraps or panics (Result<T, E> all the way)\n- Works in wasm32-unknown-unknown target\n\n# Files\n- crates/oya-ui/src/components/canvas/context.rs\n- crates/oya-ui/src/components/dag_viz.rs (integration)\n\nEffort: 10min","status":"open","priority":1,"issue_type":"feature","estimated_minutes":10,"created_at":"2026-02-01T14:28:04.113481462Z","created_by":"lewis","updated_at":"2026-02-01T14:28:04.113481462Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.31","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:28:04.113481462Z","created_by":"lewis"}]}
{"id":"src-1o6.32","title":"canvas-resize: Window resize handling","description":"Handle window resize events and update canvas dimensions\n\n# Scope\nListen for window resize events, calculate new canvas dimensions based on parent container, and trigger redraw. Includes debouncing.\n\n# Architecture\n- web-sys::Window resize event listener\n- Leptos create_effect for reactive resize handling\n- Debounce logic (300ms) to batch rapid resizes\n- Canvas dimension update (width/height attributes)\n- Trigger layout recalculation signal\n\n# Success Criteria\n- Resize event listener attached on mount\n- Debounced to 300ms (prevents 60fps resize spam)\n- Canvas dimensions update to container size\n- Triggers force layout recalculation\n- Cleanup event listener on component unmount\n- No unwraps or panics (Result<T, E> all the way)\n- Memory leak free (closure cleanup)\n\n# Files\n- crates/oya-ui/src/components/canvas/resize.rs\n- crates/oya-ui/src/components/dag_viz.rs (integration)\n\nEffort: 15min","status":"open","priority":1,"issue_type":"feature","estimated_minutes":15,"created_at":"2026-02-01T14:28:12.381100931Z","created_by":"lewis","updated_at":"2026-02-01T14:28:12.381100931Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.32","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:28:12.381100931Z","created_by":"lewis"}]}
{"id":"src-1o6.33","title":"canvas-dpi: Retina display scaling","description":"Handle HiDPI/Retina display scaling for crisp rendering\n\n# Scope\nDetect device pixel ratio, scale canvas backing store accordingly, and adjust CSS dimensions for pixel-perfect rendering on HiDPI displays.\n\n# Architecture\n- web_sys::Window::device_pixel_ratio() detection\n- Canvas backing store scaling (width/height * dpr)\n- CSS size preservation (style.width/height)\n- CanvasRenderingContext2d.scale(dpr, dpr) transform\n- Dynamic DPI change handling (browser zoom)\n\n# Success Criteria\n- Device pixel ratio detected correctly (1.0, 2.0, 3.0, etc.)\n- Canvas backing store scaled (e.g., 2400x1600 for 1200x800 @ 2x)\n- CSS dimensions unchanged (1200x800 logical pixels)\n- Context scaled to match backing store\n- Text/lines render crisp on Retina displays\n- No unwraps or panics (Result<T, E> all the way)\n- Handles DPI changes (browser zoom events)\n\n# Files\n- crates/oya-ui/src/components/canvas/dpi.rs\n- crates/oya-ui/src/components/dag_viz.rs (integration)\n\nEffort: 15min","status":"open","priority":1,"issue_type":"feature","estimated_minutes":15,"created_at":"2026-02-01T14:28:21.380221746Z","created_by":"lewis","updated_at":"2026-02-01T14:28:21.380221746Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.33","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:28:21.380221746Z","created_by":"lewis"}]}
{"id":"src-1o6.4","title":"edge-lines: Line path calculation","description":"Implement straight line path calculation for DAG edges between nodes.\n\n# Specification\n- Calculate line path from source node center to target node center\n- Adjust endpoints to node boundaries (avoid overlapping node circles)\n- Handle node radius for circle/ellipse shapes\n- Support different node sizes dynamically\n- Return PathSegment with start/end coordinates\n\n# Algorithm\n1. Get source node (x1, y1) and target node (x2, y2) positions\n2. Calculate direction vector: (dx, dy) = (x2-x1, y2-y1)\n3. Normalize direction: magnitude = sqrt(dx² + dy²)\n4. Adjust start point: (x1 + dx/mag * r1, y1 + dy/mag * r1)\n5. Adjust end point: (x2 - dx/mag * r2, y2 - dy/mag * r2)\n6. Return adjusted line segment\n\n# Function Signature\n```rust\npub fn calculate_line_path(\n    source_pos: (f64, f64),\n    source_radius: f64,\n    target_pos: (f64, f64),\n    target_radius: f64,\n) -> Result<PathSegment, EdgeError> {\n    // Implementation here\n}\n\npub struct PathSegment {\n    pub start: (f64, f64),\n    pub end: (f64, f64),\n    pub length: f64,\n}\n```\n\n# Files\n- crates/oya-ui/src/components/dag_edge.rs - Line path calculations\n\n# Success Criteria\n- Straight lines render between node boundaries\n- No division by zero (handle coincident nodes)\n- Paths update when nodes move\n- Zero panics, zero unwraps\n- All errors use Result<T, EdgeError>\n\n# Edge Cases\n- Coincident nodes (same position)\n- Overlapping nodes\n- Self-loops (source == target)\n\n# Dependencies\n- Depends on edge-struct bead (Edge data structure)\n\n# Notes\n- Use f64 for precision in layout calculations\n- Arrow points toward TARGET node (dependent)","status":"open","priority":1,"issue_type":"feature","estimated_minutes":20,"created_at":"2026-02-01T14:25:24.509482796Z","created_by":"lewis","updated_at":"2026-02-01T14:25:24.509482796Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.4","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:25:24.509482796Z","created_by":"lewis"}]}
{"id":"src-1o6.5","title":"layout: Node repulsion force (n-body)","description":"Implement n-body repulsion force to prevent node overlap. Uses Barnes-Hut quadtree for O(n log n) performance instead of naive O(n²). Configurable charge strength and distance limits.\n\n# Architecture\n- ChargeForce struct with strength and distance_min/max parameters\n- Quadtree spatial indexing for efficient force calculation\n- Coulomb's law: F = k * q1 * q2 / r² (repulsive when q same sign)\n- Distance clamping to prevent infinite forces\n\n# Implementation Details\n- Barnes-Hut theta parameter: 0.9 (accuracy vs speed tradeoff)\n- Charge strength: typical -30 to -100 (negative = repulsion)\n- Distance min: 1.0 (prevent division by zero)\n- Distance max: 500.0 (limit long-range interactions)\n- Quadtree cell aggregation for distant nodes\n\n# Success Criteria\n- O(n log n) complexity verified with benchmark tests\n- Nodes maintain minimum separation distance\n- No overlap in final layout (verified with collision detection)\n- Quadtree correctly aggregates distant node clusters\n- Force falls off with inverse square of distance\n\n# Files\n- crates/oya-ui/src/layout/charge_force.rs - N-body repulsion\n- crates/oya-ui/src/layout/quadtree.rs - Barnes-Hut spatial index\n- crates/oya-ui/tests/charge_force_test.rs - Unit + benchmark tests","status":"open","priority":1,"issue_type":"feature","owner":"lewis","estimated_minutes":20,"created_at":"2026-02-01T14:25:30.324383685Z","created_by":"lewis","updated_at":"2026-02-01T14:25:30.324383685Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.5","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:25:30.324383685Z","created_by":"lewis"}]}
{"id":"src-1o6.6","title":"canvas-clear: Clear and redraw logic","description":"Implement canvas clear and background rendering\n\n# Scope\nClear canvas on each frame and draw background grid/pattern. Prevents ghosting from previous frames and provides visual reference grid.\n\n# Architecture\n- CanvasRenderingContext2d.clear_rect() for full clear\n- Background grid rendering (optional, configurable)\n- Solid background color (#1F2937 dark gray)\n- Integration with RAF render loop\n\n# Success Criteria\n- Canvas cleared each frame (no ghosting)\n- Background color applied (#1F2937)\n- Optional grid overlay (10px spacing, #374151)\n- Performance: <1ms per frame for clear+background\n- No unwraps or panics (Result<T, E> all the way)\n- Configurable via props (show_grid: bool)\n\n# Dependencies\n- Bead canvas-context (requires 2D context)\n- Bead canvas-dpi (requires proper scaling)\n\n# Files\n- crates/oya-ui/src/components/canvas/clear.rs\n- crates/oya-ui/src/components/dag_viz.rs (integration)\n\n# Implementation Details\nuse web_sys::CanvasRenderingContext2d;\n\nfn clear_canvas(\n    ctx: &CanvasRenderingContext2d,\n    width: f64,\n    height: f64,\n    show_grid: bool,\n) -> Result<(), JsValue> {\n    // Clear entire canvas\n    ctx.clear_rect(0.0, 0.0, width, height);\n    \n    // Solid background\n    ctx.set_fill_style(&JsValue::from_str(\"#1F2937\"));\n    ctx.fill_rect(0.0, 0.0, width, height);\n    \n    // Optional grid\n    if show_grid {\n        ctx.set_stroke_style(&JsValue::from_str(\"#374151\"));\n        ctx.set_line_width(0.5);\n        \n        // Vertical lines\n        for x in (0..width as i32).step_by(10) {\n            ctx.move_to(x as f64, 0.0);\n            ctx.line_to(x as f64, height);\n        }\n        \n        // Horizontal lines\n        for y in (0..height as i32).step_by(10) {\n            ctx.move_to(0.0, y as f64);\n            ctx.line_to(width, y as f64);\n        }\n        \n        ctx.stroke();\n    }\n    \n    Ok(())\n}\n\nEffort: 10min","status":"open","priority":1,"issue_type":"feature","estimated_minutes":10,"created_at":"2026-02-01T14:25:32.951590504Z","created_by":"lewis","updated_at":"2026-02-01T14:25:32.951590504Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.6","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:25:32.951590504Z","created_by":"lewis"}]}
{"id":"src-1o6.7","title":"edge-curves: Bezier curve for parallel edges","description":"Implement quadratic Bezier curves for parallel edges in DAG rendering.\n\n# Specification\n- Detect parallel edges (A→B and B→A, or multiple A→B)\n- Calculate control point offset perpendicular to line\n- Generate smooth quadratic Bezier curve\n- Support configurable curve intensity (offset distance)\n- Handle edge bundling for multiple parallel edges\n\n# Algorithm\n1. Detect parallel edges: same source/target or reverse pair\n2. Calculate midpoint: (x_mid, y_mid) = ((x1+x2)/2, (y1+y2)/2)\n3. Calculate perpendicular offset vector\n4. Apply offset multiplier based on edge index\n5. Generate quadratic Bezier with control point\n6. Sample curve into line segments for rendering\n\n# Function Signature\n```rust\npub fn calculate_bezier_curve(\n    source_pos: (f64, f64),\n    target_pos: (f64, f64),\n    offset_factor: f64,  // 0.0 = straight, 1.0 = curved\n    edge_index: usize,   // For multiple parallel edges\n) -> Result<CurvePath, EdgeError> {\n    // Implementation here\n}\n\npub struct CurvePath {\n    pub start: (f64, f64),\n    pub control: (f64, f64),\n    pub end: (f64, f64),\n    pub segments: Vec<(f64, f64)>,  // Sampled points for Canvas\n}\n```\n\n# Canvas Rendering\n- Use Canvas2D quadraticCurveTo() for smooth curves\n- Sample curve at 10-20 points for hit-testing\n- Cache sampled points for performance\n\n# Files\n- crates/oya-ui/src/components/dag_edge.rs - Bezier curve calculations\n\n# Success Criteria\n- Parallel edges render as distinct curves\n- Curves don't overlap\n- Smooth visual appearance\n- Zero panics, zero unwraps\n- Result-based error handling\n\n# Edge Cases\n- 3+ parallel edges (bundle spacing)\n- Bidirectional edges (A→B and B→A)\n- Very short edges (curve degenerate case)\n\n# Dependencies\n- Depends on edge-lines bead (line path calculation)\n\n# Notes\n- Offset should be proportional to edge length\n- Arrow points toward TARGET (dependent node)\n- Use perpendicular vector: (-dy, dx) for offset direction","status":"open","priority":1,"issue_type":"feature","estimated_minutes":25,"created_at":"2026-02-01T14:25:34.596256438Z","created_by":"lewis","updated_at":"2026-02-01T14:25:34.596256438Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.7","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:25:34.596256438Z","created_by":"lewis"}]}
{"id":"src-1o6.8","title":"layout: Center gravity force","description":"Implement weak gravity force pulling nodes toward viewport center. Prevents graph from drifting off-screen. Configurable strength and center point.\n\n# Architecture\n- CenterForce struct with strength and center (x, y) parameters\n- Linear force proportional to distance from center\n- Weak strength to avoid overcrowding (0.01 - 0.05)\n- Applied equally to all nodes\n\n# Implementation Details\n- Force equation: F = strength * (center - position)\n- Typical strength: 0.03 (weak pull, doesn't dominate layout)\n- Center point: viewport midpoint (width/2, height/2)\n- Linear force (not inverse square) for gentle pull\n- No distance cutoff (applies to all nodes)\n\n# Success Criteria\n- Graph stays centered in viewport during simulation\n- Nodes don't drift off-screen during long simulations\n- Weak enough to not override spring/repulsion forces\n- Property test: center of mass converges toward target center\n- Handles viewport resize by updating center point\n\n# Files\n- crates/oya-ui/src/layout/center_force.rs - Gravity implementation\n- crates/oya-ui/tests/center_force_test.rs - Unit tests","status":"open","priority":1,"issue_type":"feature","owner":"lewis","estimated_minutes":15,"created_at":"2026-02-01T14:25:37.615543034Z","created_by":"lewis","updated_at":"2026-02-01T14:25:37.615543034Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.8","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:25:37.615543034Z","created_by":"lewis"}]}
{"id":"src-1o6.9","title":"edge-arrows: Arrow head rendering","description":"Implement arrow head rendering for DAG edges pointing toward dependent nodes.\n\n# Specification\n- Calculate arrow head triangle at target end of edge\n- Support configurable arrow size (length, width)\n- Render filled triangle using Canvas path\n- Handle both straight lines and Bezier curves\n- Arrow points TOWARD target (dependent node)\n\n# Algorithm\n1. Get edge direction at target endpoint\n2. Calculate perpendicular vector for arrow wings\n3. Generate 3 triangle points: tip + 2 wings\n4. Fill triangle using Canvas fillPath\n5. Support different arrow styles (filled, outline, none)\n\n# Function Signature\n```rust\npub fn calculate_arrow_head(\n    edge_end: (f64, f64),\n    direction: (f64, f64),  // Normalized direction vector\n    arrow_length: f64,\n    arrow_width: f64,\n) -> Result<ArrowPath, EdgeError> {\n    // Implementation here\n}\n\npub struct ArrowPath {\n    pub tip: (f64, f64),\n    pub wing1: (f64, f64),\n    pub wing2: (f64, f64),\n}\n\npub enum ArrowStyle {\n    Filled,      // Solid triangle\n    Outline,     // Stroke only\n    None,        // No arrow (for weak deps)\n}\n```\n\n# Canvas Rendering\n```javascript\nctx.beginPath();\nctx.moveTo(tip.x, tip.y);\nctx.lineTo(wing1.x, wing1.y);\nctx.lineTo(wing2.x, wing2.y);\nctx.closePath();\nctx.fill();  // or ctx.stroke()\n```\n\n# Files\n- crates/oya-ui/src/components/dag_edge.rs - Arrow rendering\n\n# Success Criteria\n- Arrows point correctly toward target node\n- Arrow size scales with zoom level\n- Clean triangle rendering at all angles\n- Zero panics, zero unwraps\n- Result-based error handling\n\n# Arrow Size Defaults\n- Length: 12px\n- Width: 8px\n- Scale with zoom: arrow_size * zoom_factor\n\n# Dependencies\n- Depends on edge-lines bead (line path)\n- Depends on edge-curves bead (Bezier curves)\n\n# Notes\n- Arrow direction: normalize(target - source)\n- For Bezier curves: use tangent at endpoint\n- Perpendicular vector: (-dy, dx) for wings","status":"open","priority":1,"issue_type":"feature","estimated_minutes":20,"created_at":"2026-02-01T14:25:45.989462494Z","created_by":"lewis","updated_at":"2026-02-01T14:25:45.989462494Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-1o6.9","depends_on_id":"src-1o6","type":"parent-child","created_at":"2026-02-01T14:25:45.989462494Z","created_by":"lewis"}]}
{"id":"src-1oc","title":"ui-dag: Implement viewport culling for performance","description":"Optimize rendering for large graphs (100+ nodes): only render nodes/edges visible in viewport, skip offscreen elements. Implement spatial index (quadtree or grid). Target: 60fps with 200 nodes. Files: crates/oya-ui/src/components/dag_viz/culling.rs. Tests: culling works, FPS maintained, memory stable. Effort: 1hr. Parent: src-1o6","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-01T14:01:43.100495246Z","created_by":"lewis","updated_at":"2026-02-01T14:01:43.100495246Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-1oe","title":"event-sourcing: DurableEventStore: Implement batch append operations","description":"# Architecture\nImplement append_batch() for bulk event insertion with single fsync (performance optimization).\n\n# Files\n- crates/events/src/durable_store/batch.rs - Batch append implementation\n\n# Success Criteria\n- append_batch(events: Vec<Event>) -> Result<Vec<EventId>, BatchAppendError>\n- Single transaction for all events\n- Single fsync at end (not per-event) for performance\n\n# Quality Standards\n- Zero unwraps, zero panics\n- Railway-Oriented Programming for batch operations\n- Atomic batch (all succeed or all fail)","status":"open","priority":1,"issue_type":"feature","estimated_minutes":30,"created_at":"2026-02-01T14:45:46.863697601Z","created_by":"lewis","updated_at":"2026-02-01T14:45:46.863697601Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-1of4","title":"checkpoint: CheckpointManager: Implement checkpoint serialization with bincode","description":"# Architecture\nSerialize workflow state to bytes using bincode, then compress with zstd before storage.\n\n# Files\n- crates/workflow/src/checkpoint/serialize.rs - State serialization\n\n# Success Criteria\n- serialize_state<T: Serialize>(state: &T) -> Result<Vec<u8>, SerializeError>\n- Pipeline: bincode serialize → zstd compress\n- Include version header for future compatibility\n\n# Quality Standards\n- Zero unwraps, zero panics\n- Railway-Oriented Programming: serialize.and_then(compress)\n- Version header: magic bytes + version u32","status":"open","priority":1,"issue_type":"feature","estimated_minutes":30,"created_at":"2026-02-01T14:47:21.847019140Z","created_by":"lewis","updated_at":"2026-02-01T14:47:21.847019140Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-1pd","title":"event-sourcing: SurrealDB Schema: Schema validation and migration","description":"# Architecture\nImplement schema validation script (validates all tables load) and migration framework for safe schema upgrades.\n\n# Files\n- scripts/validate-schema.sh - Schema validation script\n- scripts/migrate-schema.nu - Migration script with version tracking\n- crates/events/src/schema/migration.rs - Rust migration API\n\n# Success Criteria\n- Schema validates on fresh database (all tables created)\n- Migration tracks schema version in metadata table\n- Rollback support for failed migrations\n\n# Quality Standards\n- Zero unwraps, zero panics\n- Railway-Oriented Programming for migration errors\n- Idempotent migrations (can run multiple times safely)","status":"open","priority":1,"issue_type":"feature","estimated_minutes":30,"created_at":"2026-02-01T14:45:15.349451891Z","created_by":"lewis","updated_at":"2026-02-01T14:45:15.349451891Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-1pp","title":"[test] Happy path verification - normal spawn","description":"Test that normal spawn operation works without errors. This is a Red Queen test to verify that the transaction tracking and cleanup logic doesn't break normal spawn workflows.","acceptance_criteria":"- Run zjj spawn with valid bead\n- Operation completes successfully\n- No cleanup artifacts left\n- Recovery log not created on success","status":"in_progress","priority":2,"issue_type":"bug","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T14:45:24.846839673Z","created_by":"Lewis Prior","updated_at":"2026-02-01T07:34:18.943690848Z","source_repo":".","compaction_level":0}
{"id":"src-1rbp","title":"reconciler: Implement reconciliation actions (reschedule, respawn, cancel)","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-1b717ij5.cue implementation.cue\n# Schema location: /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-1b717ij5.cue\n\n\n#EnhancedBead: {\n  id: \"intent-cli-20260201085944-1b717ij5\"\n  title: \"reconciler: Implement reconciliation actions (reschedule, respawn, cancel)\"\n  type: \"feature\"\n  priority: 1\n  effort_estimate: \"30min\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL reconcile system state every 1s\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN reconciliation loop runs\\\", shall: \\\"THE SYSTEM SHALL detect anomalies\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF reconciliation fails\\\", shall_not: \\\"THE SYSTEM SHALL NOT stop loop\\\", because: \\\"reconciliation must be permanent\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"BeadWorker actors implemented\\\",\n        \\\"Storage actors available\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"Reconciliation loop running\\\",\n        \\\"Anomalies detected and fixed\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"Loop runs every 1s\\\",\n      \\\"Loop never stops\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write reconciliation tests\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement reconciler: Implement reconciliation actions (reschedule, respawn, cancel)\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/intent-cli-20260201085944-1b717ij5/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:59:46.746496273Z","created_by":"lewis","updated_at":"2026-02-01T14:59:46.746496273Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-1shp","title":"supervision: Chaos test for tier-1 supervisor restart","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085547-7x0ebgfa.cue implementation.cue\n# Schema location: /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085547-7x0ebgfa.cue\n\n\n#EnhancedBead: {\n  id: \"intent-cli-20260201085547-7x0ebgfa\"\n  title: \"supervision: Chaos test for tier-1 supervisor restart\"\n  type: \"feature\"\n  priority: 1\n  effort_estimate: \"30min\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL recover from tier-1 crashes\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN tier-1 supervisor killed\\\", shall: \\\"THE SYSTEM SHALL restart tier-1 and its children\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF tier-1 crashes\\\", shall_not: \\\"THE SYSTEM SHALL NOT lose tier-2 actor state permanently\\\", because: \\\"supervision guarantees recovery\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Integration tests passing\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"Tier-1 crashes recovered successfully\\\",\n        \\\"100% recovery rate achieved\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"Recovery completes within 1s\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write tests\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement supervision: Chaos test for tier-1 supervisor restart\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/intent-cli-20260201085547-7x0ebgfa/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:56:30.548945804Z","created_by":"lewis","updated_at":"2026-02-01T14:56:30.548945804Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-1tl","title":"[Red Queen] MAJOR: correct-transition-path: echo fail","status":"closed","priority":1,"issue_type":"bug","owner":"priorlewis43@gmail.com","created_at":"2026-01-29T13:11:26.946000167Z","created_by":"Lewis Prior","updated_at":"2026-01-30T04:11:40.190659074Z","closed_at":"2026-01-30T04:11:40.190659074Z","close_reason":"Tests are false positives: P0 test passes (exit 0), P1 tests use 'echo fail' which always succeeds","source_repo":".","compaction_level":0}
{"id":"src-1ty3","title":"replay: EventSourcingReplay: Unit tests for deterministic replay","description":"# Architecture\nTest deterministic replay with property-based testing and performance validation.\n\n# Files\n- crates/events/tests/replay_test.rs - Unit tests\n- crates/events/tests/replay_properties.rs - Proptest properties\n\n# Success Criteria\n- Test: same events = same final state (determinism)\n- Test: replay 1000 events <5s (performance target)\n- Property test: checkpoint resume = full replay (equivalence)\n\n# Quality Standards\n- Zero unwraps in tests\n- Proptest for exhaustive event sequences\n- Benchmark replay throughput (events/second)","status":"open","priority":1,"issue_type":"feature","estimated_minutes":30,"created_at":"2026-02-01T14:47:49.424447933Z","created_by":"lewis","updated_at":"2026-02-01T14:47:49.424447933Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-1vgz","title":"worker-actor: Implement 60s checkpoint timer with tokio","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-f4yrxjiq.cue implementation.cue\n# Schema location: /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-f4yrxjiq.cue\n\n\n#EnhancedBead: {\n  id: \"intent-cli-20260201085944-f4yrxjiq\"\n  title: \"worker-actor: Implement 60s checkpoint timer with tokio\"\n  type: \"feature\"\n  priority: 1\n  effort_estimate: \"30min\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL checkpoint bead state every 60s\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN 60s timer fires\\\", shall: \\\"THE SYSTEM SHALL save checkpoint\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF checkpoint fails\\\", shall_not: \\\"THE SYSTEM SHALL NOT stop bead execution\\\", because: \\\"checkpoint failure should not kill work\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Storage actors implemented\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"BeadWorker operations complete\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"State machine invariants maintained\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write tests\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement worker-actor: Implement 60s checkpoint timer with tokio\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/intent-cli-20260201085944-f4yrxjiq/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:59:44.969138863Z","created_by":"lewis","updated_at":"2026-02-01T14:59:44.969138863Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-1wv9","title":"actor-system: Study ractor 0.15 Actor trait and supervision patterns","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085546-yod8kuit.cue implementation.cue\n# Schema location: /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085546-yod8kuit.cue\n\n\n#EnhancedBead: {\n  id: \"intent-cli-20260201085546-yod8kuit\"\n  title: \"actor-system: Study ractor 0.15 Actor trait and supervision patterns\"\n  type: \"feature\"\n  priority: 1\n  effort_estimate: \"30min\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL use ractor 0.15 for BEAM-style actors\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN studying ractor API\\\", shall: \\\"THE SYSTEM SHALL document key patterns for supervision\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF supervision patterns misunderstood\\\", shall_not: \\\"THE SYSTEM SHALL NOT implement incorrect restart strategies\\\", because: \\\"incorrect supervision leads to cascading failures\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"ractor 0.15 added to Cargo.toml\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"Actor trait understood\\\",\n        \\\"Supervision patterns documented\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"Documentation reflects ractor 0.15 API\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read ractor 0.15 docs and examples\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Document key patterns in docs/architecture/ractor-patterns.md\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement to make tests pass\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/intent-cli-20260201085546-yod8kuit/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:56:29.771827335Z","created_by":"lewis","updated_at":"2026-02-01T14:56:29.771827335Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-1z5q","title":"worker-actor: Implement bead execution with workspace integration","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-9lrqbw6i.cue implementation.cue\n# Schema location: /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-9lrqbw6i.cue\n\n\n#EnhancedBead: {\n  id: \"intent-cli-20260201085944-9lrqbw6i\"\n  title: \"worker-actor: Implement bead execution with workspace integration\"\n  type: \"feature\"\n  priority: 1\n  effort_estimate: \"30min\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL execute beads in isolated workspaces\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN bead execution starts\\\", shall: \\\"THE SYSTEM SHALL spawn zjj workspace\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF workspace spawn fails\\\", shall_not: \\\"THE SYSTEM SHALL NOT execute without isolation\\\", because: \\\"workspace isolation requirement\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Storage actors implemented\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"BeadWorker operations complete\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"State machine invariants maintained\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write tests\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement worker-actor: Implement bead execution with workspace integration\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/intent-cli-20260201085944-9lrqbw6i/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:59:44.869440557Z","created_by":"lewis","updated_at":"2026-02-01T14:59:44.869440557Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-208","title":"backend-axum: Implement POST /api/workflows endpoint","description":"Implement workflow creation endpoint. Accept JSON payload with bead spec, validate schema, send message to SchedulerActor to create bead, return 201 Created with bead ID in response body. Error handling: 400 Bad Request for invalid JSON/schema, 503 Service Unavailable if SchedulerActor is down. Files: crates/oya-web/src/routes/workflows.rs. Tests: valid payload returns 201, invalid JSON returns 400, missing fields return 400. Effort: 1hr. Parent: src-17z","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:00:34.521132561Z","created_by":"lewis","updated_at":"2026-02-01T14:00:34.521132561Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-21dw","title":"replay: EventSourcingReplay: Implement event loading from DurableEventStore","description":"# Architecture\nLoad events from DurableEventStore with streaming for large event logs.\n\n# Files\n- crates/events/src/replay/loader.rs - Event loading\n\n# Success Criteria\n- load_events(filter: EventFilter) -> Result<impl Stream<Item = Event>, LoadError>\n- Stream events to avoid loading all into memory\n- Support resume from checkpoint (load events after checkpoint timestamp)\n\n# Quality Standards\n- Zero unwraps, zero panics\n- Railway-Oriented Programming for event loading pipeline\n- Async streaming with futures::Stream","status":"open","priority":1,"issue_type":"feature","estimated_minutes":30,"created_at":"2026-02-01T14:47:49.047574666Z","created_by":"lewis","updated_at":"2026-02-01T14:47:49.047574666Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-21x4","title":"chaos: Cascading failures test (5 simultaneous kills)","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-6zllgizn.cue implementation.cue\n# Schema location: /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-6zllgizn.cue\n\n\n#EnhancedBead: {\n  id: \"intent-cli-20260201085944-6zllgizn\"\n  title: \"chaos: Cascading failures test (5 simultaneous kills)\"\n  type: \"feature\"\n  priority: 1\n  effort_estimate: \"30min\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL recover from all chaos scenarios\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN actor killed\\\", shall: \\\"THE SYSTEM SHALL restart via supervision\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF recovery fails\\\", shall_not: \\\"THE SYSTEM SHALL NOT lose data\\\", because: \\\"supervision guarantees recovery\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Full supervision tree implemented\\\",\n        \\\"All actors operational\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"100% recovery rate achieved\\\",\n        \\\"Performance targets met\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"System remains operational during chaos\\\",\n      \\\"No data loss during failures\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write chaos test scenarios\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement chaos: Cascading failures test (5 simultaneous kills) with metrics collection\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/intent-cli-20260201085944-6zllgizn/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:59:47.170353337Z","created_by":"lewis","updated_at":"2026-02-01T14:59:47.170353337Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-22d","title":"ui-dag: Implement pan/zoom controls with mouse/touch","description":"Implement pan (mouse drag) and zoom (mouse wheel / pinch) controls. Transform canvas coordinates, clamp zoom levels (0.1x - 5x), smooth transitions. Files: crates/oya-ui/src/components/dag_viz/controls.rs. Tests: pan works, zoom works, touch gestures work, bounds enforced. Effort: 1hr. Parent: src-1o6","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:01:42.623477187Z","created_by":"lewis","updated_at":"2026-02-01T14:01:42.623477187Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-23mm","title":"chaos: Kill random tier-2 actors test (100% recovery)","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-wt4lcm0s.cue implementation.cue\n# Schema location: /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-wt4lcm0s.cue\n\n\n#EnhancedBead: {\n  id: \"intent-cli-20260201085944-wt4lcm0s\"\n  title: \"chaos: Kill random tier-2 actors test (100% recovery)\"\n  type: \"feature\"\n  priority: 1\n  effort_estimate: \"30min\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL recover from all chaos scenarios\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN actor killed\\\", shall: \\\"THE SYSTEM SHALL restart via supervision\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF recovery fails\\\", shall_not: \\\"THE SYSTEM SHALL NOT lose data\\\", because: \\\"supervision guarantees recovery\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Full supervision tree implemented\\\",\n        \\\"All actors operational\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"100% recovery rate achieved\\\",\n        \\\"Performance targets met\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"System remains operational during chaos\\\",\n      \\\"No data loss during failures\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write chaos test scenarios\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement chaos: Kill random tier-2 actors test (100% recovery) with metrics collection\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/intent-cli-20260201085944-wt4lcm0s/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:59:46.964880251Z","created_by":"lewis","updated_at":"2026-02-01T14:59:46.964880251Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-24lx","title":"idempotency: IdempotentExecutor: Implement execute-once with result storage","description":"# Architecture\nExecute function once per idempotency key, store result in cache + DB, return stored result on subsequent calls.\n\n# Files\n- crates/workflow/src/idempotent.rs - IdempotentExecutor::execute()\n\n# Success Criteria\n- execute<F, T>(key: Uuid, func: F) -> Result<T, ExecuteError> where F: FnOnce() -> T\n- Store result in cache (write lock) + DB (transaction)\n- Return cached result on duplicate execution\n\n# Quality Standards\n- Zero unwraps, zero panics\n- Railway-Oriented Programming: check.or_else(execute).and_then(store)\n- Atomic: cache + DB update in single transaction","status":"open","priority":1,"issue_type":"feature","estimated_minutes":30,"created_at":"2026-02-01T14:46:54.391494958Z","created_by":"lewis","updated_at":"2026-02-01T14:46:54.391494958Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-25t","title":"event-sourcing: SurrealDB Schema: Define webhook and graph relations","description":"# Architecture\nDefine webhook table (external notifications) and depends_on/blocks graph edges for DAG modeling with cycle detection.\n\n# Files\n- schema.surql - Webhook and graph relation definitions\n- crates/workflow/src/schema/graph.rs - Rust type mappings\n\n# Success Criteria\n- Webhook table (url, method, headers, payload_template)\n- Graph edges (depends_on, blocks) as SurrealDB relations\n- Cycle detection constraints (DAG invariant)\n\n# Quality Standards\n- Zero unwraps, zero panics\n- Graph acyclicity enforced at schema level\n- Railway-Oriented Programming","status":"open","priority":1,"issue_type":"feature","estimated_minutes":30,"created_at":"2026-02-01T14:45:15.286304376Z","created_by":"lewis","updated_at":"2026-02-01T14:45:15.286304376Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-27j5","title":"chaos: Continuous chaos test (5min random kills)","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-xozxhrnw.cue implementation.cue\n# Schema location: /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-xozxhrnw.cue\n\n\n#EnhancedBead: {\n  id: \"intent-cli-20260201085944-xozxhrnw\"\n  title: \"chaos: Continuous chaos test (5min random kills)\"\n  type: \"feature\"\n  priority: 1\n  effort_estimate: \"30min\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL recover from all chaos scenarios\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN actor killed\\\", shall: \\\"THE SYSTEM SHALL restart via supervision\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF recovery fails\\\", shall_not: \\\"THE SYSTEM SHALL NOT lose data\\\", because: \\\"supervision guarantees recovery\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Full supervision tree implemented\\\",\n        \\\"All actors operational\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"100% recovery rate achieved\\\",\n        \\\"Performance targets met\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"System remains operational during chaos\\\",\n      \\\"No data loss during failures\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write chaos test scenarios\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement chaos: Continuous chaos test (5min random kills) with metrics collection\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/intent-cli-20260201085944-xozxhrnw/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:59:47.274592003Z","created_by":"lewis","updated_at":"2026-02-01T14:59:47.274592003Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-27y1","title":"rate-limiter: Unit tests with tokio-test for rate limiting","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-285ch8yt.cue implementation.cue\n# Schema location: /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-285ch8yt.cue\n\n\n#EnhancedBead: {\n  id: \"intent-cli-20260201085944-285ch8yt\"\n  title: \"rate-limiter: Unit tests with tokio-test for rate limiting\"\n  type: \"feature\"\n  priority: 2\n  effort_estimate: \"30min\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL implement token bucket rate limiting\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN refill timer fires\\\", shall: \\\"THE SYSTEM SHALL add tokens up to capacity\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF token count exceeds capacity\\\", shall_not: \\\"THE SYSTEM SHALL NOT overflow bucket\\\", because: \\\"capacity is hard limit\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"ractor Actor trait understood\\\",\n        \\\"tokio runtime available\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"Token bucket implemented\\\",\n        \\\"Refill timer running\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"Token count never exceeds capacity\\\",\n      \\\"Token count never negative\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write rate limiter tests\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement rate-limiter: Unit tests with tokio-test for rate limiting\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/intent-cli-20260201085944-285ch8yt/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-01T14:59:46.235896359Z","created_by":"lewis","updated_at":"2026-02-01T14:59:46.235896359Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-28kl","title":"rate-limiter: Implement non-blocking acquire (returns None if empty)","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-daq2bsut.cue implementation.cue\n# Schema location: /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-daq2bsut.cue\n\n\n#EnhancedBead: {\n  id: \"intent-cli-20260201085944-daq2bsut\"\n  title: \"rate-limiter: Implement non-blocking acquire (returns None if empty)\"\n  type: \"feature\"\n  priority: 2\n  effort_estimate: \"30min\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL implement token bucket rate limiting\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN refill timer fires\\\", shall: \\\"THE SYSTEM SHALL add tokens up to capacity\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF token count exceeds capacity\\\", shall_not: \\\"THE SYSTEM SHALL NOT overflow bucket\\\", because: \\\"capacity is hard limit\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"ractor Actor trait understood\\\",\n        \\\"tokio runtime available\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"Token bucket implemented\\\",\n        \\\"Refill timer running\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"Token count never exceeds capacity\\\",\n      \\\"Token count never negative\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write rate limiter tests\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement rate-limiter: Implement non-blocking acquire (returns None if empty)\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/intent-cli-20260201085944-daq2bsut/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-01T14:59:46.135090079Z","created_by":"lewis","updated_at":"2026-02-01T14:59:46.135090079Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-293","title":"Implement bulk-apply feature","description":"Apply pattern to multiple repos via Turbolift. Vertical slice: internal/features/bulkapply/","status":"closed","priority":2,"issue_type":"feature","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T05:01:17.566431608Z","created_by":"Lewis Prior","updated_at":"2026-01-30T05:06:36.926447646Z","closed_at":"2026-01-30T05:06:36.926447646Z","close_reason":"Closed","source_repo":".","compaction_level":0}
{"id":"src-29ac","title":"queue-actors: Concurrency tests for queue operations","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-8xvgewjy.cue implementation.cue\n# Schema location: /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-8xvgewjy.cue\n\n\n#EnhancedBead: {\n  id: \"intent-cli-20260201085944-8xvgewjy\"\n  title: \"queue-actors: Concurrency tests for queue operations\"\n  type: \"feature\"\n  priority: 2\n  effort_estimate: \"30min\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL implement queue actors\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN Enqueue received\\\", shall: \\\"THE SYSTEM SHALL add item to queue\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF queue full\\\", shall_not: \\\"THE SYSTEM SHALL NOT drop items\\\", because: \\\"bounded queues must reject\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"ractor Actor trait understood\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"Queue operations implemented\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"Queue ordering maintained\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write queue tests\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement queue-actors: Concurrency tests for queue operations\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/intent-cli-20260201085944-8xvgewjy/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-01T14:59:45.735726555Z","created_by":"lewis","updated_at":"2026-02-01T14:59:45.735726555Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-2ab","title":"ui-timeline: Implement phase progress indicator component","description":"Build Leptos component showing TDD15 phases (0-15) as horizontal progress bar. Highlight current phase, show completed phases in green, pending in gray. Show phase names on hover. Files: crates/oya-ui/src/components/timeline/phase_progress.rs. Tests: all phases render, current highlighted, hover shows names. Effort: 1hr. Parent: src-30m","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:02:21.795570325Z","created_by":"lewis","updated_at":"2026-02-01T14:02:21.795570325Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-2bh1","title":"chaos: Memory leak detection test (1 hour sustained load)","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-vravsnwv.cue implementation.cue\n# Schema location: /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-vravsnwv.cue\n\n\n#EnhancedBead: {\n  id: \"intent-cli-20260201085944-vravsnwv\"\n  title: \"chaos: Memory leak detection test (1 hour sustained load)\"\n  type: \"feature\"\n  priority: 1\n  effort_estimate: \"30min\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL recover from all chaos scenarios\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN actor killed\\\", shall: \\\"THE SYSTEM SHALL restart via supervision\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF recovery fails\\\", shall_not: \\\"THE SYSTEM SHALL NOT lose data\\\", because: \\\"supervision guarantees recovery\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Full supervision tree implemented\\\",\n        \\\"All actors operational\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"100% recovery rate achieved\\\",\n        \\\"Performance targets met\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"System remains operational during chaos\\\",\n      \\\"No data loss during failures\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write chaos test scenarios\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement chaos: Memory leak detection test (1 hour sustained load) with metrics collection\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/intent-cli-20260201085944-vravsnwv/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:59:47.474295135Z","created_by":"lewis","updated_at":"2026-02-01T14:59:47.474295135Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-2c8","title":"event-sourcing: DurableEventStore: SurrealDB connection setup","description":"Implement kv-rocksdb connection with Result-based error handling.\n\nSuccess criteria:\n- Configure SurrealDB with kv-rocksdb backend\n- Implement connection pooling with proper resource cleanup\n- Define ConnectionError type with thiserror\n- Zero unwraps, zero panics\n- Functional error propagation with ? operator\n\nFiles: crates/events/src/durable_store.rs\n\nEstimated time: 20 minutes","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:37:53.689762755Z","created_by":"lewis","updated_at":"2026-02-01T14:37:53.689762755Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-2f75","title":"idempotency: IdempotentExecutor: Error handling for duplicate execution","description":"# Architecture\nDetect and handle duplicate execution attempts gracefully by returning cached result.\n\n# Files\n- crates/workflow/src/idempotent/errors.rs - Error types\n\n# Success Criteria\n- DuplicateExecutionError when key exists\n- Return cached result instead of executing again\n- Log duplicate attempts for monitoring\n\n# Quality Standards\n- Zero unwraps, zero panics\n- Use thiserror for DuplicateExecutionError\n- Metrics: track duplicate execution rate","status":"open","priority":1,"issue_type":"feature","estimated_minutes":15,"created_at":"2026-02-01T14:46:54.463307613Z","created_by":"lewis","updated_at":"2026-02-01T14:46:54.463307613Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-2j5","title":"event-sourcing: Benchmarks: Performance analysis and validation","description":"# Architecture\nAnalyze benchmark results, validate performance targets, and document fsync overhead findings.\n\n# Files\n- docs/benchmarks/fsync-analysis.md - Performance analysis report\n- scripts/run-benchmarks.sh - Automated benchmark runner\n\n# Success Criteria\n- Document fsync overhead: single (target <5ms) vs batch\n- Validate 2-3ms per write meets requirements\n- Regression detection: fail if performance degrades >20%\n\n# Quality Standards\n- Automated CI benchmark runs\n- Historical performance tracking\n- Clear recommendations for production tuning","status":"open","priority":2,"issue_type":"feature","estimated_minutes":30,"created_at":"2026-02-01T14:46:08.397628157Z","created_by":"lewis","updated_at":"2026-02-01T14:46:08.397628157Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-2jc","title":"event-sourcing: DurableEventStore: Unit tests with property-based testing","description":"# Architecture\nComprehensive unit tests using proptest for DurableEventStore operations.\n\n# Files\n- crates/events/tests/durable_store_test.rs - Unit tests\n- crates/events/tests/properties.rs - Proptest property tests\n\n# Success Criteria\n- Happy path: append + retrieve = same event\n- Error path: invalid serialization fails gracefully\n- Property test: append batch order preserved\n- Property test: fsync guarantees (no data loss on crash simulation)\n\n# Quality Standards\n- Zero unwraps in tests (use ? operator)\n- Proptest for serialization round-trips\n- Temp SurrealDB instance per test (isolated)","status":"open","priority":1,"issue_type":"feature","estimated_minutes":30,"created_at":"2026-02-01T14:45:46.993781151Z","created_by":"lewis","updated_at":"2026-02-01T14:45:46.993781151Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-2kd2","title":"worker-actor: Implement BeadEvent emission for state transitions","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-wf2vqb06.cue implementation.cue\n# Schema location: /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-wf2vqb06.cue\n\n\n#EnhancedBead: {\n  id: \"intent-cli-20260201085944-wf2vqb06\"\n  title: \"worker-actor: Implement BeadEvent emission for state transitions\"\n  type: \"feature\"\n  priority: 1\n  effort_estimate: \"30min\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL emit events on state changes\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN bead state changes\\\", shall: \\\"THE SYSTEM SHALL append BeadEvent to event store\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF event append fails\\\", shall_not: \\\"THE SYSTEM SHALL NOT block state transition\\\", because: \\\"event logging is best-effort\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Storage actors implemented\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"BeadWorker operations complete\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"State machine invariants maintained\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write tests\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement worker-actor: Implement BeadEvent emission for state transitions\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/intent-cli-20260201085944-wf2vqb06/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:59:45.063039667Z","created_by":"lewis","updated_at":"2026-02-01T14:59:45.063039667Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-2lp","title":"ui-leptos: Setup Leptos 0.7 CSR with WASM build pipeline","description":"Setup Leptos 0.7 with client-side rendering (CSR) mode. Configure trunk for WASM builds, add Leptos dependencies, create main app component. Setup hot reload for dev. Files: crates/oya-ui/Trunk.toml, crates/oya-ui/src/main.rs, crates/oya-ui/src/app.rs. Tests: WASM builds, app renders in browser. Effort: 1hr. Parent: src-3s0","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:01:16.948657640Z","created_by":"lewis","updated_at":"2026-02-01T14:01:16.948657640Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-2lz","title":"backend-ws: Implement broadcast to all connected WebSocket clients","description":"Subscribe to EventStoreActor event stream, serialize events with bincode, broadcast to all connected clients. Handle client disconnections gracefully (remove from registry). Files: crates/oya-web/src/websocket/broadcast.rs. Tests: events reach all clients, disconnected clients removed, no memory leaks. Effort: 1hr. Parent: src-2yy","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:00:53.595006883Z","created_by":"lewis","updated_at":"2026-02-01T14:00:53.595006883Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-2nh","title":"Create Makefile with quality gates","description":"Build targets for test, lint, security, mutation testing, CI pipeline","status":"closed","priority":0,"issue_type":"task","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T05:01:12.282879715Z","created_by":"Lewis Prior","updated_at":"2026-01-30T05:03:14.468415426Z","closed_at":"2026-01-30T05:03:14.468415426Z","close_reason":"Project structure, Makefile, and linter config created","source_repo":".","compaction_level":0}
{"id":"src-2o1y","title":"supervision: Implement tier-1 supervisors (Storage, Workflow, Queue, Reconciler)","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085547-mtiu1ilf.cue implementation.cue\n# Schema location: /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085547-mtiu1ilf.cue\n\n\n#EnhancedBead: {\n  id: \"intent-cli-20260201085547-mtiu1ilf\"\n  title: \"supervision: Implement tier-1 supervisors (Storage, Workflow, Queue, Reconciler)\"\n  type: \"feature\"\n  priority: 1\n  effort_estimate: \"30min\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL implement 4 tier-1 supervisors\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN UniverseSupervisor starts\\\", shall: \\\"THE SYSTEM SHALL spawn all 4 tier-1 supervisors\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF tier-1 supervisor fails to start\\\", shall_not: \\\"THE SYSTEM SHALL NOT continue with partial supervision\\\", because: \\\"all supervisors required for system\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Exponential backoff implemented\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"All 4 tier-1 supervisors running\\\",\n        \\\"Each supervises its tier-2 actors\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"Tier-1 supervisors run independently\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write tests\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement supervision: Implement tier-1 supervisors (Storage, Workflow, Queue, Reconciler)\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/intent-cli-20260201085547-mtiu1ilf/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:56:30.379277348Z","created_by":"lewis","updated_at":"2026-02-01T14:56:30.379277348Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-2oo","title":"ui-dag: DAG visualization component tests","description":"Component tests for DAG viz: render 50 nodes, layout converges, colors update on state change, pan/zoom works, selection works, performance (FPS, memory). Use wasm-bindgen-test. Files: crates/oya-ui/tests/dag_viz_test.rs. Effort: 1hr. Parent: src-1o6","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-01T14:01:43.341710895Z","created_by":"lewis","updated_at":"2026-02-01T14:01:43.341710895Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-2pc","title":"event-sourcing: Implement DurableEventStore with bincode and fsync","description":"## Overview\nImplement DurableEventStore wrapper around SurrealDB for append-only event log with guaranteed durability via fsync and bincode binary serialization.\n\n## Architecture\n**Serialization**: bincode for fast binary encoding\n**Storage**: SurrealDB state_transition table with fsync\n**API**: append_event(), read_events(), replay_from()\n\n## Key Features\n- Append-only writes to state_transition table\n- bincode serialization for BeadEvent structs\n- fsync guarantee on every append\n- Read events by bead_id or time range\n- Support for event replay from checkpoint\n\n## Core Struct\n```rust\npub struct DurableEventStore {\n    db: Arc<Surreal<Any>>,\n}\n\nimpl DurableEventStore {\n    pub async fn append_event(&self, event: &BeadEvent) -> Result<(), Error>;\n    pub async fn read_events(&self, bead_id: &str) -> Result<Vec<BeadEvent>, Error>;\n    pub async fn replay_from(&self, checkpoint_id: &str) -> Result<Vec<BeadEvent>, Error>;\n}\n```\n\n## Files to Create\n- crates/events/src/durable_store.rs - DurableEventStore implementation\n- crates/events/src/types.rs - BeadEvent enum definition\n- crates/events/tests/durable_test.rs - Integration tests\n\n## Success Criteria\n- Event append latency <3ms with fsync\n- Events persisted durably (survives crash)\n- bincode serialization working correctly\n- Read/replay operations functional\n- Integration tests passing\n\n## Dependencies\n- bincode = \"1.3\"\n- surrealdb = \"2.0\"\n\n## Quality Gates\n- Zero unwraps, zero panics\n- Railway-Oriented Programming\n- Proptest for serialization round-trips\n- fsync verified via strace\n\n## CUE Schema\nSchema: .beads/schemas/intent-cli-20260201012642-t73sooov.cue (TO BE CREATED)\n\n## Effort: 4 hours","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T13:56:51.707484463Z","created_by":"lewis","updated_at":"2026-02-01T13:56:51.707484463Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-2qg7","title":"replay: EventSourcingReplay: Define replay state machine","description":"# Architecture\nDefine state machine for event replay: Uninitialized → Loading → Replaying → Complete (or Failed).\n\n# Files\n- crates/events/src/replay/state.rs - State machine definition\n\n# Success Criteria\n- States: Uninitialized, Loading, Replaying(progress), Complete, Failed(error)\n- Transitions: init → loading, loading → replaying, replaying → complete/failed\n- State validation: invalid transitions return error\n\n# Quality Standards\n- Zero unwraps, zero panics\n- Use enum for type-safe state transitions\n- Invalid transitions compile-time prevented via type state pattern","status":"open","priority":1,"issue_type":"feature","estimated_minutes":30,"created_at":"2026-02-01T14:47:48.980542112Z","created_by":"lewis","updated_at":"2026-02-01T14:47:48.980542112Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-2rbd","title":"reconciler: Implement orphaned bead detection","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-dxaysvua.cue implementation.cue\n# Schema location: /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-dxaysvua.cue\n\n\n#EnhancedBead: {\n  id: \"intent-cli-20260201085944-dxaysvua\"\n  title: \"reconciler: Implement orphaned bead detection\"\n  type: \"feature\"\n  priority: 1\n  effort_estimate: \"30min\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL reconcile system state every 1s\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN reconciliation loop runs\\\", shall: \\\"THE SYSTEM SHALL detect anomalies\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF reconciliation fails\\\", shall_not: \\\"THE SYSTEM SHALL NOT stop loop\\\", because: \\\"reconciliation must be permanent\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"BeadWorker actors implemented\\\",\n        \\\"Storage actors available\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"Reconciliation loop running\\\",\n        \\\"Anomalies detected and fixed\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"Loop runs every 1s\\\",\n      \\\"Loop never stops\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write reconciliation tests\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement reconciler: Implement orphaned bead detection\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/intent-cli-20260201085944-dxaysvua/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:59:46.436353264Z","created_by":"lewis","updated_at":"2026-02-01T14:59:46.436353264Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-2ryb","title":"storage-actors: Implement EventStoreActor handlers (AppendEvent, ReadEvents, ReplayEvents)","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085547-ggv3witj.cue implementation.cue\n# Schema location: /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085547-ggv3witj.cue\n\n\n#EnhancedBead: {\n  id: \"intent-cli-20260201085547-ggv3witj\"\n  title: \"storage-actors: Implement EventStoreActor handlers (AppendEvent, ReadEvents, ReplayEvents)\"\n  type: \"feature\"\n  priority: 1\n  effort_estimate: \"30min\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL handle all event store messages\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN AppendEvent received\\\", shall: \\\"THE SYSTEM SHALL fsync before replying\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF fsync fails\\\", shall_not: \\\"THE SYSTEM SHALL NOT report success\\\", because: \\\"zero data loss guarantee\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Message protocol defined\\\",\n        \\\"DurableEventStore integrated\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"All handlers implemented with Result types\\\",\n        \\\"Fsync guarantees preserved\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"AppendEvent always fsyncs before Ok reply\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write handler tests\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement handlers preserving fsync guarantees\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/intent-cli-20260201085547-ggv3witj/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:56:30.802894732Z","created_by":"lewis","updated_at":"2026-02-01T14:56:30.802894732Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-2tg","title":"[code] Fix type mismatch errors in json/error.rs","description":"Pre-existing type mismatch errors in json/error.rs - expected reference found &UndoError, &RevertError","acceptance_criteria":"1. All type mismatch errors resolved","status":"open","priority":2,"issue_type":"bug","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T16:21:44.010120871Z","created_by":"Lewis Prior","updated_at":"2026-01-30T16:21:44.010120871Z","source_repo":".","compaction_level":0,"labels":["severity:important","smell:code"]}
{"id":"src-2um8","title":"checkpoint: CheckpointManager: Setup zstd compression with level tuning","description":"# Architecture\nConfigure zstd compression for checkpoint serialization with compression level tuning (balance speed vs ratio).\n\n# Files\n- crates/workflow/src/checkpoint/compression.rs - zstd compression wrapper\n\n# Success Criteria\n- compress(data: &[u8]) -> Result<Vec<u8>, CompressionError> with zstd level 3\n- decompress(data: &[u8]) -> Result<Vec<u8>, DecompressionError>\n- Benchmark compression ratio (target: 50-70% size reduction)\n\n# Quality Standards\n- Zero unwraps, zero panics\n- Railway-Oriented Programming for compression pipeline\n- Use zstd crate with error handling","status":"open","priority":1,"issue_type":"feature","estimated_minutes":30,"created_at":"2026-02-01T14:47:21.782495166Z","created_by":"lewis","updated_at":"2026-02-01T14:47:21.782495166Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-2v8","title":"idempotency: IdempotentExecutor: Setup RwLock-based in-memory cache","description":"# Architecture\nImplement thread-safe in-memory cache using HashMap<Uuid, Result> with RwLock for fast idempotency checks.\n\n# Files\n- crates/workflow/src/idempotent/cache.rs - RwLock cache implementation\n\n# Success Criteria\n- Cache: HashMap<Uuid, CachedResult> wrapped in Arc<RwLock>\n- Read lock for lookups (concurrent reads)\n- Write lock for inserts (exclusive write)\n\n# Quality Standards\n- Zero unwraps, zero panics\n- Use std::sync::RwLock (not parking_lot for simplicity)\n- Handle lock poisoning via Result<T, PoisonError>","status":"open","priority":1,"issue_type":"feature","estimated_minutes":30,"created_at":"2026-02-01T14:46:54.188632312Z","created_by":"lewis","updated_at":"2026-02-01T14:46:54.188632312Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-2vy","title":"idempotency: IdempotentExecutor: RwLock cache setup","description":"Implement in-memory HashMap with RwLock for caching idempotent execution results.\n\nSuccess Criteria:\n- Define cache data structure: HashMap<ExecutionKey, ExecutionResult>\n- Wrap in RwLock for concurrent access\n- Initialize in IdempotentExecutor::new()\n- Zero unwraps, zero panics\n- Railway-Oriented Programming patterns\n\nFiles: crates/workflow/src/idempotent.rs\n\nConstraints:\n- Use RwLock from std::sync\n- ExecutionKey must be Hash + Eq\n- ExecutionResult must be Clone\n- Thread-safe concurrent access","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:38:03.797731732Z","created_by":"lewis","updated_at":"2026-02-01T14:38:03.797731732Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-2xc4","title":"integration: Event Sourcing: Idempotency validation test","description":"# Architecture\nValidate idempotency: execute same operation multiple times, verify only executes once.\n\n# Files\n- tests/integration/idempotency_test.rs - Idempotency integration test\n\n# Success Criteria\n- Generate UUID v5 key from bead_id + input\n- Execute operation 3 times with same key\n- Verify operation executes only once (remaining 2 return cached result)\n- Result is identical across all 3 calls\n\n# Quality Standards\n- Zero unwraps in tests\n- Test with concurrent execution (tokio::spawn)\n- Verify cache + DB consistency","status":"open","priority":1,"issue_type":"feature","estimated_minutes":30,"created_at":"2026-02-01T14:48:13.577748584Z","created_by":"lewis","updated_at":"2026-02-01T14:48:13.577748584Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-2xp","title":"ui-dag: Implement edge rendering with arrows","description":"Render dependency edges as lines/curves with directional arrows. Calculate arrow position at node boundary. Handle edge cases (self-loops, parallel edges). Files: crates/oya-ui/src/components/dag_viz/edge.rs. Tests: edges connect nodes, arrows point correctly, curved edges don't overlap. Effort: 1hr. Parent: src-1o6","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:01:42.388349613Z","created_by":"lewis","updated_at":"2026-02-01T14:01:42.388349613Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-2yy","title":"backend: Implement WebSocket server with bincode binary streaming","description":"Implement WebSocket server for real-time bead event streaming using bincode binary protocol. Broadcasts BeadEvent updates to all connected clients with <50ms latency.\n\n# Architecture\n- WebSocket endpoint at ws://localhost:8080/api/ws\n- bincode binary serialization for BeadEvent messages\n- Broadcast to all connected clients\n- Subscribe to EventStoreActor event stream\n- <50ms latency from event to client delivery\n\n# Success Criteria\n- WebSocket server listening on /api/ws\n- bincode serialization/deserialization working\n- Events broadcast to all connected clients\n- <50ms latency verified\n- Connection handling (connect, disconnect, error recovery)\n\n# Dependencies\n- Stream A: EventStoreActor for event stream\n- Bead src-17z: axum server setup\n\n# Files\n- crates/oya-web/src/websocket.rs - WebSocket server\n- crates/oya-web/tests/websocket_test.rs - Integration tests\n\nEffort: 4hr\nBead ID: intent-cli-20260201020059-hwlgqn0s\nCUE Schema: .beads/schemas/intent-cli-20260201020059-hwlgqn0s.cue","status":"in_progress","priority":1,"issue_type":"feature","created_at":"2026-02-01T13:54:04.354711644Z","created_by":"lewis","updated_at":"2026-02-01T14:37:43.544417855Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-2zm","title":"backend-axum: Implement GET /api/beads/:id endpoint","description":"Implement bead status query endpoint. Extract bead ID from path parameter, query StateManagerActor for current state, return 200 OK with JSON containing: status, phase, events, timestamps. Error handling: 404 Not Found if bead doesn't exist, 503 if StateManagerActor unavailable. Files: crates/oya-web/src/routes/beads.rs. Tests: valid ID returns 200 with state, invalid ID returns 404, actor down returns 503. Effort: 45min. Parent: src-17z","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:00:34.749060609Z","created_by":"lewis","updated_at":"2026-02-01T14:00:34.749060609Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-30js","title":"supervision: Define 3-tier supervision hierarchy structure","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085546-pygn4p4k.cue implementation.cue\n# Schema location: /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085546-pygn4p4k.cue\n\n\n#EnhancedBead: {\n  id: \"intent-cli-20260201085546-pygn4p4k\"\n  title: \"supervision: Define 3-tier supervision hierarchy structure\"\n  type: \"feature\"\n  priority: 1\n  effort_estimate: \"30min\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL implement 3-tier supervision hierarchy\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN tier-1 supervisor spawned\\\", shall: \\\"THE SYSTEM SHALL register with UniverseSupervisor\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF tier-2 actor crashes\\\", shall_not: \\\"THE SYSTEM SHALL NOT crash tier-1 supervisor\\\", because: \\\"one_for_one isolation\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"ractor Actor trait understood\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"3-tier hierarchy defined in code\\\",\n        \\\"Tier-1 supervisors enumerated\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"Tier-1 supervisors never share state\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write tests\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement supervision: Define 3-tier supervision hierarchy structure\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/intent-cli-20260201085546-pygn4p4k/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:56:30.125485770Z","created_by":"lewis","updated_at":"2026-02-01T14:56:30.125485770Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-30m","title":"ui: Implement execution timeline and manual bead controls","description":"Build Step Functions-like execution timeline component with Leptos. Shows phase progress, event history, manual actions (cancel/retry buttons), error visualization, responsive layout.\n\n# Architecture\n- Leptos components for timeline UI\n- Phase progress indicator (15 phases for TDD15)\n- Chronological event history list\n- Manual control buttons (cancel, retry, view logs)\n- Error visualization with stack traces\n- Responsive layout (Tailwind CSS or Leptos styling)\n\n# Timeline Features\n- Phase progress bar with current phase highlighted\n- Event history (scrollable list, newest first)\n- Event timestamps (relative time: \"2m ago\")\n- Event type icons (created, scheduled, running, completed, failed)\n- Click event to expand details\n- Auto-scroll to latest event\n\n# Manual Controls\n- Cancel button (RED, confirm dialog)\n- Retry button (YELLOW, for failed beads only)\n- View logs button (opens log viewer)\n- Download bead state button (JSON export)\n\n# Success Criteria\n- Timeline renders all bead phases\n- Event history updates in real-time\n- Manual controls send correct API requests\n- Error visualization shows stack traces\n- Responsive layout works on 1024px+ screens\n- Confirm dialogs prevent accidental actions\n\n# Dependencies\n- Bead src-17z: axum REST API (for cancel/retry endpoints)\n- Bead src-17r: WebSocket integration (for real-time updates)\n- Bead src-1o6: DAG visualization (timeline shown alongside DAG)\n\n# Files\n- crates/oya-ui/src/components/timeline.rs - Timeline component\n- crates/oya-ui/src/components/phase_progress.rs - Phase indicator\n- crates/oya-ui/src/components/event_list.rs - Event history\n- crates/oya-ui/src/components/controls.rs - Manual control buttons\n- crates/oya-ui/tests/timeline_test.rs - Component tests\n\nEffort: 4hr\nBead ID: intent-cli-20260201020059-n6vt99rk\nCUE Schema: .beads/schemas/intent-cli-20260201020059-n6vt99rk.cue","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-01T13:59:34.155802711Z","created_by":"lewis","updated_at":"2026-02-01T13:59:34.155802711Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-30m.1","title":"timeline-progress: Progress bar component","description":"Implement progress bar component for phase visualization.\n\nTDD15 Phases (0-15):\n0. Setup: Add ProgressBar struct\n1. Red: Test ProgressBar::new() with total steps\n2. Green: Implement ProgressBar::new()\n3. Refactor: Add width configuration\n4. Red: Test ProgressBar::render() with 0% progress\n5. Green: Implement basic ASCII rendering\n6. Refactor: Extract bar characters to constants\n7. Red: Test ProgressBar::update() changes display\n8. Green: Implement progress updates\n9. Refactor: Add percentage calculation\n10. Red: Test ProgressBar with colors (via owo-colors)\n11. Green: Add color support for states\n12. Refactor: Clean up color logic\n13. Red: Test ProgressBar::set_label() for phase name\n14. Green: Add label display\n15. Refactor: Polish formatting, add docs\n\nAcceptance:\n- ProgressBar struct with configurable width\n- ASCII rendering with [=====>    ] style\n- Color support (green=done, yellow=active, grey=pending)\n- Label display for phase name\n- Zero unwraps, zero panics\n- moon run :quick passes","status":"open","priority":2,"issue_type":"feature","estimated_minutes":20,"created_at":"2026-02-01T14:25:20.036640398Z","created_by":"lewis","updated_at":"2026-02-01T14:25:20.036640398Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-30m.1","depends_on_id":"src-30m","type":"parent-child","created_at":"2026-02-01T14:25:20.036640398Z","created_by":"lewis"}]}
{"id":"src-30m.2","title":"timeline-events: Event list component","description":"Implement event list component for detailed phase activity.\n\nTDD15 Phases (0-15):\n0. Setup: Add EventList struct\n1. Red: Test EventList::new() creates empty list\n2. Green: Implement EventList::new()\n3. Refactor: Add capacity pre-allocation\n4. Red: Test EventList::push() adds events\n5. Green: Implement event storage\n6. Refactor: Use VecDeque for efficient operations\n7. Red: Test EventList::render() formats events\n8. Green: Implement basic rendering\n9. Refactor: Extract event formatting\n10. Red: Test event icons (✓, ✗, ⚠, ℹ)\n11. Green: Add EventType enum with icons\n12. Refactor: Clean up icon mapping\n13. Red: Test EventList::filter_by_phase()\n14. Green: Implement filtering\n15. Refactor: Polish API, add docs\n\nAcceptance:\n- EventList struct with VecDeque storage\n- Event struct with type, timestamp, message\n- EventType enum (Success, Error, Warning, Info)\n- Icon-based rendering\n- Phase filtering\n- Zero unwraps, zero panics\n- moon run :quick passes","status":"open","priority":2,"issue_type":"feature","estimated_minutes":25,"created_at":"2026-02-01T14:25:24.554973432Z","created_by":"lewis","updated_at":"2026-02-01T14:25:24.554973432Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-30m.2","depends_on_id":"src-30m","type":"parent-child","created_at":"2026-02-01T14:25:24.554973432Z","created_by":"lewis"}]}
{"id":"src-30m.3","title":"timeline-timestamps: Relative time formatting","description":"Implement relative time formatting for event timestamps.\n\nTDD15 Phases (0-15):\n0. Setup: Add RelativeTime struct\n1. Red: Test RelativeTime::format() with 'just now'\n2. Green: Implement 'just now' (<5s)\n3. Refactor: Add time constants\n4. Red: Test seconds formatting '30s ago'\n5. Green: Add seconds formatting\n6. Refactor: Extract formatting logic\n7. Red: Test minutes formatting '5m ago'\n8. Green: Add minutes formatting\n9. Refactor: Clean up time calculations\n10. Red: Test hours formatting '2h ago'\n11. Green: Add hours formatting\n12. Refactor: Simplify threshold checks\n13. Red: Test days formatting 'yesterday', '3d ago'\n14. Green: Add days formatting with special cases\n15. Refactor: Polish API, add docs\n\nAcceptance:\n- RelativeTime formatter\n- Formats: 'just now', '30s', '5m', '2h', 'yesterday', '3d'\n- Thresholds: <5s, <60s, <60m, <24h, <2d, >=2d\n- Pure functional implementation\n- Zero unwraps, zero panics\n- moon run :quick passes","status":"open","priority":2,"issue_type":"feature","estimated_minutes":15,"created_at":"2026-02-01T14:25:30.806722934Z","created_by":"lewis","updated_at":"2026-02-01T14:25:30.806722934Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-30m.3","depends_on_id":"src-30m","type":"parent-child","created_at":"2026-02-01T14:25:30.806722934Z","created_by":"lewis"}]}
{"id":"src-30m.4","title":"timeline-scroll: Auto-scroll to latest","description":"Implement auto-scroll behavior for terminal output.\n\nTDD15 Phases (0-15):\n0. Setup: Add ScrollState struct\n1. Red: Test ScrollState::new() with viewport height\n2. Green: Implement ScrollState::new()\n3. Refactor: Add viewport configuration\n4. Red: Test ScrollState::should_scroll() logic\n5. Green: Implement scroll detection\n6. Refactor: Extract scroll threshold calculation\n7. Red: Test ScrollState::update() on new events\n8. Green: Implement state updates\n9. Refactor: Clean up state transitions\n10. Red: Test ScrollState::render_window() slices events\n11. Green: Implement windowed rendering\n12. Refactor: Use Range for clean slicing\n13. Red: Test scroll anchor (top/bottom/current)\n14. Green: Add ScrollAnchor enum\n15. Refactor: Polish API, add docs\n\nAcceptance:\n- ScrollState struct with viewport tracking\n- Auto-scroll to bottom on new events\n- Windowed rendering for large event lists\n- ScrollAnchor enum (Top, Bottom, Current)\n- Zero unwraps, zero panics\n- moon run :quick passes","status":"open","priority":2,"issue_type":"feature","estimated_minutes":15,"created_at":"2026-02-01T14:25:36.519168702Z","created_by":"lewis","updated_at":"2026-02-01T14:25:36.519168702Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-30m.4","depends_on_id":"src-30m","type":"parent-child","created_at":"2026-02-01T14:25:36.519168702Z","created_by":"lewis"}]}
{"id":"src-30m.5","title":"timeline-expand: Expand/collapse events","description":"Implement expand/collapse functionality for event details.\n\nTDD15 Phases (0-15):\n0. Setup: Add ExpandableEvent struct\n1. Red: Test ExpandableEvent::new() with summary\n2. Green: Implement ExpandableEvent::new()\n3. Refactor: Add builder pattern for details\n4. Red: Test ExpandableEvent::toggle() changes state\n5. Green: Implement toggle logic\n6. Refactor: Use bool for expanded state\n7. Red: Test ExpandableEvent::render() with collapsed\n8. Green: Implement collapsed rendering (one line)\n9. Refactor: Extract summary formatting\n10. Red: Test ExpandableEvent::render() with expanded\n11. Green: Implement expanded rendering (multi-line)\n12. Refactor: Clean up indentation logic\n13. Red: Test expand indicator (▶/▼)\n14. Green: Add visual indicators\n15. Refactor: Polish API, add docs\n\nAcceptance:\n- ExpandableEvent struct with toggle state\n- Collapsed: single line with ▶ indicator\n- Expanded: multi-line with ▼ and indented details\n- Builder pattern for details\n- Zero unwraps, zero panics\n- moon run :quick passes","status":"open","priority":2,"issue_type":"feature","estimated_minutes":20,"created_at":"2026-02-01T14:25:40.082090464Z","created_by":"lewis","updated_at":"2026-02-01T14:25:40.082090464Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-30m.5","depends_on_id":"src-30m","type":"parent-child","created_at":"2026-02-01T14:25:40.082090464Z","created_by":"lewis"}]}
{"id":"src-30m.6","title":"timeline-tests: Timeline tests","description":"Comprehensive test suite for Timeline feature.\n\nTDD15 Phases (0-15):\n0. Setup: Create tests/timeline_test.rs\n1. Red: Test complete timeline flow end-to-end\n2. Green: Implement integration test\n3. Refactor: Extract test helpers\n4. Red: Test phase transitions\n5. Green: Add transition tests\n6. Refactor: Use test fixtures\n7. Red: Test progress bar updates\n8. Green: Add progress tests\n9. Refactor: Mock time for determinism\n10. Red: Test event filtering and rendering\n11. Green: Add event tests\n12. Refactor: Clean up assertions\n13. Red: Test error cases (invalid phase, etc)\n14. Green: Add error handling tests\n15. Refactor: Polish suite, add docs\n\nTest Coverage:\n- Timeline creation and initialization\n- Phase transitions and tracking\n- Progress bar rendering at 0%, 50%, 100%\n- Event list operations (push, filter, render)\n- Relative time formatting across all ranges\n- Scroll behavior with large event lists\n- Expand/collapse state management\n- Error cases and edge conditions\n\nAcceptance:\n- All components tested\n- Edge cases covered\n- moon run :test passes\n- moon run :coverage shows >90%\n- Zero unwraps, zero panics","status":"open","priority":2,"issue_type":"test","estimated_minutes":30,"created_at":"2026-02-01T14:25:46.511758281Z","created_by":"lewis","updated_at":"2026-02-01T14:25:46.511758281Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-30m.6","depends_on_id":"src-30m","type":"parent-child","created_at":"2026-02-01T14:25:46.511758281Z","created_by":"lewis"}]}
{"id":"src-30m.7","title":"timeline-struct: Timeline component structure","description":"Create basic Timeline component structure for execution visualization.\n\nTDD15 Phases (0-15):\n0. Setup: Add Timeline struct with Display trait\n1. Red: Test Timeline::new() returns empty timeline\n2. Green: Implement Timeline::new()\n3. Refactor: Add builder pattern if needed\n4. Red: Test Timeline::render() formats output\n5. Green: Implement basic render()\n6. Refactor: Extract rendering helpers\n7. Red: Test Timeline with phases enum\n8. Green: Add ExecutionPhase enum\n9. Refactor: Organize phase-related code\n10. Red: Test Timeline::set_current_phase()\n11. Green: Implement phase tracking\n12. Refactor: Clean up phase state management\n13. Red: Test Timeline::duration() calculation\n14. Green: Implement duration tracking\n15. Refactor: Polish API, add docs\n\nAcceptance:\n- Timeline struct with phase tracking\n- Basic rendering via Display trait\n- Duration calculation\n- Zero unwraps, zero panics\n- moon run :quick passes","status":"open","priority":2,"issue_type":"feature","estimated_minutes":15,"created_at":"2026-02-01T14:26:18.326746694Z","created_by":"lewis","updated_at":"2026-02-01T14:26:18.326746694Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-30m.7","depends_on_id":"src-30m","type":"parent-child","created_at":"2026-02-01T14:26:18.326746694Z","created_by":"lewis"}]}
{"id":"src-30m.8","title":"timeline-phases: Phase data model","description":"Implement phase data model for execution stages.\n\nTDD15 Phases (0-15):\n0. Setup: Define Phase struct\n1. Red: Test Phase::new() with timestamp\n2. Green: Implement Phase::new()\n3. Refactor: Add phase name validation\n4. Red: Test Phase::duration() between phases\n5. Green: Implement duration calculation\n6. Refactor: Use chrono for time handling\n7. Red: Test PhaseTransition events\n8. Green: Add PhaseTransition enum\n9. Refactor: Clean up transition logic\n10. Red: Test phase status (running/complete/failed)\n11. Green: Add PhaseStatus enum\n12. Refactor: Organize status-related code\n13. Red: Test phase metadata (logs, artifacts)\n14. Green: Add metadata storage\n15. Refactor: Polish API, add docs\n\nAcceptance:\n- Phase struct with timestamps\n- PhaseTransition and PhaseStatus enums\n- Duration calculation between phases\n- Metadata storage (logs, artifacts)\n- Zero unwraps, zero panics\n- moon run :quick passes","status":"open","priority":2,"issue_type":"feature","estimated_minutes":15,"created_at":"2026-02-01T14:26:23.381511387Z","created_by":"lewis","updated_at":"2026-02-01T14:26:23.381511387Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-30m.8","depends_on_id":"src-30m","type":"parent-child","created_at":"2026-02-01T14:26:23.381511387Z","created_by":"lewis"}]}
{"id":"src-312","title":"ui-ws: Setup WebSocket client for WASM environment","description":"Setup gloo-net WebSocket client for WASM. Implement connection to ws://localhost:8080/api/ws, handle connection lifecycle (connect, disconnect, error). Create WebSocket context for sharing across components. Files: crates/oya-ui/src/websocket/client.rs. Tests: WS connects from WASM, disconnect handled. Effort: 1hr. Parent: src-3s0","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:01:17.653348608Z","created_by":"lewis","updated_at":"2026-02-01T14:01:17.653348608Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-35d","title":"ui-ws-integration: Deserialize bincode BeadEvent messages","description":"Receive binary WebSocket messages, deserialize with bincode into BeadEvent enum. Handle all event types: Created, Scheduled, Started, Completed, Failed, Cancelled. Log deserialization errors. Files: crates/oya-ui/src/events/deserialize.rs. Tests: all event types deserialize, malformed messages logged. Effort: 45min. Parent: src-17r","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:02:00.694059366Z","created_by":"lewis","updated_at":"2026-02-01T14:02:00.694059366Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-36j","title":"backend-ws: Implement connection error handling and recovery","description":"Handle WebSocket errors: client disconnect, network errors, serialization failures. Log errors with tracing. Implement graceful degradation (continue serving other clients if one fails). Files: crates/oya-web/src/websocket/errors.rs. Tests: client disconnect doesn't crash server, serialization error logged, other clients unaffected. Effort: 45min. Parent: src-2yy","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-01T14:00:53.825510243Z","created_by":"lewis","updated_at":"2026-02-01T14:00:53.825510243Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-36wa","title":"idempotency: IdempotentExecutor: Unit tests with concurrent execution","description":"# Architecture\nTest idempotency guarantees with concurrent execution and property-based testing.\n\n# Files\n- crates/workflow/tests/idempotent_executor_test.rs - Unit tests\n- crates/workflow/tests/concurrency_test.rs - Concurrent execution tests\n\n# Success Criteria\n- Test: same key + same input = same result (determinism)\n- Test: concurrent execution → only one executes, others get cached result\n- Property test: execute-once guarantee under load\n\n# Quality Standards\n- Zero unwraps in tests\n- Use tokio::spawn for concurrent test execution\n- Proptest for exhaustive concurrency scenarios","status":"open","priority":1,"issue_type":"feature","estimated_minutes":30,"created_at":"2026-02-01T14:46:54.534105996Z","created_by":"lewis","updated_at":"2026-02-01T14:46:54.534105996Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-37t","title":"backend-axum: Setup axum router with tower middleware stack","description":"Setup basic axum router with tower middleware layers for the REST API server.\n\n# Middleware Stack\n1. CORS: Allow Tauri origin (http://tauri.localhost)\n2. Compression: gzip and brotli encoding\n3. Tracing: Request/response logging with tracing-subscriber\n4. Timeout: 30s request timeout\n\n# Success Criteria\n- axum Router initialized with all middleware\n- CORS headers present in responses\n- Compression works (Accept-Encoding: gzip)\n- Tracing logs requests/responses\n- Timeout triggers on slow requests (>30s)\n\n# Files\n- crates/oya-web/src/lib.rs - Server initialization\n- crates/oya-web/src/middleware.rs - Middleware configuration\n\n# Dependencies\nParent bead: src-17z (axum REST API)\n\nEffort: 1hr\nAtomic decomposition of axum REST API","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:00:14.275034090Z","created_by":"lewis","updated_at":"2026-02-01T14:00:14.275034090Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-381","title":"event-sourcing: DurableEventStore: Batch append operations","description":"Implement batch operations for performance with single fsync.\n\nSuccess criteria:\n- Implement append_events_batch() for multiple events\n- Single fsync after all events written\n- Atomic batch operation (all-or-nothing)\n- Define BatchError type with thiserror\n- Zero unwraps, zero panics\n\nFiles: crates/events/src/durable_store.rs\n\nEstimated time: 30 minutes","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:38:00.618242394Z","created_by":"lewis","updated_at":"2026-02-01T14:38:00.618242394Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-38d","title":"event-sourcing: SurrealDB Schema: Define workflow tables","description":"# Architecture\nDefine bead, workflow_run, and process tables for workflow execution tracking with foreign key relationships.\n\n# Files\n- schema.surql - Workflow table definitions with relations\n- crates/workflow/src/schema/workflow.rs - Rust type mappings\n\n# Success Criteria\n- Workflow tables with proper foreign key constraints\n- Bead metadata tracking (title, type, status, dependencies)\n- Process lifecycle tracking (spawn, execute, complete)\n\n# Quality Standards\n- Zero unwraps, zero panics\n- Foreign key integrity enforced\n- Railway-Oriented Programming","status":"open","priority":1,"issue_type":"feature","estimated_minutes":30,"created_at":"2026-02-01T14:45:15.111944816Z","created_by":"lewis","updated_at":"2026-02-01T14:45:15.111944816Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-392","title":"idempotency: UUID v5: Implement namespace generation from bead_id","description":"# Architecture\nGenerate deterministic UUID v5 namespace from bead_id for idempotency key generation.\n\n# Files\n- crates/workflow/src/idempotent/namespace.rs - Namespace generation\n\n# Success Criteria\n- namespace_from_bead(bead_id: &str) -> Uuid (UUID v5 namespace)\n- Same bead_id always produces same namespace\n- Use DNS namespace as base (Uuid::NAMESPACE_DNS)\n\n# Quality Standards\n- Zero unwraps, zero panics\n- Deterministic: same input = same output\n- Use uuid crate's v5 implementation","status":"open","priority":1,"issue_type":"feature","estimated_minutes":15,"created_at":"2026-02-01T14:46:28.090705654Z","created_by":"lewis","updated_at":"2026-02-01T14:46:28.090705654Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-397b","title":"replay: EventSourcingReplay: Error recovery and retry","description":"# Architecture\nHandle event application errors with retry logic and dead letter queue for poison events.\n\n# Files\n- crates/events/src/replay/recovery.rs - Error recovery\n\n# Success Criteria\n- Retry transient errors (network, lock contention) with exponential backoff\n- Dead letter queue for poison events (skip and continue)\n- Log all skipped events for manual review\n\n# Quality Standards\n- Zero unwraps, zero panics\n- Railway-Oriented Programming for retry pipeline\n- Max 3 retries before DLQ","status":"open","priority":1,"issue_type":"feature","estimated_minutes":30,"created_at":"2026-02-01T14:47:49.353142104Z","created_by":"lewis","updated_at":"2026-02-01T14:47:49.353142104Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-39w","title":"ui-tauri: Initialize Tauri 2.0 project structure","description":"Create Tauri 2.0 project with cargo tauri init. Configure tauri.conf.json: app identifier, window size (1280x720), permissions, CSP policy. Setup src-tauri directory structure. Files: crates/oya-ui/src-tauri/tauri.conf.json, crates/oya-ui/src-tauri/Cargo.toml. Tests: tauri app builds, window opens. Effort: 1hr. Parent: src-3s0","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:01:16.711255436Z","created_by":"lewis","updated_at":"2026-02-01T14:01:16.711255436Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-3a7","title":"backend-ws: Setup WebSocket server with axum integration","description":"Setup WebSocket endpoint at /api/ws using axum WebSocket support. Handle WebSocket upgrade, connection lifecycle (connect, ping/pong, disconnect), maintain client registry. Files: crates/oya-web/src/websocket/server.rs. Tests: client can connect, ping/pong works, disconnect cleans up. Effort: 1hr. Parent: src-2yy","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:00:53.135771934Z","created_by":"lewis","updated_at":"2026-02-01T14:00:53.135771934Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-3bi","title":"idempotency: Implement IdempotentExecutor with cache and DB storage","description":"## Overview\nImplement IdempotentExecutor that ensures exactly-once execution via idempotency keys. Combines in-memory HashMap cache with SurrealDB persistence.\n\n## Architecture\n**Cache**: HashMap<Uuid, ExecutionResult> with RwLock\n**Persistence**: SurrealDB idempotency_key table\n**Guarantee**: Same key → Return cached result (no re-execution)\n\n## Core API\n```rust\npub struct IdempotentExecutor {\n    cache: Arc<RwLock<HashMap<Uuid, ExecutionResult>>>,\n    db: Arc<Surreal<Any>>,\n}\n\nimpl IdempotentExecutor {\n    pub async fn execute<F, T>(&self, key: Uuid, f: F) -> Result<T, Error>\n    where F: FnOnce() -> Result<T, Error>;\n}\n```\n\n## Execution Flow\n1. Check in-memory cache (fast path)\n2. If miss, check DB (durable storage)\n3. If miss, execute function\n4. Store result in cache + DB\n5. Return result\n\n## Files to Create\n- crates/workflow/src/idempotency/executor.rs - IdempotentExecutor\n- crates/workflow/src/idempotency/cache.rs - Cache wrapper\n- crates/workflow/tests/executor_test.rs - Integration tests\n\n## Success Criteria\n- Cache hit latency <1ms\n- DB hit latency <10ms\n- Duplicate execution prevented (100% guarantee)\n- Integration tests: same input = same result\n- Cache eviction policy working\n\n## Dependencies\n- tokio with sync features for RwLock\n- surrealdb for persistence\n\n## Quality Gates\n- Zero unwraps, zero panics\n- Railway-Oriented Programming\n- Proptest for idempotency guarantees\n- Thread-safe (concurrent execution safe)\n\n## CUE Schema\nSchema: .beads/schemas/intent-cli-20260201012642-z9lgvyom.cue (TO BE CREATED)\n\n## Effort: 4 hours","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T13:57:30.527433837Z","created_by":"lewis","updated_at":"2026-02-01T13:57:30.527433837Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-3cy","title":"ui-ws-integration: Update DAG state reactively with Leptos signals","description":"On BeadEvent received, update DAG state using Leptos create_signal. Map events to state changes: Created adds node, Scheduled/Started/Completed/Failed/Cancelled update node color. Trigger DAG re-render. Files: crates/oya-ui/src/state/dag_state.rs. Tests: events update signals, DAG re-renders, latency <50ms. Effort: 1hr. Parent: src-17r","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:02:00.929083579Z","created_by":"lewis","updated_at":"2026-02-01T14:02:00.929083579Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-3d5","title":"event-sourcing: DurableEventStore: Error recovery and retry patterns","description":"# Architecture\nImplement retry logic with exponential backoff for transient failures (network, disk I/O).\n\n# Files\n- crates/events/src/durable_store/recovery.rs - Retry and recovery logic\n\n# Success Criteria\n- Retry with exponential backoff (100ms, 200ms, 400ms, max 3 retries)\n- Distinguish transient vs permanent errors\n- Circuit breaker pattern for cascading failures\n\n# Quality Standards\n- Zero unwraps, zero panics\n- Railway-Oriented Programming for retry pipeline\n- Tokio async retry with tokio::time::sleep","status":"open","priority":1,"issue_type":"feature","estimated_minutes":30,"created_at":"2026-02-01T14:45:46.931441739Z","created_by":"lewis","updated_at":"2026-02-01T14:45:46.931441739Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-3d7n","title":"integration: Event Sourcing: Chaos test for zero data loss","description":"# Architecture\nChaos test: simulate crashes during event append, verify fsync guarantees zero data loss.\n\n# Files\n- tests/integration/chaos_test.rs - Chaos testing for data durability\n\n# Success Criteria\n- Append events with random \"crashes\" (abort process)\n- Restart and verify all fsynced events are recoverable\n- Prove zero data loss via fsync guarantees\n\n# Quality Standards\n- Zero unwraps in tests\n- Simulate crashes with std::process::abort\n- Multi-process test with subprocess spawning","status":"open","priority":1,"issue_type":"feature","estimated_minutes":30,"created_at":"2026-02-01T14:48:13.801079524Z","created_by":"lewis","updated_at":"2026-02-01T14:48:13.801079524Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-3ds","title":"backend-ws: WebSocket integration tests with latency measurement","description":"Integration tests: connect multiple clients, send events from EventStoreActor, verify all clients receive within <50ms, test concurrent connections (100 clients), test disconnect/reconnect. Measure p50/p95/p99 latency. Files: crates/oya-web/tests/websocket_test.rs. Use tungstenite for WS client. Effort: 1hr. Parent: src-2yy","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-01T14:00:54.055127528Z","created_by":"lewis","updated_at":"2026-02-01T14:00:54.055127528Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-3f7q","title":"queue-actors: Implement FIFOQueue handlers (Enqueue, Dequeue, Peek, Length)","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-ylatiqzf.cue implementation.cue\n# Schema location: /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-ylatiqzf.cue\n\n\n#EnhancedBead: {\n  id: \"intent-cli-20260201085944-ylatiqzf\"\n  title: \"queue-actors: Implement FIFOQueue handlers (Enqueue, Dequeue, Peek, Length)\"\n  type: \"feature\"\n  priority: 2\n  effort_estimate: \"30min\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL implement queue actors\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN Enqueue received\\\", shall: \\\"THE SYSTEM SHALL add item to queue\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF queue full\\\", shall_not: \\\"THE SYSTEM SHALL NOT drop items\\\", because: \\\"bounded queues must reject\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"ractor Actor trait understood\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"Queue operations implemented\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"Queue ordering maintained\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write queue tests\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement queue-actors: Implement FIFOQueue handlers (Enqueue, Dequeue, Peek, Length)\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/intent-cli-20260201085944-ylatiqzf/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-01T14:59:45.448240714Z","created_by":"lewis","updated_at":"2026-02-01T14:59:45.448240714Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-3gxt","title":"supervision: Implement one_for_one restart strategy","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085547-eccmlgaj.cue implementation.cue\n# Schema location: /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085547-eccmlgaj.cue\n\n\n#EnhancedBead: {\n  id: \"intent-cli-20260201085547-eccmlgaj\"\n  title: \"supervision: Implement one_for_one restart strategy\"\n  type: \"feature\"\n  priority: 1\n  effort_estimate: \"30min\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL use one_for_one restart strategy\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN supervised actor crashes\\\", shall: \\\"THE SYSTEM SHALL restart only crashed actor\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF one actor crashes\\\", shall_not: \\\"THE SYSTEM SHALL NOT restart sibling actors\\\", because: \\\"fault isolation requirement\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"3-tier hierarchy defined\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"one_for_one strategy implemented\\\",\n        \\\"Siblings unaffected by crash\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"Restart affects only crashed actor\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write tests\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement supervision: Implement one_for_one restart strategy\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/intent-cli-20260201085547-eccmlgaj/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:56:30.210343407Z","created_by":"lewis","updated_at":"2026-02-01T14:56:30.210343407Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-3gy","title":"event-sourcing: DurableEventStore: Error recovery patterns","description":"Implement recovery patterns for failure scenarios.\n\nSuccess criteria:\n- Implement retry logic with exponential backoff\n- Handle partial write recovery\n- Implement corruption detection and recovery\n- Define RecoveryError type with thiserror\n- Zero unwraps, zero panics\n- Functional retry patterns with map/and_then\n\nFiles: crates/events/src/durable_store.rs\n\nEstimated time: 25 minutes","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:38:02.323585633Z","created_by":"lewis","updated_at":"2026-02-01T14:38:02.323585633Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-3gye","title":"reconciler: Implement stuck bead detection","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-0ngu67wb.cue implementation.cue\n# Schema location: /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-0ngu67wb.cue\n\n\n#EnhancedBead: {\n  id: \"intent-cli-20260201085944-0ngu67wb\"\n  title: \"reconciler: Implement stuck bead detection\"\n  type: \"feature\"\n  priority: 1\n  effort_estimate: \"30min\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL reconcile system state every 1s\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN reconciliation loop runs\\\", shall: \\\"THE SYSTEM SHALL detect anomalies\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF reconciliation fails\\\", shall_not: \\\"THE SYSTEM SHALL NOT stop loop\\\", because: \\\"reconciliation must be permanent\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"BeadWorker actors implemented\\\",\n        \\\"Storage actors available\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"Reconciliation loop running\\\",\n        \\\"Anomalies detected and fixed\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"Loop runs every 1s\\\",\n      \\\"Loop never stops\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write reconciliation tests\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement reconciler: Implement stuck bead detection\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/intent-cli-20260201085944-0ngu67wb/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:59:46.636504767Z","created_by":"lewis","updated_at":"2026-02-01T14:59:46.636504767Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-3hki","title":"queue-actors: Unit tests for both queue actors","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-xlsosxom.cue implementation.cue\n# Schema location: /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-xlsosxom.cue\n\n\n#EnhancedBead: {\n  id: \"intent-cli-20260201085944-xlsosxom\"\n  title: \"queue-actors: Unit tests for both queue actors\"\n  type: \"feature\"\n  priority: 2\n  effort_estimate: \"30min\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL implement queue actors\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN Enqueue received\\\", shall: \\\"THE SYSTEM SHALL add item to queue\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF queue full\\\", shall_not: \\\"THE SYSTEM SHALL NOT drop items\\\", because: \\\"bounded queues must reject\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"ractor Actor trait understood\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"Queue operations implemented\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"Queue ordering maintained\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write queue tests\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement queue-actors: Unit tests for both queue actors\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/intent-cli-20260201085944-xlsosxom/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-01T14:59:45.832970445Z","created_by":"lewis","updated_at":"2026-02-01T14:59:45.832970445Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-3iq0","title":"checkpoint: CheckpointManager: Implement auto-checkpoint timer (60s interval)","description":"# Architecture\nBackground tokio task that checkpoints state every 60 seconds automatically.\n\n# Files\n- crates/workflow/src/checkpoint/auto.rs - Auto-checkpoint timer\n\n# Success Criteria\n- start_auto_checkpoint(interval: Duration) -> JoinHandle\n- Tokio interval timer: tokio::time::interval(60s)\n- Graceful shutdown on cancellation\n\n# Quality Standards\n- Zero unwraps, zero panics\n- Use tokio::time::interval for timer\n- Handle checkpoint errors without crashing timer task","status":"open","priority":1,"issue_type":"feature","estimated_minutes":30,"created_at":"2026-02-01T14:47:22.058941952Z","created_by":"lewis","updated_at":"2026-02-01T14:47:22.058941952Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-3jhw","title":"actor-system: Implement message passing with call, cast, and send patterns","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085546-i9k1gux6.cue implementation.cue\n# Schema location: /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085546-i9k1gux6.cue\n\n\n#EnhancedBead: {\n  id: \"intent-cli-20260201085546-i9k1gux6\"\n  title: \"actor-system: Implement message passing with call, cast, and send patterns\"\n  type: \"feature\"\n  priority: 1\n  effort_estimate: \"30min\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL support all ractor message patterns\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN using call pattern\\\", shall: \\\"THE SYSTEM SHALL wait for reply with timeout\\\"},\n      {trigger: \\\"WHEN using cast pattern\\\", shall: \\\"THE SYSTEM SHALL send message without waiting\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF reply timeout exceeded\\\", shall_not: \\\"THE SYSTEM SHALL NOT deadlock\\\", because: \\\"timeouts must prevent deadlocks\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"ping/pong example working\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"All three message patterns implemented\\\",\n        \\\"Timeouts configured for call pattern\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"cast never blocks caller\\\",\n      \\\"call blocks until reply or timeout\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write tests for all message patterns\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement call, cast, send patterns\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/intent-cli-20260201085546-i9k1gux6/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:56:29.960266808Z","created_by":"lewis","updated_at":"2026-02-01T14:56:29.960266808Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-3k9","title":"event-sourcing: Benchmarks: Single event append benchmark","description":"# Architecture\nBenchmark single event append with fsync to measure per-event overhead (target: <5ms).\n\n# Files\n- benches/single_append.rs - Single event append benchmark\n\n# Success Criteria\n- Measure DurableEventStore::append_event() latency\n- Break down: serialize time, insert time, fsync time\n- Validate target: p50 < 3ms, p99 < 5ms\n\n# Quality Standards\n- Use realistic event payloads (1KB typical size)\n- Fresh SurrealDB instance per benchmark run\n- Report latency percentiles (p50, p90, p95, p99)","status":"open","priority":2,"issue_type":"feature","estimated_minutes":30,"created_at":"2026-02-01T14:46:08.270594572Z","created_by":"lewis","updated_at":"2026-02-01T14:46:08.270594572Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-3kh","title":"event-sourcing: DurableEventStore: Bincode event serialization","description":"Implement Result-based event serialization using bincode with thiserror error types.\n\nSuccess criteria:\n- Define Event trait with serialize/deserialize methods\n- Implement bincode serialization with proper error handling\n- Use thiserror for SerializationError type\n- Zero unwraps, zero panics\n- Railway-Oriented Programming with Result types\n\nFiles: crates/events/src/durable_store.rs\n\nEstimated time: 15 minutes","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:37:51.467471846Z","created_by":"lewis","updated_at":"2026-02-01T14:37:51.467471846Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-3lp","title":"Add hello world command to OYA CLI","description":"Test bead to verify OYA pipeline works end-to-end. Add simple 'hello' subcommand that prints 'Hello from OYA Storm Goddess'.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-01T06:15:11.854113061Z","created_by":"lewis","updated_at":"2026-02-01T06:32:30.949372987Z","closed_at":"2026-02-01T06:32:30.949360017Z","close_reason":"done","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-3ls","title":"idempotency: Generate deterministic UUID v5 keys from bead+input","description":"## Overview\nImplement deterministic UUID v5 key generation for idempotency. Same bead + input always produces same UUID, preventing duplicate execution.\n\n## Algorithm\n**UUID v5**: Deterministic key from namespace + name\n**Namespace**: UUID v5 from bead_id\n**Name**: SHA-256 hash of input JSON\n\n## Key Generation Flow\n```rust\npub fn idempotency_key(bead_id: &str, input: &serde_json::Value) -> Uuid {\n    let namespace = Uuid::new_v5(&Uuid::NAMESPACE_OID, bead_id.as_bytes());\n    let input_hash = sha256(serde_json::to_string(input));\n    Uuid::new_v5(&namespace, input_hash.as_bytes())\n}\n```\n\n## Properties\n- **Deterministic**: Same input → Same UUID\n- **Unique**: Different inputs → Different UUIDs\n- **Collision-resistant**: SHA-256 hash collision resistance\n\n## Files to Create\n- crates/workflow/src/idempotency/keys.rs - UUID v5 generation\n- crates/workflow/src/idempotency/types.rs - IdempotencyKey wrapper\n- crates/workflow/tests/idempotency_test.rs - Property tests\n\n## Success Criteria\n- UUID v5 generation working\n- Same input produces same key (100% deterministic)\n- Different inputs produce different keys\n- Proptest validates determinism\n\n## Dependencies\n- uuid = { version = \"1.0\", features = [\"v5\"] }\n- sha2 = \"0.10\" for SHA-256 hashing\n\n## Quality Gates\n- Zero unwraps, zero panics\n- Proptest for determinism\n- 1M+ iterations without collision\n\n## CUE Schema\nSchema: .beads/schemas/intent-cli-20260201012642-2sgtpztz.cue (TO BE CREATED)\n\n## Effort: 2 hours","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T13:57:17.960505707Z","created_by":"lewis","updated_at":"2026-02-01T13:57:17.960505707Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-3nub","title":"reconciler: Implement dead worker detection","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-b0yssshe.cue implementation.cue\n# Schema location: /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-b0yssshe.cue\n\n\n#EnhancedBead: {\n  id: \"intent-cli-20260201085944-b0yssshe\"\n  title: \"reconciler: Implement dead worker detection\"\n  type: \"feature\"\n  priority: 1\n  effort_estimate: \"30min\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL reconcile system state every 1s\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN reconciliation loop runs\\\", shall: \\\"THE SYSTEM SHALL detect anomalies\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF reconciliation fails\\\", shall_not: \\\"THE SYSTEM SHALL NOT stop loop\\\", because: \\\"reconciliation must be permanent\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"BeadWorker actors implemented\\\",\n        \\\"Storage actors available\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"Reconciliation loop running\\\",\n        \\\"Anomalies detected and fixed\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"Loop runs every 1s\\\",\n      \\\"Loop never stops\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write reconciliation tests\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement reconciler: Implement dead worker detection\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/intent-cli-20260201085944-b0yssshe/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:59:46.538972362Z","created_by":"lewis","updated_at":"2026-02-01T14:59:46.538972362Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-3ob","title":"event-sourcing: DurableEventStore: Unit tests","description":"Comprehensive test coverage for DurableEventStore.\n\nSuccess criteria:\n- Test serialization round-trip\n- Test append with fsync verification\n- Test retrieval and filtering\n- Test batch operations\n- Test error scenarios (connection loss, disk full, corruption)\n- Test recovery patterns\n- 100% code coverage of happy and error paths\n\nFiles: crates/events/src/durable_store.rs\n\nEstimated time: 30 minutes","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:38:04.856144769Z","created_by":"lewis","updated_at":"2026-02-01T14:38:04.856144769Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-3oj","title":"event-sourcing: SurrealDB Schema: Define core event tables","description":"# Architecture\nDefine state_transition (append-only event log), idempotency_key (duplicate prevention), and checkpoint (compressed snapshots) tables in schema.surql with sync_mode='full' for fsync guarantees.\n\n# Files\n- schema.surql - Core table definitions\n- crates/events/src/schema/core.rs - Rust type mappings\n\n# Success Criteria\n- Tables support fsync writes (sync_mode='full')\n- Bincode-compatible field types (byte arrays, timestamps, UUIDs)\n- Zero data loss guarantees enforced at schema level\n\n# Quality Standards\n- Zero unwraps, zero panics\n- Railway-Oriented Programming for all schema operations\n- All errors use Result<T, Error> with thiserror","status":"open","priority":1,"issue_type":"feature","estimated_minutes":30,"created_at":"2026-02-01T14:45:15.057291532Z","created_by":"lewis","updated_at":"2026-02-01T14:45:15.057291532Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-3p1","title":"idempotency: IdempotentExecutor: Implement DB fallback for cache misses","description":"# Architecture\nQuery SurrealDB idempotency_key table on cache miss and populate cache with result.\n\n# Files\n- crates/workflow/src/idempotent/db_lookup.rs - Database fallback\n\n# Success Criteria\n- db_lookup(key: Uuid) -> Result<Option<StoredResult>, DbError>\n- On hit: deserialize result, update cache, return\n- On miss: return None (execute-once path)\n\n# Quality Standards\n- Zero unwraps, zero panics\n- Railway-Oriented Programming for DB query pipeline\n- Cache population after successful DB lookup","status":"open","priority":1,"issue_type":"feature","estimated_minutes":30,"created_at":"2026-02-01T14:46:54.322640860Z","created_by":"lewis","updated_at":"2026-02-01T14:46:54.322640860Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-3q67","title":"queue-actors: Implement PriorityQueueActor with BinaryHeap","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-wzha0vrc.cue implementation.cue\n# Schema location: /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-wzha0vrc.cue\n\n\n#EnhancedBead: {\n  id: \"intent-cli-20260201085944-wzha0vrc\"\n  title: \"queue-actors: Implement PriorityQueueActor with BinaryHeap\"\n  type: \"feature\"\n  priority: 2\n  effort_estimate: \"30min\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL implement queue actors\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN Enqueue received\\\", shall: \\\"THE SYSTEM SHALL add item to queue\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF queue full\\\", shall_not: \\\"THE SYSTEM SHALL NOT drop items\\\", because: \\\"bounded queues must reject\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"ractor Actor trait understood\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"Queue operations implemented\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"Queue ordering maintained\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write queue tests\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement queue-actors: Implement PriorityQueueActor with BinaryHeap\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/intent-cli-20260201085944-wzha0vrc/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-01T14:59:45.540082049Z","created_by":"lewis","updated_at":"2026-02-01T14:59:45.540082049Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-3ruu","title":"worker-actor: Define bead lifecycle state machine","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-lz17okmn.cue implementation.cue\n# Schema location: /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-lz17okmn.cue\n\n\n#EnhancedBead: {\n  id: \"intent-cli-20260201085944-lz17okmn\"\n  title: \"worker-actor: Define bead lifecycle state machine\"\n  type: \"feature\"\n  priority: 1\n  effort_estimate: \"30min\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL implement bead lifecycle state machine\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN bead scheduled\\\", shall: \\\"THE SYSTEM SHALL transition to running state\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF state transition invalid\\\", shall_not: \\\"THE SYSTEM SHALL NOT allow invalid transitions\\\", because: \\\"state machine integrity\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Storage actors implemented\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"BeadWorker operations complete\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"State machine invariants maintained\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write tests\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement worker-actor: Define bead lifecycle state machine\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/intent-cli-20260201085944-lz17okmn/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:59:44.781363287Z","created_by":"lewis","updated_at":"2026-02-01T14:59:44.781363287Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-3rx","title":"backend-axum: Implement POST /api/beads/:id/cancel endpoint","description":"Implement bead cancellation endpoint. Extract bead ID, send cancel message to SchedulerActor, wait for acknowledgment, return 200 OK. Error handling: 404 if bead not found, 409 Conflict if already completed/cancelled, 503 if actor unavailable. Files: crates/oya-web/src/routes/beads.rs. Tests: cancel running bead returns 200, cancel completed returns 409, cancel nonexistent returns 404. Effort: 45min. Parent: src-17z","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:00:34.974957368Z","created_by":"lewis","updated_at":"2026-02-01T14:00:34.974957368Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-3s0","title":"ui: Implement Tauri 2.0 scaffold with Leptos CSR frontend","description":"Create Tauri 2.0 desktop app with Leptos client-side rendering (CSR) frontend. Sets up project structure, build pipeline, HTTP client, and WebSocket connection to axum backend.\n\n# Architecture\n- Tauri 2.0 native desktop window (cross-platform)\n- Leptos 0.7 CSR (WASM frontend)\n- HTTP client for REST API calls\n- WebSocket client for real-time updates\n- Build pipeline (Rust nightly for WASM)\n\n# Success Criteria\n- Tauri app launches successfully\n- Leptos frontend renders in window\n- HTTP client connects to axum backend\n- WebSocket client establishes connection\n- Build pipeline works (dev + release modes)\n\n# Dependencies\n- Bead src-17z: axum REST API\n- Bead src-2yy: WebSocket server\n\n# Files\n- crates/oya-ui/src-tauri/main.rs - Tauri wrapper\n- crates/oya-ui/src/app.rs - Leptos frontend app\n- crates/oya-ui/src/websocket.rs - WebSocket client\n- crates/oya-ui/Cargo.toml - Frontend dependencies\n- crates/oya-ui/tauri.conf.json - Tauri configuration\n\nEffort: 4hr\nBead ID: intent-cli-20260201020059-o7uvwmxl\nCUE Schema: .beads/schemas/intent-cli-20260201020059-o7uvwmxl.cue","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T13:54:14.722567199Z","created_by":"lewis","updated_at":"2026-02-01T13:54:14.722567199Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-3s0.1","title":"Setup Tailwind CSS with Leptos class helpers","description":"Configure Tailwind CSS v4 for Leptos with utility classes and responsive design.\n\n# Architecture\n- Tailwind CSS v4 via CDN (CSR-friendly)\n- tailwind.config.js with custom theme\n- Leptos class! macro for dynamic classes\n- Responsive breakpoints (sm, md, lg, xl)\n- Dark mode support (class-based)\n\n# Files to Create\n- crates/oya-ui/tailwind.config.js (theme config)\n- crates/oya-ui/public/styles/main.css (Tailwind imports)\n- crates/oya-ui/src/utils/classes.rs (class helper functions)\n- crates/oya-ui/src/components/ui/mod.rs (UI primitives)\n- crates/oya-ui/src/components/ui/button.rs (Button component)\n- Update index.html (Tailwind CSS link)\n\n# Success Criteria\n- Tailwind utilities work in components\n- Responsive design works (mobile-first)\n- Dark mode toggle works\n- class! macro compiles dynamic classes\n- Button component has variants (primary, secondary)\n- trunk serve shows styled components\n- No FOUC (flash of unstyled content)\n\n# Dependencies\n- Previous bead: leptos-signals\n- Tailwind CSS v4 CLI (npm install -D tailwindcss)\n\nEffort: 20min","status":"open","priority":2,"issue_type":"feature","estimated_minutes":20,"created_at":"2026-02-01T14:25:17.077554883Z","created_by":"lewis","updated_at":"2026-02-01T14:25:17.077554883Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-3s0.1","depends_on_id":"src-3s0","type":"parent-child","created_at":"2026-02-01T14:25:17.077554883Z","created_by":"lewis"}]}
{"id":"src-3s0.2","title":"Initialize Leptos 0.7 CSR project structure","description":"Create minimal Leptos 0.7 client-side rendering project with WASM target.\n\n# Architecture\n- Cargo workspace member: crates/oya-ui\n- Leptos 0.7 with CSR feature only (no SSR)\n- WASM target (wasm32-unknown-unknown)\n- Minimal index.html entry point\n- lib.rs with re-exports\n\n# Files to Create\n- crates/oya-ui/Cargo.toml (leptos = 0.7, CSR features)\n- crates/oya-ui/src/lib.rs (re-export app module)\n- crates/oya-ui/index.html (minimal WASM loader)\n- crates/oya-ui/README.md (build instructions)\n\n# Success Criteria\n- cargo check --target wasm32-unknown-unknown passes\n- Leptos 0.7 dependency correctly configured\n- CSR feature enabled, SSR disabled\n- Project compiles without errors\n- README documents dev workflow\n\n# Dependencies\n- Add to workspace Cargo.toml\n- Install wasm32-unknown-unknown target","status":"open","priority":1,"issue_type":"feature","estimated_minutes":15,"created_at":"2026-02-01T14:26:21.125885357Z","created_by":"lewis","updated_at":"2026-02-01T14:26:21.125885357Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-3s0.2","depends_on_id":"src-3s0","type":"parent-child","created_at":"2026-02-01T14:26:21.125885357Z","created_by":"lewis"}]}
{"id":"src-3s0.3","title":"Configure Trunk for WASM builds and hot reload","description":"Setup Trunk build system for Leptos WASM compilation with dev server and hot reload.\n\n# Architecture\n- Trunk.toml configuration\n- WASM optimization settings\n- Dev server with hot reload\n- Public assets directory structure\n- Release build optimization\n\n# Files to Create\n- crates/oya-ui/Trunk.toml (build config)\n- crates/oya-ui/.cargo/config.toml (WASM settings)\n- crates/oya-ui/public/.gitkeep (static assets)\n- Update crates/oya-ui/README.md (trunk commands)\n\n# Success Criteria\n- trunk serve launches dev server\n- Hot reload works on file changes\n- trunk build --release produces optimized WASM\n- WASM size < 500KB gzipped for hello world\n- No console errors in browser\n\n# Dependencies\n- trunk CLI installed (cargo install trunk)\n- wasm-bindgen-cli installed\n- Previous bead: src-3s0.2","status":"open","priority":1,"issue_type":"feature","estimated_minutes":15,"created_at":"2026-02-01T14:26:29.786455991Z","created_by":"lewis","updated_at":"2026-02-01T14:26:29.786455991Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-3s0.3","depends_on_id":"src-3s0","type":"parent-child","created_at":"2026-02-01T14:26:29.786455991Z","created_by":"lewis"}]}
{"id":"src-3s0.4","title":"Create main App component with functional patterns","description":"Implement root Leptos App component using functional Rust patterns and zero-unwrap rules.\n\n# Architecture\n- app.rs module with App component\n- Functional error handling (Result<_, LeptosError>)\n- Component composition pattern\n- Props with proper validation\n- Zero unwraps, zero panics\n\n# Files to Create\n- crates/oya-ui/src/app.rs (main App component)\n- crates/oya-ui/src/components/mod.rs (component registry)\n- crates/oya-ui/src/error.rs (LeptosError type)\n- Update src/lib.rs (export App)\n\n# Success Criteria\n- App component renders without errors\n- No unwrap() or expect() calls\n- All errors use Result<T, LeptosError>\n- Props validation with proper error messages\n- moon run :quick passes\n- Browser console shows no errors\n\n# Dependencies\n- Previous bead: src-3s0.3\n- Follows CLAUDE.md code quality rules","status":"open","priority":1,"issue_type":"feature","estimated_minutes":20,"created_at":"2026-02-01T14:26:39.429293942Z","created_by":"lewis","updated_at":"2026-02-01T14:26:39.429293942Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-3s0.4","depends_on_id":"src-3s0","type":"parent-child","created_at":"2026-02-01T14:26:39.429293942Z","created_by":"lewis"}]}
{"id":"src-3s0.5","title":"Setup Leptos router with CSR navigation","description":"Configure leptos_router for client-side navigation with route guards and error boundaries.\n\n# Architecture\n- leptos_router 0.7 dependency\n- Route definitions (/, /tasks, /task/:slug)\n- Navigation components (NavBar, Link)\n- Route guards for validation\n- Error boundaries for 404/errors\n\n# Files to Create\n- crates/oya-ui/src/router.rs (route definitions)\n- crates/oya-ui/src/components/nav.rs (NavBar component)\n- crates/oya-ui/src/pages/mod.rs (page components registry)\n- crates/oya-ui/src/pages/home.rs (home page)\n- crates/oya-ui/src/pages/not_found.rs (404 page)\n- Update Cargo.toml (leptos_router dep)\n\n# Success Criteria\n- Client-side navigation works without reload\n- Route transitions are instant\n- 404 page renders for invalid routes\n- NavBar highlights active route\n- Browser history works (back/forward)\n- moon run :quick passes\n\n# Dependencies\n- Previous bead: src-3s0.4\n- leptos_router = 0.7","status":"open","priority":2,"issue_type":"feature","estimated_minutes":20,"created_at":"2026-02-01T14:26:48.498631140Z","created_by":"lewis","updated_at":"2026-02-01T14:26:48.498631140Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-3s0.5","depends_on_id":"src-3s0","type":"parent-child","created_at":"2026-02-01T14:26:48.498631140Z","created_by":"lewis"}]}
{"id":"src-3s0.6","title":"Create reactive state management with Leptos signals","description":"Implement reactive state management using Leptos signals, memos, and effects with functional patterns.\n\n# Architecture\n- Global state with create_rw_signal\n- Derived state with create_memo\n- Side effects with create_effect\n- LocalStorage persistence\n- Zero unwraps, functional error handling\n\n# Files to Create\n- crates/oya-ui/src/state/mod.rs (state management)\n- crates/oya-ui/src/state/task_state.rs (task state signals)\n- crates/oya-ui/src/state/persistence.rs (localStorage wrapper)\n- crates/oya-ui/src/hooks/mod.rs (custom hooks)\n- crates/oya-ui/src/hooks/use_tasks.rs (task management hook)\n\n# Success Criteria\n- Reactive updates work across components\n- State persists to localStorage\n- Memos prevent unnecessary recomputation\n- Effects cleanup properly on unmount\n- No unwrap() or expect() calls\n- moon run :quick passes\n- State updates trigger minimal re-renders\n\n# Dependencies\n- Previous bead: src-3s0.5\n- gloo-storage for localStorage (WASM-compatible)","status":"open","priority":2,"issue_type":"feature","estimated_minutes":25,"created_at":"2026-02-01T14:26:57.422015236Z","created_by":"lewis","updated_at":"2026-02-01T14:26:57.422015236Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"src-3s0.6","depends_on_id":"src-3s0","type":"parent-child","created_at":"2026-02-01T14:26:57.422015236Z","created_by":"lewis"}]}
{"id":"src-3s8a","title":"chaos: Kill tier-1 supervisors sequentially test","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-8vwtnpnx.cue implementation.cue\n# Schema location: /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-8vwtnpnx.cue\n\n\n#EnhancedBead: {\n  id: \"intent-cli-20260201085944-8vwtnpnx\"\n  title: \"chaos: Kill tier-1 supervisors sequentially test\"\n  type: \"feature\"\n  priority: 1\n  effort_estimate: \"30min\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL recover from all chaos scenarios\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN actor killed\\\", shall: \\\"THE SYSTEM SHALL restart via supervision\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF recovery fails\\\", shall_not: \\\"THE SYSTEM SHALL NOT lose data\\\", because: \\\"supervision guarantees recovery\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Full supervision tree implemented\\\",\n        \\\"All actors operational\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"100% recovery rate achieved\\\",\n        \\\"Performance targets met\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"System remains operational during chaos\\\",\n      \\\"No data loss during failures\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write chaos test scenarios\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement chaos: Kill tier-1 supervisors sequentially test with metrics collection\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/intent-cli-20260201085944-8vwtnpnx/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:59:47.065627276Z","created_by":"lewis","updated_at":"2026-02-01T14:59:47.065627276Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-3sn","title":"ui-timeline: Implement chronological event history list","description":"Build scrollable event list component (newest first). Show event type icons, timestamps (relative: '2m ago'), event details. Click to expand full details. Auto-scroll to latest on new event. Files: crates/oya-ui/src/components/timeline/event_list.rs. Tests: events render, scroll works, auto-scroll, expand/collapse. Effort: 1hr. Parent: src-30m","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:02:22.032313694Z","created_by":"lewis","updated_at":"2026-02-01T14:02:22.032313694Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-3uc","title":"ui-timeline: Implement responsive layout with Tailwind CSS","description":"Apply responsive layout to timeline: side-by-side with DAG on 1280px+, stacked on smaller screens. Use Tailwind CSS utility classes. Ensure timeline scrolls independently from DAG. Files: crates/oya-ui/src/components/timeline.rs, styles.css. Tests: layout responsive, scroll independent. Effort: 45min. Parent: src-30m","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-01T14:02:22.751774606Z","created_by":"lewis","updated_at":"2026-02-01T14:02:22.751774606Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-3v2","title":"ui-dag: Implement node rendering with state-based colors","description":"Render bead nodes as circles/rounded rects with state-based colors: pending=gray, scheduled=yellow, running=blue, completed=green, failed=red, cancelled=orange. Include bead ID label. Handle node selection (highlight border). Files: crates/oya-ui/src/components/dag_viz/node.rs. Tests: all states render correctly, selection works, labels visible. Effort: 1hr. Parent: src-1o6","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:01:42.153472397Z","created_by":"lewis","updated_at":"2026-02-01T14:01:42.153472397Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-3v8g","title":"checkpoint: CheckpointManager: Implement checkpoint restoration","description":"# Architecture\nLoad checkpoint from SurrealDB, decompress, and deserialize to restore exact state.\n\n# Files\n- crates/workflow/src/checkpoint/restore.rs - Checkpoint restoration\n\n# Success Criteria\n- restore_checkpoint<T: DeserializeOwned>(id: CheckpointId) -> Result<T, RestoreError>\n- Pipeline: load from DB → zstd decompress → bincode deserialize\n- Validate version header matches\n\n# Quality Standards\n- Zero unwraps, zero panics\n- Railway-Oriented Programming: load.and_then(decompress).and_then(deserialize)\n- Version mismatch returns error (not panic)","status":"open","priority":1,"issue_type":"feature","estimated_minutes":30,"created_at":"2026-02-01T14:47:21.986822730Z","created_by":"lewis","updated_at":"2026-02-01T14:47:21.986822730Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-3w0","title":"ui-http: Implement HTTP client for REST API calls","description":"Setup reqwasm or gloo-net HTTP client for REST API calls from WASM. Implement wrapper functions for: POST /api/workflows, GET /api/beads/:id, POST /api/beads/:id/cancel. Handle CORS, timeouts, errors. Files: crates/oya-ui/src/api/client.rs, crates/oya-ui/src/api/types.rs. Tests: API calls work from WASM, errors handled. Effort: 1hr. Parent: src-3s0","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:01:17.413558928Z","created_by":"lewis","updated_at":"2026-02-01T14:01:17.413558928Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-41i","title":"event-sourcing: SurrealDB Schema: Define isolation tables","description":"# Architecture\nDefine workspace and schedule tables for workspace isolation (zjj integration) and scheduled execution (cron-like).\n\n# Files\n- schema.surql - Isolation table definitions\n- crates/workflow/src/schema/isolation.rs - Rust type mappings\n\n# Success Criteria\n- Workspace table maps to zjj sessions (workspace_path, branch, status)\n- Schedule table for deferred execution (cron_expr, next_run, last_run)\n- Unique constraints on workspace paths\n\n# Quality Standards\n- Zero unwraps, zero panics\n- Railway-Oriented Programming","status":"open","priority":1,"issue_type":"feature","estimated_minutes":15,"created_at":"2026-02-01T14:45:15.170712727Z","created_by":"lewis","updated_at":"2026-02-01T14:45:15.170712727Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-560","title":"ui-tauri: Integration tests for Tauri + Leptos setup","description":"Integration tests: Tauri app launches, Leptos WASM loads, HTTP client connects to backend, WebSocket connects, window responds to events. Use tauri-driver for UI automation. Files: crates/oya-ui/tests/integration_test.rs. Effort: 1hr. Parent: src-3s0","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-01T14:01:17.889564046Z","created_by":"lewis","updated_at":"2026-02-01T14:01:17.889564046Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-5v0","title":"[nuoc] job-resume causes double state transition","status":"closed","priority":1,"issue_type":"bug","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T04:39:08.606892354Z","created_by":"Lewis Prior","updated_at":"2026-02-01T06:34:54.694676461Z","closed_at":"2026-02-01T06:34:54.694667261Z","close_reason":"Not relevant to OYA Rust project - nushell code removed","source_repo":".","compaction_level":0}
{"id":"src-6fc","title":"[nuoc] ctx-basic.nu imports missing ctx.nu file","status":"closed","priority":0,"issue_type":"bug","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T04:39:08.161607739Z","created_by":"Lewis Prior","updated_at":"2026-02-01T06:34:54.581247240Z","closed_at":"2026-02-01T06:34:54.581233861Z","close_reason":"Not relevant to OYA Rust project - nushell code removed","source_repo":".","compaction_level":0}
{"id":"src-71u","title":"idempotency: UUID v5: Implement SHA-256 input hashing","description":"Implement SHA-256 hashing of structured inputs for UUID v5 generation.\n\n## Success Criteria\n- Hash structured input data (bead metadata, operation context) with SHA-256\n- Produce deterministic hash from serialized input\n- Return Result<[u8; 32], Error> with proper error handling\n- Zero unwraps, zero panics\n- Railway-Oriented Programming patterns\n\n## Implementation Details\n- File: crates/workflow/src/idempotent/keys.rs\n- Use sha2 crate for SHA-256 hashing\n- Serialize input data consistently (JSON/bincode/etc.)\n- Handle serialization errors with proper error types\n\n## Validation\n- Same input data always produces same hash\n- Different inputs produce different hashes\n- Hash output is exactly 32 bytes\n- Serialization errors are properly propagated","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:38:04.983934810Z","created_by":"lewis","updated_at":"2026-02-01T14:38:04.983934810Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-767","title":"[nuoc] virtual_object_state table never initialized","status":"closed","priority":0,"issue_type":"bug","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T04:39:08.224208358Z","created_by":"Lewis Prior","updated_at":"2026-02-01T06:34:54.600716686Z","closed_at":"2026-02-01T06:34:54.600705876Z","close_reason":"Not relevant to OYA Rust project - nushell code removed","source_repo":".","compaction_level":0}
{"id":"src-88o","title":"idempotency: IdempotentExecutor: Implement cache-first lookup","description":"# Architecture\nImplement fast-path cache lookup with read lock before checking database.\n\n# Files\n- crates/workflow/src/idempotent/lookup.rs - Cache-first lookup\n\n# Success Criteria\n- check_cache(key: Uuid) -> Option<CachedResult> with read lock\n- Return cached result immediately (cache hit)\n- Fall through to DB on cache miss\n\n# Quality Standards\n- Zero unwraps, zero panics\n- Railway-Oriented Programming: cache.or_else(db_lookup)\n- Minimize lock hold time (release before DB query)","status":"open","priority":1,"issue_type":"feature","estimated_minutes":30,"created_at":"2026-02-01T14:46:54.252903838Z","created_by":"lewis","updated_at":"2026-02-01T14:46:54.252903838Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-8fb","title":"[test] State - workspace creation failure","description":"Red Queen test: Simulate workspace creation failure by making the workspaces directory read-only before spawn attempts to create workspace. Expected behavior: Cleanup_and_rollback_state function handles partial state, workspace is removed, bead status rolls back to 'open'.","acceptance_criteria":"- Workspace is cleaned up\n- Bead status is reset to 'open'\n- Recovery log records the failure\n- No orphaned directories remain","status":"open","priority":2,"issue_type":"bug","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T14:45:36.180297708Z","created_by":"Lewis Prior","updated_at":"2026-01-30T14:45:36.180297708Z","source_repo":".","compaction_level":0}
{"id":"src-8uf","title":"Create GritQL pattern utilities","description":"Pattern parsing, validation, command builders. Files: pkg/gritql/*.go","status":"closed","priority":2,"issue_type":"task","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T05:01:15.370740530Z","created_by":"Lewis Prior","updated_at":"2026-01-30T05:05:26.943888489Z","closed_at":"2026-01-30T05:05:26.943888489Z","close_reason":"Closed","source_repo":".","compaction_level":0}
{"id":"src-9bu","title":"event-sourcing: DurableEventStore: Implement event append with fsync","description":"# Architecture\nImplement append_event() that serializes event, writes to state_transition table, and fsyncs before returning.\n\n# Files\n- crates/events/src/durable_store.rs - DurableEventStore::append_event()\n\n# Success Criteria\n- append_event(event: Event) -> Result<EventId, AppendError>\n- Fsync completes before success returned (sync_mode='full' guarantees)\n- EventId generated as UUID v7 (time-ordered)\n\n# Quality Standards\n- Zero unwraps, zero panics\n- Railway-Oriented Programming: serialize.and_then(insert).and_then(fsync)\n- All errors use thiserror (SerializeError, DbError, FsyncError)","status":"open","priority":1,"issue_type":"feature","estimated_minutes":30,"created_at":"2026-02-01T14:45:46.737943136Z","created_by":"lewis","updated_at":"2026-02-01T14:45:46.737943136Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-9fv","title":"idempotency: UUID v5: Implement deterministic key generation","description":"# Architecture\nCombine namespace + input hash to generate deterministic UUID v5 idempotency key.\n\n# Files\n- crates/workflow/src/idempotent/keys.rs - Key generation\n\n# Success Criteria\n- generate_key(bead_id: &str, input: &impl Serialize) -> Result<Uuid, KeyError>\n- Deterministic: same bead_id + same input = same UUID\n- Use UUID v5: Uuid::new_v5(namespace, hash)\n\n# Quality Standards\n- Zero unwraps, zero panics\n- Railway-Oriented Programming: namespace.and_then(hash).map(uuid_v5)\n- All errors use thiserror","status":"open","priority":1,"issue_type":"feature","estimated_minutes":30,"created_at":"2026-02-01T14:46:28.219411395Z","created_by":"lewis","updated_at":"2026-02-01T14:46:28.219411395Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-9h0","title":"[Red Queen] MAJOR: transition-backing-off: echo fail","status":"closed","priority":1,"issue_type":"bug","owner":"priorlewis43@gmail.com","created_at":"2026-01-29T13:11:03.947630504Z","created_by":"Lewis Prior","updated_at":"2026-01-30T04:11:40.191328790Z","closed_at":"2026-01-30T04:11:40.191328790Z","close_reason":"Tests are false positives: P0 test passes (exit 0), P1 tests use 'echo fail' which always succeeds","source_repo":".","compaction_level":0}
{"id":"src-9j3l","title":"queue-actors: Implement PriorityQueue handlers (Enqueue, Dequeue, Peek, Length)","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-mulqd1nt.cue implementation.cue\n# Schema location: /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-mulqd1nt.cue\n\n\n#EnhancedBead: {\n  id: \"intent-cli-20260201085944-mulqd1nt\"\n  title: \"queue-actors: Implement PriorityQueue handlers (Enqueue, Dequeue, Peek, Length)\"\n  type: \"feature\"\n  priority: 2\n  effort_estimate: \"30min\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL implement queue actors\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN Enqueue received\\\", shall: \\\"THE SYSTEM SHALL add item to queue\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF queue full\\\", shall_not: \\\"THE SYSTEM SHALL NOT drop items\\\", because: \\\"bounded queues must reject\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"ractor Actor trait understood\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"Queue operations implemented\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"Queue ordering maintained\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write queue tests\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement queue-actors: Implement PriorityQueue handlers (Enqueue, Dequeue, Peek, Length)\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/intent-cli-20260201085944-mulqd1nt/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-01T14:59:45.637294300Z","created_by":"lewis","updated_at":"2026-02-01T14:59:45.637294300Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-bp4u","title":"chaos: Restart latency performance test (p99 <1s)","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-nhthvhf5.cue implementation.cue\n# Schema location: /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-nhthvhf5.cue\n\n\n#EnhancedBead: {\n  id: \"intent-cli-20260201085944-nhthvhf5\"\n  title: \"chaos: Restart latency performance test (p99 <1s)\"\n  type: \"feature\"\n  priority: 1\n  effort_estimate: \"30min\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL recover from all chaos scenarios\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN actor killed\\\", shall: \\\"THE SYSTEM SHALL restart via supervision\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF recovery fails\\\", shall_not: \\\"THE SYSTEM SHALL NOT lose data\\\", because: \\\"supervision guarantees recovery\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Full supervision tree implemented\\\",\n        \\\"All actors operational\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"100% recovery rate achieved\\\",\n        \\\"Performance targets met\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"System remains operational during chaos\\\",\n      \\\"No data loss during failures\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write chaos test scenarios\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement chaos: Restart latency performance test (p99 <1s) with metrics collection\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/intent-cli-20260201085944-nhthvhf5/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:59:47.378074370Z","created_by":"lewis","updated_at":"2026-02-01T14:59:47.378074370Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-c16","title":"[nuoc] Task failure bypasses job backing-off state","status":"closed","priority":1,"issue_type":"bug","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T04:39:08.374464326Z","created_by":"Lewis Prior","updated_at":"2026-02-01T06:34:54.635969758Z","closed_at":"2026-02-01T06:34:54.635961358Z","close_reason":"Not relevant to OYA Rust project - nushell code removed","source_repo":".","compaction_level":0}
{"id":"src-c1j","title":"Initialize Go module and project structure","description":"Create go.mod, .gitignore, directory structure for vertical slices","status":"closed","priority":0,"issue_type":"task","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T05:01:11.479470928Z","created_by":"Lewis Prior","updated_at":"2026-01-30T05:03:14.466765988Z","closed_at":"2026-01-30T05:03:14.466765988Z","close_reason":"Project structure, Makefile, and linter config created","source_repo":".","compaction_level":0}
{"id":"src-ccx","title":"Implement CommandExecutor interface","description":"Core platform layer for executing external commands (grit, turbolift). File: internal/platform/executor/executor.go","status":"closed","priority":1,"issue_type":"task","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T05:01:13.684137443Z","created_by":"Lewis Prior","updated_at":"2026-01-30T05:04:39.921895594Z","closed_at":"2026-01-30T05:04:39.921895594Z","close_reason":"CommandExecutor and binary detector implemented","source_repo":".","compaction_level":0}
{"id":"src-ct8","title":"[test] Recovery log format","description":"Red Queen test: Trigger multiple spawn failures to verify recovery log format. Expected behavior: Each failure creates a timestamped entry in .zjj/recovery.log with bead ID and reason. Verify log entries have RFC3339 timestamps and structured messages.","acceptance_criteria":"- Multiple entries in .zjj/recovery.log\n- Each entry has RFC3339 timestamp\n- Entries include bead ID and failure reason","status":"open","priority":2,"issue_type":"bug","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T14:45:48.234791638Z","created_by":"Lewis Prior","updated_at":"2026-01-30T14:45:48.234791638Z","source_repo":".","compaction_level":0}
{"id":"src-cv7","title":"[test] Cross-command - rollback consistency","description":"Red Queen test: Test rollback logic consistency across different failure scenarios. Verify that cleanup_and_rollback_state correctly handles workspace cleanup and bead status reset regardless of where the failure occurs in the spawn workflow.","acceptance_criteria":"- Rollback behavior is consistent\n- Workspace is cleaned in all failure scenarios\n- Bead status is reset to 'open'\n- Recovery log entries are created appropriately","status":"open","priority":2,"issue_type":"bug","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T14:45:59.105148925Z","created_by":"Lewis Prior","updated_at":"2026-01-30T14:45:59.105148925Z","source_repo":".","compaction_level":0}
{"id":"src-d02f","title":"replay: EventSourcingReplay: Implement state application logic","description":"# Architecture\nApply events to state in order, updating state deterministically.\n\n# Files\n- crates/events/src/replay/apply.rs - State application\n\n# Success Criteria\n- apply_event(state: &mut State, event: Event) -> Result<(), ApplyError>\n- Deterministic: same events in same order = same state\n- Validate event ordering (reject out-of-order events)\n\n# Quality Standards\n- Zero unwraps, zero panics\n- Railway-Oriented Programming for event application\n- Immutable state transitions (return new state, not mutate)","status":"open","priority":1,"issue_type":"feature","estimated_minutes":30,"created_at":"2026-02-01T14:47:49.122884712Z","created_by":"lewis","updated_at":"2026-02-01T14:47:49.122884712Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-d5s","title":"[code] Fix const function .clone() error in revert/types.rs","description":"Pre-existing compilation error in revert/types.rs:27:45 - cannot call non-const method .clone() in constant functions","acceptance_criteria":"1. Build succeeds with zero errors","status":"open","priority":2,"issue_type":"bug","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T16:21:35.142965716Z","created_by":"Lewis Prior","updated_at":"2026-01-30T16:21:35.142965716Z","source_repo":".","compaction_level":0,"labels":["severity:important","smell:code"]}
{"id":"src-d8g","title":"[Red Queen] MAJOR: transition-suspended: echo fail","status":"closed","priority":1,"issue_type":"bug","owner":"priorlewis43@gmail.com","created_at":"2026-01-29T13:11:03.824021470Z","created_by":"Lewis Prior","updated_at":"2026-01-30T04:11:40.191916148Z","closed_at":"2026-01-30T04:11:40.191916148Z","close_reason":"Tests are false positives: P0 test passes (exit 0), P1 tests use 'echo fail' which always succeeds","source_repo":".","compaction_level":0}
{"id":"src-def","title":"Create Turbolift campaign utilities","description":"Campaign management, repo loading, command builders. Files: pkg/turbolift/*.go","status":"closed","priority":2,"issue_type":"task","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T05:01:16.250012853Z","created_by":"Lewis Prior","updated_at":"2026-01-30T05:05:28.684019971Z","closed_at":"2026-01-30T05:05:28.684019971Z","close_reason":"Closed","source_repo":".","compaction_level":0}
{"id":"src-drp","title":"ui-timeline: Timeline component integration tests","description":"Integration tests for timeline: render phases, show events, control buttons work (cancel/retry/logs), errors display, layout responsive, real-time updates from WebSocket. Files: crates/oya-ui/tests/timeline_test.rs. Effort: 1hr. Parent: src-30m","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-01T14:02:22.994108623Z","created_by":"lewis","updated_at":"2026-02-01T14:02:22.994108623Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-ds1","title":"[test] State - bead database corruption","description":"Red Queen test: Corrupt the .beads/issues.jsonl file with invalid JSON during spawn's bead status update phase. Expected behavior: Error handling catches database error, triggers rollback logic, workspace is cleaned.","acceptance_criteria":"- Database error is properly caught\n- Rollback logic is triggered\n- Workspace is cleaned\n- Recovery log records the error","status":"open","priority":2,"issue_type":"bug","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T14:45:41.500946969Z","created_by":"Lewis Prior","updated_at":"2026-01-30T14:45:41.500946969Z","source_repo":".","compaction_level":0}
{"id":"src-e54b","title":"supervision: Implement exponential backoff for repeated failures","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085547-ugyhzswj.cue implementation.cue\n# Schema location: /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085547-ugyhzswj.cue\n\n\n#EnhancedBead: {\n  id: \"intent-cli-20260201085547-ugyhzswj\"\n  title: \"supervision: Implement exponential backoff for repeated failures\"\n  type: \"feature\"\n  priority: 1\n  effort_estimate: \"30min\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL use exponential backoff for restarts\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN actor crashes repeatedly\\\", shall: \\\"THE SYSTEM SHALL increase restart delay exponentially\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF restart delay exceeds max backoff\\\", shall_not: \\\"THE SYSTEM SHALL NOT stop retrying\\\", because: \\\"permanent recovery needed\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"one_for_one strategy implemented\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"Exponential backoff implemented\\\",\n        \\\"Max backoff capped at 3200ms\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"Backoff never exceeds max (3200ms)\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write tests\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement supervision: Implement exponential backoff for repeated failures\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/intent-cli-20260201085547-ugyhzswj/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:56:30.293858775Z","created_by":"lewis","updated_at":"2026-02-01T14:56:30.293858775Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-ec9","title":"Configure golangci-lint with funlen=40","description":"Create .golangci.yml with comprehensive linters and 40-line function limit","status":"closed","priority":0,"issue_type":"task","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T05:01:12.946509175Z","created_by":"Lewis Prior","updated_at":"2026-01-30T05:03:14.469248660Z","closed_at":"2026-01-30T05:03:14.469248660Z","close_reason":"Project structure, Makefile, and linter config created","source_repo":".","compaction_level":0}
{"id":"src-ghl","title":"Test bead for spawn verification","status":"open","priority":4,"issue_type":"task","created_at":"2026-02-01T07:38:22.626549646Z","created_by":"lewis","updated_at":"2026-02-01T07:38:22.626549646Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-ho4g","title":"rate-limiter: Implement 1s refill timer with tokio interval","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-xnwsxeka.cue implementation.cue\n# Schema location: /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-xnwsxeka.cue\n\n\n#EnhancedBead: {\n  id: \"intent-cli-20260201085944-xnwsxeka\"\n  title: \"rate-limiter: Implement 1s refill timer with tokio interval\"\n  type: \"feature\"\n  priority: 2\n  effort_estimate: \"30min\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL implement token bucket rate limiting\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN refill timer fires\\\", shall: \\\"THE SYSTEM SHALL add tokens up to capacity\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF token count exceeds capacity\\\", shall_not: \\\"THE SYSTEM SHALL NOT overflow bucket\\\", because: \\\"capacity is hard limit\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"ractor Actor trait understood\\\",\n        \\\"tokio runtime available\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"Token bucket implemented\\\",\n        \\\"Refill timer running\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"Token count never exceeds capacity\\\",\n      \\\"Token count never negative\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write rate limiter tests\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement rate-limiter: Implement 1s refill timer with tokio interval\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/intent-cli-20260201085944-xnwsxeka/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-01T14:59:46.032409302Z","created_by":"lewis","updated_at":"2026-02-01T14:59:46.032409302Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-hrzw","title":"replay: EventSourcingReplay: Implement checkpoint-based resume","description":"# Architecture\nResume replay from last checkpoint instead of replaying all events from beginning.\n\n# Files\n- crates/events/src/replay/resume.rs - Checkpoint-based resume\n\n# Success Criteria\n- resume_from_checkpoint(checkpoint_id: CheckpointId) -> Result<ReplayState, ResumeError>\n- Load checkpoint state, then replay only events after checkpoint timestamp\n- Optimization: replay 1000 events in <5s even with checkpoint\n\n# Quality Standards\n- Zero unwraps, zero panics\n- Railway-Oriented Programming: restore_checkpoint.and_then(load_events_after)\n- Validate checkpoint timestamp matches event log","status":"open","priority":1,"issue_type":"feature","estimated_minutes":30,"created_at":"2026-02-01T14:47:49.202460583Z","created_by":"lewis","updated_at":"2026-02-01T14:47:49.202460583Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-i9m","title":"Create example patterns and integration tests","description":"Add .grit/patterns/ examples and end-to-end tests","status":"closed","priority":3,"issue_type":"task","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T05:01:19.736920580Z","created_by":"Lewis Prior","updated_at":"2026-01-30T05:46:04.460274099Z","closed_at":"2026-01-30T05:46:04.460274099Z","close_reason":"Created 7 production-ready GritQL patterns with comprehensive documentation, integration tests, examples, and validation script","source_repo":".","compaction_level":0}
{"id":"src-jh0","title":"Create GoFR main entry point","description":"Wire up all features with GoFR framework. File: cmd/gofr-migrate/main.go","status":"closed","priority":3,"issue_type":"task","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T05:01:18.267936461Z","created_by":"Lewis Prior","updated_at":"2026-01-30T05:09:28.518276575Z","closed_at":"2026-01-30T05:09:28.518276575Z","close_reason":"Main application entry point created and building successfully","source_repo":".","compaction_level":0}
{"id":"src-k6go","title":"storage-actors: Define EventStoreActor message protocol","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085547-w7mfcpnj.cue implementation.cue\n# Schema location: /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085547-w7mfcpnj.cue\n\n\n#EnhancedBead: {\n  id: \"intent-cli-20260201085547-w7mfcpnj\"\n  title: \"storage-actors: Define EventStoreActor message protocol\"\n  type: \"feature\"\n  priority: 1\n  effort_estimate: \"30min\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL define EventStoreActor message protocol\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN AppendEvent received\\\", shall: \\\"THE SYSTEM SHALL append to DurableEventStore\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF event serialization fails\\\", shall_not: \\\"THE SYSTEM SHALL NOT acknowledge append\\\", because: \\\"zero data loss\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"DurableEventStore from Stream A available\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"Message types defined\\\",\n        \\\"Bincode serialization configured\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"All events use bincode encoding\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Define message enums\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Add bincode derives\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/intent-cli-20260201085547-w7mfcpnj/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:56:30.713623140Z","created_by":"lewis","updated_at":"2026-02-01T14:56:30.713623140Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-k6n6","title":"integration: Event Sourcing: End-to-end append and replay test","description":"# Architecture\nFull pipeline test: append events → checkpoint → replay from checkpoint → verify final state.\n\n# Files\n- tests/integration/event_sourcing_e2e.rs - E2E integration test\n\n# Success Criteria\n- Append 1000 events to DurableEventStore\n- Create checkpoint at event 500\n- Replay from checkpoint and verify all 1000 events processed\n- Final state matches expected (deterministic)\n\n# Quality Standards\n- Zero unwraps in tests\n- Fresh SurrealDB instance per test run\n- Test completes in <10s (5s for replay)","status":"open","priority":1,"issue_type":"feature","estimated_minutes":30,"created_at":"2026-02-01T14:48:13.506892832Z","created_by":"lewis","updated_at":"2026-02-01T14:48:13.506892832Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-l7z","title":"Verify OYA naming convention across entire codebase - hostile sweep for any remaining 'factory' references","description":"Completed hostile verification and renaming of entire codebase from 'factory' to 'oya'. Changes: 1) Renamed crates/factory to crates/pipeline and oya-factory to oya-pipeline 2) Updated all Cargo.toml references 3) Fixed all source code imports 4) Renamed .factory directory to .oya 5) Updated environment variable FACTORY_ACTOR to OYA_ACTOR 6) Fixed all documentation files 7) Created hostile verification script at scripts/verify-oya-naming.sh 8) Verification passes: no 'factory' references found in codebase (excluding vendor/node_modules)","status":"closed","priority":2,"issue_type":"task","owner":"priorlewis43@gmail.com","created_at":"2026-02-01T06:03:45.860497772Z","created_by":"Lewis Prior","updated_at":"2026-02-01T06:12:28.836937767Z","closed_at":"2026-02-01T06:12:24.196320047Z","source_repo":".","compaction_level":0}
{"id":"src-l96a","title":"supervision: Integration tests for supervision tree startup","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085547-iteihoej.cue implementation.cue\n# Schema location: /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085547-iteihoej.cue\n\n\n#EnhancedBead: {\n  id: \"intent-cli-20260201085547-iteihoej\"\n  title: \"supervision: Integration tests for supervision tree startup\"\n  type: \"feature\"\n  priority: 1\n  effort_estimate: \"30min\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL test full supervision tree startup\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN running supervision integration test\\\", shall: \\\"THE SYSTEM SHALL verify all actors started\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF test uses unwrap\\\", shall_not: \\\"THE SYSTEM SHALL NOT panic in tests\\\", because: \\\"tests must use Result for errors\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"All 4 tier-1 supervisors implemented\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"Integration test passes\\\",\n        \\\"All supervision relationships verified\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"Tests never use unwrap or expect\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write tests\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement supervision: Integration tests for supervision tree startup\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/intent-cli-20260201085547-iteihoej/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:56:30.462254441Z","created_by":"lewis","updated_at":"2026-02-01T14:56:30.462254441Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-lbf","title":"event-sourcing: DurableEventStore: Implement SurrealDB kv-rocksdb connection","description":"# Architecture\nImplement SurrealDB connection pool with kv-rocksdb backend and sync_mode='full' configuration.\n\n# Files\n- crates/events/src/durable_store/connection.rs - Connection pool management\n- crates/events/src/durable_store/config.rs - SurrealDB configuration\n\n# Success Criteria\n- Connection pool with max_connections=10\n- kv-rocksdb backend with sync_mode='full' for fsync\n- Connection retry logic with exponential backoff\n\n# Quality Standards\n- Zero unwraps, zero panics\n- Railway-Oriented Programming for connection errors\n- All database errors propagate via Result<T, DbError>","status":"open","priority":1,"issue_type":"feature","estimated_minutes":30,"created_at":"2026-02-01T14:45:46.674906380Z","created_by":"lewis","updated_at":"2026-02-01T14:45:46.674906380Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-mjy","title":"ui-timeline: Implement error visualization with stack traces","description":"Build error display component for failed beads. Show error message, stack trace (formatted), timestamp. Copy-to-clipboard button. Expandable details. Files: crates/oya-ui/src/components/timeline/error_viz.rs. Tests: errors render, stack trace formatted, copy works, expand/collapse. Effort: 1hr. Parent: src-30m","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-01T14:02:22.510827242Z","created_by":"lewis","updated_at":"2026-02-01T14:02:22.510827242Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-mllk","title":"worker-actor: Unit tests for bead worker with tokio-test","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-1qhiyrfz.cue implementation.cue\n# Schema location: /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-1qhiyrfz.cue\n\n\n#EnhancedBead: {\n  id: \"intent-cli-20260201085944-1qhiyrfz\"\n  title: \"worker-actor: Unit tests for bead worker with tokio-test\"\n  type: \"feature\"\n  priority: 1\n  effort_estimate: \"30min\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL test all bead worker operations\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN running worker tests\\\", shall: \\\"THE SYSTEM SHALL verify all state transitions\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF test uses unwrap\\\", shall_not: \\\"THE SYSTEM SHALL NOT panic in tests\\\", because: \\\"tests must use Result\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Storage actors implemented\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"BeadWorker operations complete\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"State machine invariants maintained\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write tests\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement worker-actor: Unit tests for bead worker with tokio-test\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/intent-cli-20260201085944-1qhiyrfz/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:59:45.253748425Z","created_by":"lewis","updated_at":"2026-02-01T14:59:45.253748425Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-mzg","title":"idempotency: UUID v5: Implement namespace generation from bead_id","description":"Implement namespace generation for UUID v5 using bead_id as the basis.\n\n## Success Criteria\n- Generate deterministic UUID v5 namespace from bead_id string\n- Use proper UUID v5 namespace DNS or custom namespace\n- Return Result<Uuid, Error> with proper error handling\n- Zero unwraps, zero panics\n- Railway-Oriented Programming patterns\n\n## Implementation Details\n- File: crates/workflow/src/idempotent/keys.rs\n- Use uuid crate's uuid::Uuid::NAMESPACE_DNS or custom namespace\n- Convert bead_id string to namespace UUID deterministically\n- Handle invalid inputs with proper error types\n\n## Validation\n- Same bead_id always produces same namespace UUID\n- Different bead_ids produce different namespaces\n- Invalid bead_ids return proper errors","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:37:59.634949626Z","created_by":"lewis","updated_at":"2026-02-01T14:37:59.634949626Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-owh","title":"idempotency: UUID v5: Implement SHA-256 input hashing","description":"# Architecture\nHash arbitrary input data using SHA-256 for deterministic UUID v5 key generation.\n\n# Files\n- crates/workflow/src/idempotent/hash.rs - Input hashing\n\n# Success Criteria\n- hash_input(data: &[u8]) -> [u8; 32] (SHA-256 hash)\n- Support serializable inputs via bincode\n- Same input data produces same hash\n\n# Quality Standards\n- Zero unwraps, zero panics\n- Use sha2 crate for hashing\n- Bincode serialization for structured inputs","status":"open","priority":1,"issue_type":"feature","estimated_minutes":15,"created_at":"2026-02-01T14:46:28.153955888Z","created_by":"lewis","updated_at":"2026-02-01T14:46:28.153955888Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-p2g3","title":"worker-actor: Error handling and retry logic with exponential backoff","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-odz0tqaz.cue implementation.cue\n# Schema location: /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-odz0tqaz.cue\n\n\n#EnhancedBead: {\n  id: \"intent-cli-20260201085944-odz0tqaz\"\n  title: \"worker-actor: Error handling and retry logic with exponential backoff\"\n  type: \"feature\"\n  priority: 1\n  effort_estimate: \"30min\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL retry transient bead failures\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN bead execution fails\\\", shall: \\\"THE SYSTEM SHALL retry with exponential backoff\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF max retries exceeded\\\", shall_not: \\\"THE SYSTEM SHALL NOT retry indefinitely\\\", because: \\\"prevent infinite retry loops\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Storage actors implemented\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"BeadWorker operations complete\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"State machine invariants maintained\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write tests\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement worker-actor: Error handling and retry logic with exponential backoff\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/intent-cli-20260201085944-odz0tqaz/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:59:45.158326743Z","created_by":"lewis","updated_at":"2026-02-01T14:59:45.158326743Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-p859","title":"reconciler: Implement 1s reconciliation loop with tokio interval","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-fuhbvwst.cue implementation.cue\n# Schema location: /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-fuhbvwst.cue\n\n\n#EnhancedBead: {\n  id: \"intent-cli-20260201085944-fuhbvwst\"\n  title: \"reconciler: Implement 1s reconciliation loop with tokio interval\"\n  type: \"feature\"\n  priority: 1\n  effort_estimate: \"30min\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL reconcile system state every 1s\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN reconciliation loop runs\\\", shall: \\\"THE SYSTEM SHALL detect anomalies\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF reconciliation fails\\\", shall_not: \\\"THE SYSTEM SHALL NOT stop loop\\\", because: \\\"reconciliation must be permanent\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"BeadWorker actors implemented\\\",\n        \\\"Storage actors available\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"Reconciliation loop running\\\",\n        \\\"Anomalies detected and fixed\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"Loop runs every 1s\\\",\n      \\\"Loop never stops\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write reconciliation tests\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement reconciler: Implement 1s reconciliation loop with tokio interval\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/intent-cli-20260201085944-fuhbvwst/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:59:46.335842885Z","created_by":"lewis","updated_at":"2026-02-01T14:59:46.335842885Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-pmu0","title":"reconciler: Unit tests for reconciliation logic","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-7ufggkjo.cue implementation.cue\n# Schema location: /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-7ufggkjo.cue\n\n\n#EnhancedBead: {\n  id: \"intent-cli-20260201085944-7ufggkjo\"\n  title: \"reconciler: Unit tests for reconciliation logic\"\n  type: \"feature\"\n  priority: 1\n  effort_estimate: \"30min\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL reconcile system state every 1s\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN reconciliation loop runs\\\", shall: \\\"THE SYSTEM SHALL detect anomalies\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF reconciliation fails\\\", shall_not: \\\"THE SYSTEM SHALL NOT stop loop\\\", because: \\\"reconciliation must be permanent\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"BeadWorker actors implemented\\\",\n        \\\"Storage actors available\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"Reconciliation loop running\\\",\n        \\\"Anomalies detected and fixed\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"Loop runs every 1s\\\",\n      \\\"Loop never stops\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write reconciliation tests\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement reconciler: Unit tests for reconciliation logic\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/intent-cli-20260201085944-7ufggkjo/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:59:46.851907381Z","created_by":"lewis","updated_at":"2026-02-01T14:59:46.851907381Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-rf1","title":"[test] Input boundary - missing bead","description":"Red Queen test: Run zjj spawn without a bead ID argument. Expected behavior: Validation error with clear message about missing required argument.","acceptance_criteria":"- Command fails with clear error message\n- Error code is non-zero\n- Error message indicates missing bead_id","status":"open","priority":2,"issue_type":"bug","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T14:45:30.868979493Z","created_by":"Lewis Prior","updated_at":"2026-01-30T14:45:30.868979493Z","source_repo":".","compaction_level":0}
{"id":"src-rrn","title":"event-sourcing: DurableEventStore: Event append with fsync","description":"Implement fsync-backed append operation with durability guarantees.\n\nSuccess criteria:\n- Implement append_event() with fsync after write\n- Ensure durability: no data loss on crash\n- Define AppendError type with thiserror\n- Zero unwraps, zero panics\n- Use and_then/map for functional composition\n\nFiles: crates/events/src/durable_store.rs\n\nEstimated time: 25 minutes","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:37:56.331048869Z","created_by":"lewis","updated_at":"2026-02-01T14:37:56.331048869Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-s2by","title":"integration: Event Sourcing: Performance validation (1000 events <5s)","description":"# Architecture\nPerformance test: validate replay of 1000 events completes in <5s.\n\n# Files\n- tests/integration/performance_test.rs - Performance integration test\n\n# Success Criteria\n- Replay 1000 events from DurableEventStore\n- Measure total time (target: <5s)\n- Fail test if performance regression (>5s)\n\n# Quality Standards\n- Zero unwraps in tests\n- Use tokio::time::Instant for timing\n- Report events/second throughput","status":"open","priority":1,"issue_type":"feature","estimated_minutes":30,"created_at":"2026-02-01T14:48:13.725408070Z","created_by":"lewis","updated_at":"2026-02-01T14:48:13.725408070Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-sjj","title":"[nuoc] ctx-await-awakeable missing job-level suspension","status":"closed","priority":1,"issue_type":"bug","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T04:39:08.455471126Z","created_by":"Lewis Prior","updated_at":"2026-02-01T06:34:54.656629527Z","closed_at":"2026-02-01T06:34:54.656620407Z","close_reason":"Not relevant to OYA Rust project - nushell code removed","source_repo":".","compaction_level":0}
{"id":"src-swf","title":"[test] Doctor detection - incomplete transactions","description":"Red Queen test: Create an expired transaction entry directly in the database to simulate an orphaned agent spawn. Expected behavior: zjj doctor check_incomplete_transactions() detects this as an incomplete transaction with expired timestamp.","acceptance_criteria":"- Doctor detects incomplete transaction\n- Transaction state is identified as 'active' with expired timestamp\n- User is warned about the issue\n- Fix function can clean it up via 'zjj doctor --fix'","status":"open","priority":2,"issue_type":"bug","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T14:45:53.148792594Z","created_by":"Lewis Prior","updated_at":"2026-01-30T14:45:53.148792594Z","source_repo":".","compaction_level":0}
{"id":"src-tis2","title":"checkpoint: CheckpointManager: Implement checkpoint storage to SurrealDB","description":"# Architecture\nStore compressed checkpoints in SurrealDB checkpoint table with metadata (timestamp, version, size).\n\n# Files\n- crates/workflow/src/checkpoint/storage.rs - Checkpoint storage\n\n# Success Criteria\n- store_checkpoint(data: Vec<u8>) -> Result<CheckpointId, StorageError>\n- Store compressed data + metadata (created_at, uncompressed_size, compressed_size)\n- Return CheckpointId (UUID v7 time-ordered)\n\n# Quality Standards\n- Zero unwraps, zero panics\n- Railway-Oriented Programming for storage pipeline\n- Track compression ratio in metadata","status":"open","priority":1,"issue_type":"feature","estimated_minutes":30,"created_at":"2026-02-01T14:47:21.918044431Z","created_by":"lewis","updated_at":"2026-02-01T14:47:21.918044431Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-u53","title":"backend-axum: Implement GET /api/health endpoint","description":"Implement health check endpoint for monitoring. Check: SurrealDB connection (ping query), UniverseSupervisor status (actor count), ProcessPool status (worker count). Return 200 OK with JSON status or 503 Service Unavailable if any component down. Files: crates/oya-web/src/routes/health.rs. Tests: all healthy returns 200, DB down returns 503, actors down returns 503. Effort: 30min. Parent: src-17z","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-01T14:00:35.203110404Z","created_by":"lewis","updated_at":"2026-02-01T14:00:35.203110404Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-u68","title":"Add comprehensive tests with mutation testing","description":"Achieve ≥80% line coverage and ≥80% mutation score for all packages","status":"open","priority":3,"issue_type":"task","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T05:01:18.967184137Z","created_by":"Lewis Prior","updated_at":"2026-01-30T05:01:18.967184137Z","source_repo":".","compaction_level":0}
{"id":"src-u8t","title":"ui-tauri: Integrate Leptos WASM build with Tauri window","description":"Configure Tauri to load Leptos WASM app in desktop window. Setup build script to compile WASM and copy to Tauri assets. Configure CSP to allow WASM. Files: crates/oya-ui/src-tauri/build.rs, crates/oya-ui/index.html. Tests: Tauri window loads Leptos app, hot reload works. Effort: 1hr. Parent: src-3s0","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:01:17.181477657Z","created_by":"lewis","updated_at":"2026-02-01T14:01:17.181477657Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-ufu","title":"event-sourcing: Benchmarks: Batch append benchmark","description":"# Architecture\nBenchmark batch append operations to measure throughput gains vs single append.\n\n# Files\n- benches/batch_append.rs - Batch append benchmark\n\n# Success Criteria\n- Measure append_batch() with varying batch sizes (10, 100, 1000)\n- Compare throughput: single vs batch (expect 10x+ improvement)\n- Measure fsync amortization (1 fsync per batch)\n\n# Quality Standards\n- Test batch sizes: 1, 10, 50, 100, 500, 1000 events\n- Calculate events/second throughput\n- Verify single fsync per batch (not per event)","status":"open","priority":2,"issue_type":"feature","estimated_minutes":30,"created_at":"2026-02-01T14:46:08.334601060Z","created_by":"lewis","updated_at":"2026-02-01T14:46:08.334601060Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-uya","title":"event-sourcing: Benchmark fsync overhead and validate performance","description":"## Overview\nBenchmark fsync write latency to verify 2-3ms overhead is acceptable. Use criterion for statistically significant measurements.\n\n## Benchmark Scenarios\n1. **Append Event with fsync** - Measure p50/p95/p99 latency\n2. **Append Event without fsync** - Baseline comparison\n3. **Batch Append** - Test throughput with multiple events\n4. **Read Events** - Measure query performance\n5. **Replay from Checkpoint** - Measure recovery time\n\n## Performance Targets\n- Event append with fsync: <3ms (p99)\n- Event append without fsync: <0.5ms (p99)\n- Read 1000 events: <50ms\n- Replay 1000 events: <5s\n\n## Files to Create\n- benches/fsync_overhead.rs - Criterion benchmarks\n- benches/event_throughput.rs - Throughput measurements\n\n## Tools\n- criterion = \"0.5\" for benchmarking\n- strace to verify fsync() syscalls\n- perf for CPU profiling\n\n## Success Criteria\n- p99 append latency <3ms confirmed\n- Benchmark results documented\n- fsync overhead measured and acceptable\n- Performance baseline established\n\n## Quality Gates\n- Statistical significance (criterion)\n- Multiple iterations (>100 samples)\n- Results reproducible\n\n## CUE Schema\nSchema: .beads/schemas/intent-cli-20260201012642-xie2aw1d.cue (TO BE CREATED)\n\n## Effort: 2 hours","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-01T13:57:05.589448114Z","created_by":"lewis","updated_at":"2026-02-01T13:57:05.589448114Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-vvg1","title":"queue-actors: Implement FIFOQueueActor with VecDeque","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-ulhj7zfd.cue implementation.cue\n# Schema location: /home/lewis/src/intent-cli/.beads/schemas/intent-cli-20260201085944-ulhj7zfd.cue\n\n\n#EnhancedBead: {\n  id: \"intent-cli-20260201085944-ulhj7zfd\"\n  title: \"queue-actors: Implement FIFOQueueActor with VecDeque\"\n  type: \"feature\"\n  priority: 2\n  effort_estimate: \"30min\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL implement queue actors\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN Enqueue received\\\", shall: \\\"THE SYSTEM SHALL add item to queue\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF queue full\\\", shall_not: \\\"THE SYSTEM SHALL NOT drop items\\\", because: \\\"bounded queues must reject\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"ractor Actor trait understood\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"Queue operations implemented\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"Queue ordering maintained\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write queue tests\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement queue-actors: Implement FIFOQueueActor with VecDeque\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/intent-cli-20260201085944-ulhj7zfd/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-01T14:59:45.350297275Z","created_by":"lewis","updated_at":"2026-02-01T14:59:45.350297275Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-wpt","title":"[Red Queen] CRITICAL: validation-invalid-transition: nu -c 'use oc-engine.nu *; if (is-valid-transition \"pending\" \"running\") { exit 1 } else { exit 0 }'","status":"closed","priority":0,"issue_type":"bug","owner":"priorlewis43@gmail.com","created_at":"2026-01-29T13:10:43.031994478Z","created_by":"Lewis Prior","updated_at":"2026-01-30T04:11:40.189530538Z","closed_at":"2026-01-30T04:11:40.189530538Z","close_reason":"Tests are false positives: P0 test passes (exit 0), P1 tests use 'echo fail' which always succeeds","source_repo":".","compaction_level":0}
{"id":"src-xo1","title":"Implement apply feature","description":"Apply GritQL pattern to single repo. Vertical slice: internal/features/apply/","status":"closed","priority":2,"issue_type":"feature","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T05:01:16.883058037Z","created_by":"Lewis Prior","updated_at":"2026-01-30T05:06:08.467867644Z","closed_at":"2026-01-30T05:06:08.467867644Z","close_reason":"Closed","source_repo":".","compaction_level":0}
{"id":"src-xwo","title":"[nuoc] resolve-awakeable doesn't restore job to running","status":"closed","priority":1,"issue_type":"bug","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T04:39:08.532472744Z","created_by":"Lewis Prior","updated_at":"2026-02-01T06:34:54.675459392Z","closed_at":"2026-02-01T06:34:54.675444062Z","close_reason":"Not relevant to OYA Rust project - nushell code removed","source_repo":".","compaction_level":0}
{"id":"src-y4y","title":"ui-dag: Implement force-directed layout algorithm","description":"Implement D3-force style force-directed layout: spring forces for edges, repulsion between nodes, center gravity. Run simulation until convergence (<2s for 50 nodes). Cache layout to avoid recalculation. Files: crates/oya-ui/src/layout/force_directed.rs. Tests: layout converges, 50 nodes in <2s, nodes don't overlap. Effort: 2hr. Parent: src-1o6","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T14:01:41.920776910Z","created_by":"lewis","updated_at":"2026-02-01T14:01:41.920776910Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-z28","title":"event-sourcing: Define complete SurrealDB schema with fsync","description":"## Overview\nImplement complete SurrealDB schema with 12 tables for event sourcing, workflow orchestration, and process management. Configure embedded kv-rocksdb with sync_mode='full' for fsync guarantees.\n\n## Architecture\n**Storage Engine**: Embedded SurrealDB with kv-rocksdb backend\n**Sync Mode**: sync_mode='full' for fsync on every write\n**Expected Overhead**: 2-3ms per write (acceptable for zero data loss)\n\n## Schema Tables (12 total)\n1. **state_transition** - Append-only event log with fsync\n2. **idempotency_key** - Prevents duplicate execution\n3. **checkpoint** - Compressed state snapshots (zstd)\n4. **bead** - Bead metadata\n5. **workflow_run** - Workflow execution tracking\n6. **process** - Worker process tracking\n7. **workspace** - Workspace isolation state\n8. **schedule** - Scheduled execution\n9. **token_bucket** - Rate limiting state\n10. **concurrency_limit** - Resource limits\n11. **webhook** - Webhook configurations\n12. **Graph relations** - depends_on, blocks edges\n\n## Files to Create\n- schema.surql - Complete SurrealDB schema definition\n- crates/events/src/db.rs - Database connection wrapper\n\n## Success Criteria\n- All 12 tables defined with proper indexes\n- Graph relations (depends_on, blocks) working\n- Embedded kv-rocksdb configured correctly\n- sync_mode='full' verified\n- Schema validation tests passing\n\n## Dependencies\n- surrealdb = { version = \"2.0\", features = [\"kv-rocksdb\"] }\n\n## Quality Gates\n- Zero unwraps, zero panics\n- All errors use Result<T, Error>\n- Schema validates with SurrealDB\n\n## CUE Schema\nSchema: .beads/schemas/intent-cli-20260201012642-u2duduno.cue (TO BE CREATED)\n\n## Effort: 4 hours","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-01T13:56:38.573078920Z","created_by":"lewis","updated_at":"2026-02-01T13:56:38.573078920Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"src-zl5","title":"[nuoc] job-execute skips ready state validation","status":"closed","priority":1,"issue_type":"bug","owner":"priorlewis43@gmail.com","created_at":"2026-01-30T04:39:08.296376807Z","created_by":"Lewis Prior","updated_at":"2026-02-01T06:34:54.618951069Z","closed_at":"2026-02-01T06:34:54.618939669Z","close_reason":"Not relevant to OYA Rust project - nushell code removed","source_repo":".","compaction_level":0}
